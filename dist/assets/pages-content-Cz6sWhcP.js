import{u as H,j as e,D as J,T as M,g as ge,a as ne,c as ue,r as xe,d as fe,b as ve,s as je,e as me,f as Y,h as be,i as ye,k as Se,l as Ne,m as Ce,n as _e}from"./pages-admin-BZcYvCNE.js";import{r as l}from"./vendor-react-Z5zKi_Kz.js";const ze={culto:"badge-gold",retiro:"badge-blue",conferencia:"badge-blue",boda:"badge-green",bautismo:"badge-gold",celula:"badge-amber",otro:"badge-green"},oe={culto:"â›ª",retiro:"ðŸ•ï¸",conferencia:"ðŸŽ¤",boda:"ðŸ’",bautismo:"ðŸ’§",celula:"ðŸ‘¥",otro:"ðŸ“…"},K={culto:"Culto",retiro:"Retiro",conferencia:"Conferencia",boda:"Boda",bautismo:"Bautismo",celula:"CÃ©lula",otro:"Otro"};function we({title:u,onClose:h,children:N}){return e.jsx("div",{className:"modal-overlay",onClick:m=>m.target===m.currentTarget&&h(),children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:u}),e.jsx("button",{className:"modal-close",onClick:h,children:"Ã—"})]}),N]})})}function Me(){var C;const[u,h]=l.useState(null),[N,m]=l.useState(null),S=o=>m({mensaje:o,tipo:"error"}),{puedeEditar:s}=H(),i=s("eventos"),[x,v]=l.useState([]),[d,p]=l.useState(!0),[j,_]=l.useState(null),[z,k]=l.useState(null),[f,B]=l.useState(null),[b,w]=l.useState({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""}),[D,P]=l.useState({nombre_visita:"",telefono_visita:""}),[F,I]=l.useState(!1),[A,T]=l.useState(""),r=async()=>{p(!0);try{const{data:o}=await ge();v(o)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}p(!1)};l.useEffect(()=>{r()},[]);const R=async o=>{k(o),B(null);try{const{data:t}=await ne(o.id);B(t)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}},L=async o=>{var t,n;o.preventDefault(),I(!0),T("");try{if(!b.fecha_inicio){T("La fecha es requerida"),I(!1);return}const a=new Date(b.fecha_inicio);if(isNaN(a.getTime())){T("Fecha invÃ¡lida"),I(!1);return}const g={nombre:b.nombre,tipo:b.tipo||null,descripcion:b.descripcion||null,lugar:b.lugar||null,fecha_inicio:a.toISOString(),fecha_fin:b.fecha_fin?new Date(b.fecha_fin).toISOString():null};await ue(g),r(),_(null),w({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""})}catch(a){const g=(n=(t=a.response)==null?void 0:t.data)==null?void 0:n.detail;Array.isArray(g)?T(g.map(y=>y.msg||JSON.stringify(y)).join(", ")):T(typeof g=="string"?g:"Error al crear evento")}I(!1)},c=async o=>{o.preventDefault(),I(!0);try{await xe(z.id,{nombre_visita:D.nombre_visita,telefono_visita:D.telefono_visita,presente:!0});const{data:t}=await ne(z.id);B(t),P({nombre_visita:"",telefono_visita:""})}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}I(!1)},E=async()=>{if(u)try{await fe(u),h(null),r()}catch{S("No se pudo eliminar.")}};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Eventos"}),e.jsxs("p",{className:"page-subtitle",children:[x.length," eventos registrados"]})]}),i&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{T(""),_("nuevo")},children:"+ Nuevo evento"})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:24,flexWrap:"wrap"},children:["culto","retiro","boda","bautismo","conferencia","celula"].map(o=>{const t=x.filter(n=>n.tipo===o).length;return t===0?null:e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:10,padding:"10px 16px",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:oe[o]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:t}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:[K[o],"s"]})]})]},o)})}),d?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner",style:{width:28,height:28}})}):e.jsx("div",{className:"grid-3",children:x.map(o=>e.jsxs("div",{className:"card",style:{position:"relative",cursor:"default"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:12},children:[e.jsx("span",{style:{fontSize:26},children:oe[o.tipo]||"ðŸ“…"}),e.jsx("span",{className:`badge ${ze[o.tipo]||"badge-green"}`,children:K[o.tipo]||o.tipo})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:6},children:o.nombre}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:4},children:["ðŸ“… ",new Date(o.fecha_inicio).toLocaleDateString("es-DO",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),o.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:12},children:["ðŸ“ ",o.lugar]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:14,borderTop:"1px solid var(--border)",paddingTop:12},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1,justifyContent:"center",fontSize:12,padding:"6px"},onClick:()=>R(o),children:"Ver asistencia"}),i&&e.jsx("button",{className:"btn btn-danger",style:{padding:"6px 10px",fontSize:12},onClick:()=>h(o.id),children:"âœ•"})]})]},o.id))}),j==="nuevo"&&e.jsxs(we,{title:"Nuevo evento",onClose:()=>_(null),children:[A&&e.jsx("div",{className:"alert alert-error",children:A}),e.jsxs("form",{onSubmit:L,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del evento *"}),e.jsx("input",{value:b.nombre,onChange:o=>w({...b,nombre:o.target.value}),className:"form-input",required:!0})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsx("select",{value:b.tipo,onChange:o=>w({...b,tipo:o.target.value}),className:"form-input",children:["culto","retiro","conferencia","boda","bautismo","celula","otro"].map(o=>e.jsx("option",{value:o,children:K[o]},o))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha y hora *"}),e.jsx(J,{name:"fecha_inicio",value:b.fecha_inicio,onChange:o=>w({...b,fecha_inicio:o.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:b.lugar,onChange:o=>w({...b,lugar:o.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DescripciÃ³n"}),e.jsx("textarea",{value:b.descripcion,onChange:o=>w({...b,descripcion:o.target.value}),className:"form-input",rows:2,style:{resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>_(null),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:F,children:F?"Guardando...":"Crear evento"})]})]})]}),z&&e.jsx("div",{className:"modal-overlay",onClick:o=>o.target===o.currentTarget&&k(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:550},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["Asistencia â€“ ",z.nombre]}),e.jsx("button",{className:"modal-close",onClick:()=>k(null),children:"Ã—"})]}),f&&e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsxs("div",{style:{background:"var(--green-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--green)"},children:f.presentes}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Presentes"})]}),e.jsxs("div",{style:{background:"var(--blue-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--blue)"},children:f.total_registros}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Total"})]})]}),e.jsxs("form",{onSubmit:c,style:{display:"flex",gap:10,marginBottom:18},children:[e.jsx("input",{placeholder:"Nombre de visita",value:D.nombre_visita,onChange:o=>P({...D,nombre_visita:o.target.value}),className:"form-input",style:{flex:2},required:!0}),e.jsx("input",{placeholder:"Tel\\u00e9fono",value:D.telefono_visita,onChange:o=>P({...D,telefono_visita:o.target.value}),className:"form-input",style:{flex:1}}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:F,style:{whiteSpace:"nowrap"},children:"+ Agregar"})]}),f?((C=f.registros)==null?void 0:C.length)===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"var(--text-muted)",fontSize:13},children:"Sin registros aÃºn"}):e.jsx("div",{style:{maxHeight:250,overflowY:"auto"},children:f.registros.map((o,t)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{fontWeight:500,fontSize:13},children:o.nombre_visita||"Miembro registrado"}),e.jsx("span",{className:`badge ${o.presente?"badge-green":"badge-red"}`,children:o.presente?"Presente":"Ausente"})]},t))}):e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("span",{className:"spinner"})})]})}),N&&e.jsx(M,{mensaje:N.mensaje,tipo:N.tipo,onClose:()=>m(null)}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar evento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:E,children:"SÃ­, eliminar"})]})]})})]})}const Q={nombre:"",cargo:"",telefono:"",email:"",direccion:"",biografia:"",versiculo:"",anios_ministerio:"",especialidad:"",foto_url:""};function Ve(){const[u,h]=l.useState(null),N=w=>h({mensaje:w,tipo:"error"}),{puedeEditar:m}=H(),S=m("pastora"),[s,i]=l.useState(Q),[x,v]=l.useState(!1),[d,p]=l.useState(Q),[j,_]=l.useState(!1),[z,k]=l.useState(!0);l.useEffect(()=>{ve().then(w=>{const D=w.data||Q;i(D),p(D)}).catch(()=>{}).finally(()=>k(!1))},[]);const f=w=>p({...d,[w.target.name]:w.target.value}),B=async w=>{w.preventDefault();try{await je(d),i(d),v(!1),_(!0),setTimeout(()=>_(!1),3e3)}catch{N("Ocurrio un error inesperado. Intenta de nuevo.")}},b=(w,D)=>D?e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:2},children:w}),e.jsx("div",{style:{fontWeight:500},children:D})]}):null;return z?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner"})}):e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Perfil de la Pastora"}),e.jsx("p",{className:"page-subtitle",children:"InformaciÃ³n pastoral y ministerial"})]}),!x&&S&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{p(s),v(!0)},children:"Ã¢Å“ÂÃ¯Â¸Â Editar perfil"})]}),j&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Ã¢Å“â€¦ Perfil guardado correctamente"}),x?e.jsx("div",{className:"card",style:{maxWidth:660},children:e.jsxs("form",{onSubmit:B,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:4},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n Personal"})}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre completo *"}),e.jsx("input",{name:"nombre",value:d.nombre,onChange:f,className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cargo / TÃ­tulo"}),e.jsx("input",{name:"cargo",value:d.cargo,onChange:f,className:"form-input",placeholder:"Ej: Pastora Principal"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TelÃ©fono"}),e.jsx("input",{name:"telefono",value:d.telefono,onChange:f,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo"}),e.jsx("input",{name:"email",type:"email",value:d.email,onChange:f,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"AÃ±os en el ministerio"}),e.jsx("input",{name:"anios_ministerio",value:d.anios_ministerio,onChange:f,className:"form-input",placeholder:"Ej: 15"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"URL de foto (opcional)"}),e.jsx("input",{name:"foto_url",value:d.foto_url,onChange:f,className:"form-input",placeholder:"https://..."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DirecciÃ³n"}),e.jsx("input",{name:"direccion",value:d.direccion,onChange:f,className:"form-input"})]}),e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,margin:"8px 0 4px"},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Especialidad ministerial"}),e.jsx("input",{name:"especialidad",value:d.especialidad,onChange:f,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"BiografÃ­a"}),e.jsx("textarea",{name:"biografia",value:d.biografia,onChange:f,className:"form-input",rows:4,style:{resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VersÃ­culo favorito"}),e.jsx("input",{name:"versiculo",value:d.versiculo,onChange:f,className:"form-input",placeholder:"Ej: Juan 7:38"})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:6},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>v(!1),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",children:"Ã°Å¸â€™Â¾ Guardar perfil"})]})]})}):e.jsxs("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[e.jsxs("div",{className:"card",style:{flex:"0 0 260px",textAlign:"center",padding:32},children:[s.foto_url?e.jsx("img",{src:s.foto_url,alt:"Foto pastora",style:{width:140,height:140,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)",marginBottom:16}}):e.jsx("div",{style:{width:140,height:140,borderRadius:"50%",background:"var(--bg-card)",border:"3px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,margin:"0 auto 16px"},children:"Ã°Å¸â€˜Â©Ã¢â‚¬ÂÃ°Å¸â€™Â¼"}),e.jsx("h2",{style:{fontFamily:"var(--font-heading)",fontSize:20,fontWeight:700,marginBottom:4},children:s.nombre||"Sin nombre"}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,marginBottom:8},children:s.cargo||"Pastora"}),s.anios_ministerio&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:13},children:[s.anios_ministerio," aÃ±os en el ministerio"]})]}),e.jsxs("div",{style:{flex:1,minWidth:280,display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n de contacto"})}),b("TelÃ©fono",s.telefono),b("Correo",s.email),b("DirecciÃ³n",s.direccion),!s.telefono&&!s.email&&!s.direccion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n de contacto"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),b("Especialidad",s.especialidad),b("BiografÃ­a",s.biografia),!s.especialidad&&!s.biografia&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n ministerial"})]}),s.versiculo&&e.jsxs("div",{className:"card",style:{borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:15,color:"var(--text)",marginBottom:6},children:['"',s.versiculo,'"']}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"Ã¢â‚¬â€ VersÃ­culo favorito"})]})]})]}),u&&e.jsx(M,{mensaje:u.mensaje,tipo:u.tipo,onClose:()=>h(null)})]})}const De="modulepreload",Ee=function(u){return"/"+u},ie={},ke=function(h,N,m){let S=Promise.resolve();if(N&&N.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),x=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));S=Promise.allSettled(N.map(v=>{if(v=Ee(v),v in ie)return;ie[v]=!0;const d=v.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${p}`))return;const j=document.createElement("link");if(j.rel=d?"stylesheet":De,d||(j.as="script"),j.crossOrigin="",j.href=v,x&&j.setAttribute("nonce",x),document.head.appendChild(j),d)return new Promise((_,z)=>{j.addEventListener("load",_),j.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${v}`)))})}))}function s(i){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=i,window.dispatchEvent(x),!x.defaultPrevented)throw i}return S.then(i=>{for(const x of i||[])x.status==="rejected"&&s(x.reason);return h().catch(s)})},X=["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"],Ae=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Visita a enfermos","Celula","Retiro congregacional","Culto unido"],pe={"Culto de avivamiento":"ðŸ”¥","Estudio bÃ­blico":"ðŸ“–","Escuela de niÃ±os":"ðŸ‘§","Visita a enfermos":"ðŸ¥",Celula:"ðŸ ","Retiro congregacional":"â›º","Culto unido":"ðŸ¤","":"ðŸ“…"},G={"Culto de avivamiento":["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],Celula:["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],"Estudio bÃ­blico":["Oracion de apertura","Encargado del estudio"],"Escuela de niÃ±os":["Encargado"],"Visita a enfermos":[],"Retiro congregacional":[],"Culto unido":[]},re=[{texto:"No dejando de congregarnos, como algunos tienen por costumbre, sino exhortÃ¡ndonos.",ref:"Hebreos 10:25"},{texto:"Porque donde estÃ¡n dos o tres congregados en mi nombre, alli estoy yo en medio de ellos.",ref:"Mateo 18:20"},{texto:"Yo me alegre con los que me decÃ­an: A la casa de Jehova iremos.",ref:"Salmos 122:1"},{texto:"Una cosa he demandado a Jehova; que este yo en la casa de Jehova todos los dias de mi vida.",ref:"Salmos 27:4"},{texto:"Y perseveraban en la doctrina de los apÃ³stoles, en la comuniÃ³n unos con otros, en el partimiento del pan y en las oraciones.",ref:"Hechos 2:42"},{texto:"Engrandezcan a JehovÃ¡ conmigo, y exaltemos su nombre a una.",ref:"Salmos 34:3"},{texto:"Cantad a JehovÃ¡ cÃ¡ntico nuevo; su alabanza sea en la congregaciÃ³n de los santos.",ref:"Salmos 149:1"}],Te=u=>{const h=new Date(u);h.setHours(0,0,0,0),h.setDate(h.getDate()+4-(h.getDay()||7));const N=new Date(h.getFullYear(),0,1);return`${h.getFullYear()}-W${Math.ceil(((h-N)/864e5+1)/7).toString().padStart(2,"0")}`},V=()=>Te(new Date),Z=u=>({dia:u,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}),Be=()=>({tipo_asignado:"miembro",miembro_id:"",pastor_externo:"",congregacion_externa:""}),le=u=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel();const h=new SpeechSynthesisUtterance(u);h.lang="es-ES",h.rate=.9,window.speechSynthesis.speak(h)};function Pe({label:u,parte:h,onChange:N,miembros:m}){const S=h||Be(),s=(i,x)=>N({...S,[i]:x});return e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:8,padding:"10px 14px",marginBottom:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:8,color:"var(--gold)"},children:u}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:1},children:[e.jsx("label",{className:"form-label",children:"Asignado a"}),e.jsxs("select",{value:S.tipo_asignado,onChange:i=>s("tipo_asignado",i.target.value),className:"form-input",children:[e.jsx("option",{value:"miembro",children:"Miembro de la iglesia"}),e.jsx("option",{value:"externo",children:"Miembro de otra congregacion"})]})]}),S.tipo_asignado==="miembro"?e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:2},children:[e.jsx("label",{className:"form-label",children:"Miembro"}),e.jsxs("select",{value:S.miembro_id,onChange:i=>s("miembro_id",i.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),m.map(i=>e.jsxs("option",{value:i.id,children:[i.nombres," ",i.apellidos]},i.id))]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Nombre del pastor"}),e.jsx("input",{value:S.pastor_externo,onChange:i=>s("pastor_externo",i.target.value),className:"form-input",placeholder:"Nombre"})]}),e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Congregacion"}),e.jsx("input",{value:S.congregacion_externa,onChange:i=>s("congregacion_externa",i.target.value),className:"form-input",placeholder:"Nombre congregacion"})]})]})]})]})}function Ie({diaData:u,miembros:h,onEscuchar:N}){const m=u,S=G[m.tipo]||[],s=pe[m.tipo]||"ðŸ“…",i=x=>{const v=m.partes[x];if(!v)return"Por asignar";if(v.tipo_asignado==="externo")return`${v.pastor_externo||"Pastor externo"} de ${v.congregacion_externa||"otra congregacion"}`;const d=h.find(p=>p.id===v.miembro_id);return d?`${d.nombres} ${d.apellidos}`:"Por asignar"};return m.tipo?e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,border:"2px solid var(--gold)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:S.length>0?14:0},children:[e.jsx("span",{style:{fontSize:48},children:s}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:22},children:m.dia}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,fontSize:16},children:m.tipo}),m.hora&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Hora: ",m.hora]}),m.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Lugar: ",m.lugar]}),m.pastor_visita&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Pastor: ",m.pastor_visita]})]}),e.jsx("button",{onClick:()=>N(m,i),style:{background:"var(--gold)",border:"none",borderRadius:50,width:56,height:56,fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"ðŸ”Š"})]}),S.length>0&&e.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12},children:S.map(x=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:14},children:x}),e.jsx("span",{style:{fontWeight:600,fontSize:14},children:i(x)})]},x))})]}):e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,display:"flex",alignItems:"center",gap:16,opacity:.5},children:[e.jsx("span",{style:{fontSize:40},children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:18},children:m.dia}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:14},children:"Sin actividad"})]})]})}function We({diaData:u,onChange:h,miembros:N}){const[m,S]=l.useState(!1),s=u,i=(p,j)=>h({...s,[p]:j}),x=G[s.tipo]||[],v=s.tipo==="Retiro congregacional"||s.tipo==="Culto unido",d=pe[s.tipo]||"ðŸ“…";return e.jsxs("div",{className:"card",style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>S(!m),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:d}),e.jsx("div",{style:{background:"var(--gold)",color:"#000",fontWeight:700,fontSize:13,borderRadius:6,padding:"4px 12px",minWidth:90,textAlign:"center"},children:s.dia}),s.tipo?e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:13},children:[s.tipo," ",s.hora?`- ${s.hora}`:""]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin actividad"})]}),e.jsx("span",{style:{color:"var(--text-muted)"},children:m?"cerrar":"abrir"})]}),m&&e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{className:"grid-2",style:{gap:12,marginBottom:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsxs("select",{value:s.tipo,onChange:p=>i("tipo",p.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Sin actividad --"}),Ae.map(p=>e.jsx("option",{value:p,children:p},p))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Hora"}),e.jsx("input",{type:"time",value:s.hora,onChange:p=>i("hora",p.target.value),className:"form-input"})]}),!v&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:s.lugar,onChange:p=>i("lugar",p.target.value),className:"form-input",placeholder:"Ej: Templo principal"})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pastor"}),e.jsx("input",{value:s.pastor_visita,onChange:p=>i("pastor_visita",p.target.value),className:"form-input",placeholder:"Nombre del pastor"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:s.lugar,onChange:p=>i("lugar",p.target.value),className:"form-input",placeholder:"Lugar del evento"})]})]})]}),x.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:10,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1},children:"Partes del programa"}),x.map(p=>e.jsx(Pe,{label:p,parte:s.partes[p],miembros:N,onChange:j=>i("partes",{...s.partes,[p]:j})},p))]}),s.tipo==="Visita a enfermos"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Encargado de la visita"}),e.jsxs("select",{value:s.encargado,onChange:p=>i("encargado",p.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),N.map(p=>e.jsxs("option",{value:p.id,children:[p.nombres," ",p.apellidos]},p.id))]})]})]})]})}function Ge(){const[u,h]=l.useState(null),N=async()=>{if(u&&u==="limpiar"){const n={...f,[z]:X.map(Z)};B(n),h(null);try{await Y(z,X.map(Z))}catch{}}},[m,S]=l.useState(null),s=n=>S({mensaje:n,tipo:"error"}),{puedeEditar:i,rol:x}=H(),v=i("programa"),[d,p]=l.useState([]),[j,_]=l.useState(!1),[z,k]=l.useState(V()),[f,B]=l.useState({}),[b,w]=l.useState(!1),[D,P]=l.useState(!1),[F,I]=l.useState(!1),A=re[new Date().getDay()%re.length],T=z===V(),r=f[z]||X.map(Z);l.useEffect(()=>{if(me({limit:200}).then(a=>p(a.data)).catch(()=>{}),["admin","pastor","pastora","secretaria","secretario"].includes(x)){const a=new Date;if(a.getDay()===0&&a.getHours()>=17){const g=V();localStorage.getItem("archivado_"+g)||Y(g,["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"].map(y=>({dia:y,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}))).then(()=>{localStorage.setItem("archivado_"+g,"1"),I(!0),setTimeout(()=>I(!1),6e3)}).catch(()=>{})}}be().then(a=>{const g=a.data||[];Promise.all(g.map(y=>ye(y))).then(y=>{const W={};y.forEach(O=>{O.data&&(W[O.data.semana]=O.data.datos)}),B(W)})}).catch(()=>{})},[]);const R=(n,a)=>{[...r],{...f}},L=async()=>{try{await Y(z,r),w(!0),setTimeout(()=>w(!1),3e3)}catch{s("Ocurrio un error inesperado. Intenta de nuevo.")}},c=()=>{ke(async()=>{const{jsPDF:n}=await import("./jspdf.es.min-PrW3tuXC.js").then(a=>a.j);return{jsPDF:n}},[]).then(({jsPDF:n})=>{const a=new n;a.setFillColor(8,13,26),a.rect(0,0,210,297,"F"),a.setFontSize(18),a.setTextColor(201,168,76),a.text("Programa Semanal",105,18,{align:"center"}),a.setFontSize(10),a.setTextColor(122,132,153),a.text("Ministerio San Juan 7:38 - Semana: "+z,105,26,{align:"center"}),a.setDrawColor(201,168,76),a.line(14,30,196,30);let g=38;r.forEach(y=>{if(g>270&&(a.addPage(),a.setFillColor(8,13,26),a.rect(0,0,210,297,"F"),g=20),a.setFillColor(14,21,37),a.roundedRect(14,g,182,8,2,2,"F"),a.setFontSize(10),a.setTextColor(201,168,76),a.text((y.dia||"").toUpperCase()+(y.tipo?"  -  "+y.tipo:"  -  Sin actividad"),18,g+5.5),g+=11,y.hora||y.lugar){a.setFontSize(8),a.setTextColor(122,132,153);let O="";y.hora&&(O+="Hora: "+y.hora+"   "),y.lugar&&(O+="Lugar: "+y.lugar),a.text(O.trim(),18,g),g+=5}["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre","Encargado del estudio","Encargado"].forEach(O=>{const $=y.partes&&y.partes[O];if($){let U="Por asignar";if($.tipo_asignado==="externo")U=($.pastor_externo||"")+" de "+($.congregacion_externa||"");else{const q=d.find(he=>String(he.id)===String($.miembro_id));q&&(U=q.nombres+" "+q.apellidos)}a.setFontSize(8),a.setTextColor(122,132,153),a.text(O+":",20,g),a.setTextColor(232,234,242),a.text(U,75,g),g+=5}}),g+=3}),a.setFontSize(7),a.setTextColor(122,132,153),a.text("Generado el "+new Date().toLocaleDateString("es-DO"),105,290,{align:"center"}),a.save("programa-"+z+".pdf")})},E=async()=>h("limpiar"),C=()=>{let n="Programa de la semana. ";r.forEach(a=>{if(!a.tipo){n+=`${a.dia}, sin actividad. `;return}n+=`${a.dia}, ${a.tipo}`,a.hora&&(n+=` a las ${a.hora}`),a.lugar&&(n+=`, en ${a.lugar}`),n+=". ",(G[a.tipo]||[]).forEach(y=>{const W=a.partes[y];if(W){const O=W.tipo_asignado==="externo"?`${W.pastor_externo} de ${W.congregacion_externa}`:d.find($=>$.id===W.miembro_id)?`${d.find($=>$.id===W.miembro_id).nombres} ${d.find($=>$.id===W.miembro_id).apellidos}`:"por asignar";n+=`${y}: ${O}. `}})}),le(n)},o=(n,a)=>{let g=`${n.dia}. ${n.tipo}`;n.hora&&(g+=` a las ${n.hora}`),n.lugar&&(g+=`, en ${n.lugar}`),n.pastor_visita&&(g+=`. Pastor ${n.pastor_visita}`),g+=". ",(G[n.tipo]||[]).forEach(W=>{g+=`${W}: ${a(W)}. `}),le(g)},t=Object.keys(f).sort().reverse();return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Programa Semanal"}),e.jsx("p",{className:"page-subtitle",children:"Ministerio San Juan 7:38 - Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>P(!D),children:D?"Ver actual":"Historial"}),v&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>{var n;_(!j),(n=window.speechSynthesis)==null||n.cancel()},children:j?"Modo admin":"ðŸ”Š Modo facil"}),(j||!v)&&e.jsx("button",{onClick:C,style:{background:"var(--gold)",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:700,fontSize:15,cursor:"pointer"},children:"ðŸ”Š Escuchar todo"}),v&&!j&&T&&e.jsx("button",{className:"btn btn-ghost",onClick:E,children:"Limpiar"}),v&&!j&&T&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>window.print(),children:"Imprimir"}),v&&!j&&e.jsx("button",{className:"btn btn-ghost",onClick:c,children:"â‡© Descargar PDF"}),v&&!j&&T&&e.jsx("button",{className:"btn btn-gold",onClick:L,children:"Guardar"})]})]}),b&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Programa guardado correctamente"}),F&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"âœ“ Programa archivado automÃ¡ticamente."}),j&&e.jsxs("div",{style:{background:"var(--gold)",borderRadius:12,padding:"16px 20px",marginBottom:20,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:32},children:"ðŸ”Š"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#000"},children:"Modo facil activado"}),e.jsx("div",{style:{fontSize:13,color:"#333"},children:"Presiona el boton ðŸ”Š en cada dia para escuchar el programa, o presiona Escuchar todo para oir toda la semana."})]})]}),D?e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:16},children:"Historial de programas"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No hay programas guardados aun."}):t.map(n=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("span",{style:{fontWeight:500},children:["Semana: ",n]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>{k(n),P(!1)},children:"Ver programa"})]},n))]}):e.jsxs(e.Fragment,{children:[!T&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--gold)",borderRadius:8,padding:"10px 16px",marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{color:"var(--gold)",fontWeight:600},children:["Viendo semana anterior: ",z]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>k(V()),children:"Volver a semana actual"})]}),e.jsxs("div",{className:"card",style:{marginBottom:20,borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:14,marginBottom:4},children:['"',A.texto,'"']}),e.jsxs("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:["-- ",A.ref]})]}),j||!v?r.map((n,a)=>e.jsx(Ie,{diaData:n,miembros:d,onEscuchar:o},n.dia)):r.map((n,a)=>e.jsx(We,{diaData:n,index:a,onChange:g=>R(),miembros:d},n.dia))]}),e.jsx("style",{children:`
        @media print {
          .sidebar, .page-header button, .btn { display: none !important; }
          .card { box-shadow: none !important; border: 1px solid #ccc !important; }
          body { background: white !important; color: black !important; }
        }
      `}),m&&e.jsx(M,{mensaje:m.mensaje,tipo:m.tipo,onClose:()=>S(null)}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar elemento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:N,children:"SÃ­, eliminar"})]})]})})]})}const ee={alta:{label:"Urgente",color:"var(--red)"},media:{label:"Normal",color:"var(--gold)"},baja:{label:"Informativo",color:"var(--green)"}},te=()=>({titulo:"",contenido:"",prioridad:"media",fecha_expira:""});function He(){const[u,h]=l.useState(null),[N,m]=l.useState(null),S=r=>h({mensaje:r,tipo:"error"}),{puedeEditar:s}=H(),i=s("anuncios"),[x,v]=l.useState([]),[d,p]=l.useState(te()),[j,_]=l.useState(null),[z,k]=l.useState(!1),[f,B]=l.useState(!0),b=r=>p({...d,[r.target.name]:r.target.value}),w=async()=>{try{const{data:r}=await Se();v(r)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}B(!1)};l.useEffect(()=>{w()},[]);const D=async()=>{if(!(!d.titulo||!d.contenido))try{const r={...d,fecha_expira:d.fecha_expira||null};j!==null?await Ne(j,r):await Ce(r),_(null),p(te()),k(!1),w()}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}},P=async()=>{if(N)try{await _e(N),m(null),w()}catch{S("No se pudo eliminar.")}},F=r=>{p({titulo:r.titulo,contenido:r.contenido,prioridad:r.prioridad,fecha_expira:r.fecha_expira||""}),_(r.id),k(!0)},I=new Date().toISOString().split("T")[0],A=x.filter(r=>!r.fecha_expira||r.fecha_expira>=I),T=x.filter(r=>r.fecha_expira&&r.fecha_expira<I);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Anuncios"}),e.jsxs("p",{className:"page-subtitle",children:[A.length," anuncio",A.length!==1?"s":""," activo",A.length!==1?"s":""]})]}),i&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{p(te()),_(null),k(!0)},children:"+ Nuevo anuncio"})]}),f&&e.jsx("div",{style:{textAlign:"center",padding:40},children:e.jsx("span",{className:"spinner"})}),!f&&A.length===0&&e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“¢"}),e.jsx("p",{children:"No hay anuncios activos. Crea uno nuevo."})]}),A.map(r=>{var R,L,c;return e.jsx("div",{className:"card",style:{marginBottom:14,borderLeft:`3px solid ${((R=ee[r.prioridad])==null?void 0:R.color)||"var(--gold)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[e.jsx("span",{style:{background:(L=ee[r.prioridad])==null?void 0:L.color,color:"#fff",fontSize:11,fontWeight:700,borderRadius:4,padding:"2px 8px"},children:(c=ee[r.prioridad])==null?void 0:c.label}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:new Date(r.fecha).toLocaleDateString("es-DO")}),r.fecha_expira&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Ã‚Â· Expira: ",new Date(r.fecha_expira).toLocaleDateString("es-DO")]})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:700,marginBottom:6},children:r.titulo}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,lineHeight:1.6,whiteSpace:"pre-wrap"},children:r.contenido})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[i&&e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>F(r),children:"Editar"}),i&&e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>m(r.id),children:"âœ•"})]})]})},r.id)}),T.length>0&&e.jsxs("div",{style:{marginTop:24},children:[e.jsx("h3",{style:{color:"var(--text-muted)",fontSize:13,textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Anuncios expirados"}),T.map(r=>e.jsx("div",{className:"card",style:{marginBottom:10,opacity:.5},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:14},children:r.titulo}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12,marginLeft:10},children:["ExpirÃƒÂ³: ",new Date(r.fecha_expira).toLocaleDateString("es-DO")]})]}),i&&e.jsx("button",{className:"btn btn-danger",style:{padding:"4px 10px",fontSize:12},onClick:()=>m(r.id),children:"âœ•"})]})},r.id))]}),z&&e.jsx("div",{className:"modal-overlay",onClick:r=>r.target===r.currentTarget&&k(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:j!==null?"Editar anuncio":"Nuevo anuncio"}),e.jsx("button",{className:"modal-close",onClick:()=>k(!1),children:"Ãƒâ€”"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Titulo *"}),e.jsx("input",{name:"titulo",value:d.titulo,onChange:b,className:"form-input",placeholder:"Ej: Retiro congregacional este sabado",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contenido *"}),e.jsx("textarea",{name:"contenido",value:d.contenido,onChange:b,className:"form-input",rows:4,style:{resize:"vertical"},placeholder:"Escribe aquÃƒÂ­ el detalle del anuncio..."})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Prioridad"}),e.jsxs("select",{name:"prioridad",value:d.prioridad,onChange:b,className:"form-input",children:[e.jsx("option",{value:"alta",children:"Urgente"}),e.jsx("option",{value:"media",children:"Normal"}),e.jsx("option",{value:"baja",children:"Informativo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de expiraciÃƒÂ³n"}),e.jsx(J,{name:"fecha_expira",value:d.fecha_expira,onChange:b})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:4},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>k(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:D,children:j!==null?"Actualizar":"Publicar anuncio"})]})]})]})}),u&&e.jsx(M,{mensaje:u.mensaje,tipo:u.tipo,onClose:()=>h(null)}),N&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar anuncio?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta accion no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>m(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:P,children:"Si, eliminar"})]})]})})]})}const ce="asistencia_iglesia",Oe=(u,h)=>{const N=new Date().toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),m=window.open("","_blank","width=900,height=700");m.document.write(`<!DOCTYPE html><html lang="es"><head>
    <meta charset="UTF-8"/>
    <title>${u}</title>
    <style>
      * { margin:0; padding:0; box-sizing:border-box; }
      body { font-family: Calibri, Arial, sans-serif; color: #1a1a2e; padding: 24px 32px; }
      .header { display:flex; align-items:center; gap:20px; border-bottom: 3px solid #1a2e4a; padding-bottom:14px; margin-bottom:18px; }
      .header img { width:72px; height:72px; object-fit:contain; border-radius:8px; }
      .header-info h1 { font-size:17px; font-weight:700; color:#1a2e4a; margin-bottom:3px; }
      .header-info p { font-size:13px; color:#4a6fa5; font-style:italic; margin-bottom:2px; }
      .header-info small { font-size:11px; color:#888; }
      h2 { font-size:15px; font-weight:700; color:#1a2e4a; margin:18px 0 10px; }
      table { width:100%; border-collapse:collapse; font-size:12px; margin-bottom:16px; }
      th { background:#1a2e4a; color:#fff; padding:7px 10px; text-align:left; font-weight:600; }
      td { padding:6px 10px; border-bottom:1px solid #e0e0e0; }
      tr:nth-child(even) td { background:#eef3fa; }
      .badge { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:600; }
      .badge-green { background:#d4edda; color:#155724; }
      .badge-amber { background:#fff3cd; color:#856404; }
      .badge-red   { background:#f8d7da; color:#721c24; }
      .section { margin-bottom:20px; }
      .stat-row { display:flex; gap:24px; margin-bottom:14px; flex-wrap:wrap; }
      .stat-box { background:#eef3fa; border-radius:8px; padding:12px 20px; text-align:center; }
      .stat-box .val { font-size:22px; font-weight:700; color:#1a2e4a; }
      .stat-box .lbl { font-size:11px; color:#666; }
      .bar-wrap { background:#e0e0e0; border-radius:4px; height:8px; margin-top:4px; }
      .bar { height:8px; border-radius:4px; }
      .footer { margin-top:24px; padding-top:10px; border-top:1px solid #ddd; font-size:11px; color:#aaa; text-align:right; }
      @media print { body { padding:12px 20px; } }
    </style>
  </head><body>
    <div class="header">
      <img src="/logo_iglesia.jpg" onerror="this.style.display='none'" />
      <div class="header-info">
        <h1>Iglesia Pentecostal Juan 7:38: El Semillero 1/10</h1>
        <p>Pastora: Dinorah Bautista</p>
        <small>${u} &nbsp;Â·&nbsp; ${N}</small>
      </div>
    </div>
    ${h}
    <div class="footer">Generado por el Sistema de GestiÃ³n â€” ${N}</div>
  </body></html>`),m.document.close(),m.focus(),setTimeout(()=>{m.print(),m.close()},400)},Fe=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Celula","Retiro congregacional","Culto unido","Otro"],Re=()=>new Date().toISOString().split("T")[0];function Je(){const[u,h]=l.useState(null),N=()=>{u&&(v(t=>t.filter(n=>n.id!==u)),h(null))},[m,S]=l.useState(null),[s,i]=l.useState([]),[x,v]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(ce))||[]}catch{return[]}}),[d,p]=l.useState("registrar"),[j,_]=l.useState(Re()),[z,k]=l.useState("Culto de avivamiento"),[f,B]=l.useState({}),[b,w]=l.useState(""),[D,P]=l.useState(!1),[F,I]=l.useState(!0),[A,T]=l.useState(null);l.useEffect(()=>{me({limit:500}).then(t=>{const n=t.data.filter(g=>g.estado==="activo");i(n);const a={};n.forEach(g=>a[g.id]=!1),B(a)}).catch(()=>{}).finally(()=>I(!1))},[]);const r=t=>{const n={};s.forEach(a=>n[a.id]=t),B(n)},R=()=>{const t=s.filter(y=>f[y.id]).map(y=>({id:y.id,nombre:`${y.nombres} ${y.apellidos}`})),a=[{id:Date.now(),fecha:j,tipo:z,total_miembros:s.length,total_presentes:t.length,presentes:t},...x];v(a),localStorage.setItem(ce,JSON.stringify(a)),P(!0),setTimeout(()=>P(!1),3e3);const g={};s.forEach(y=>g[y.id]=!1),B(g)},L=t=>h(t),c=s.filter(t=>`${t.nombres} ${t.apellidos}`.toLowerCase().includes(b.toLowerCase())),E=s.filter(t=>f[t.id]).length,C=s.map(t=>{const n=x.length,a=x.filter(y=>y.presentes.some(W=>W.id===t.id)).length,g=n>0?Math.round(a/n*100):0;return{...t,asistio:a,total:n,porcentaje:g}}).sort((t,n)=>t.porcentaje-n.porcentaje),o=()=>{const t=C.map(a=>{const g=a.porcentaje>70?"badge-green":a.porcentaje>40?"badge-amber":"badge-red",y=a.porcentaje>70?"Regular":a.porcentaje>40?"Irregular":"Ausente frecuente";return`<tr>
        <td>${a.nombres} ${a.apellidos}</td>
        <td style="text-align:center">${a.asistio}</td>
        <td style="text-align:center">${a.total}</td>
        <td style="text-align:center"><strong>${a.porcentaje}%</strong></td>
        <td><span class="badge ${g}">${y}</span></td>
      </tr>`}).join(""),n=`
      <div class="stat-row">
        <div class="stat-box"><div class="val">${x.length}</div><div class="lbl">Cultos registrados</div></div>
        <div class="stat-box"><div class="val">${s.length}</div><div class="lbl">Miembros activos</div></div>
      </div>
      <h2>Resumen de Asistencia por Miembro</h2>
      <table>
        <thead><tr><th>Miembro</th><th>Asistencias</th><th>Total cultos</th><th>%</th><th>Estado</th></tr></thead>
        <tbody>${t}</tbody>
      </table>`;Oe("Resumen de Asistencia",n)};return e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Asistencia"}),e.jsxs("p",{className:"page-subtitle",children:[x.length," registros guardados"]})]})}),e.jsx("div",{style:{display:"flex",gap:4,marginBottom:20,borderBottom:"1px solid var(--border)"},children:[["registrar","Registrar asistencia"],["historial","Historial"],["resumen","Resumen por miembro"]].map(([t,n])=>e.jsx("button",{onClick:()=>p(t),style:{background:"none",border:"none",cursor:"pointer",padding:"8px 18px",color:d===t?"var(--gold)":"var(--text-muted)",borderBottom:d===t?"2px solid var(--gold)":"2px solid transparent",fontSize:14,fontWeight:500,fontFamily:"var(--font-body)"},children:n},t))}),d==="registrar"&&e.jsxs("div",{children:[D&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Asistencia guardada correctamente"}),e.jsx("div",{className:"card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha"}),e.jsx(J,{name:"fecha",value:j,onChange:t=>_(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsx("select",{value:z,onChange:t=>k(t.target.value),className:"form-input",children:Fe.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14,flexWrap:"wrap",gap:10},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600},children:"Presentes: "}),e.jsx("span",{style:{color:"var(--gold)",fontWeight:700,fontSize:18},children:E}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" / ",s.length]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>r(!0),children:"Marcar todos"}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>r(!1),children:"Desmarcar todos"})]})]}),e.jsxs("div",{className:"search-bar",style:{marginBottom:14},children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar miembro...",value:b,onChange:t=>w(t.target.value)})]}),F?e.jsx("div",{style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:400,overflowY:"auto"},children:c.map(t=>e.jsxs("div",{onClick:()=>B({...f,[t.id]:!f[t.id]}),style:{display:"flex",alignItems:"center",gap:12,padding:"10px 14px",borderRadius:8,cursor:"pointer",background:f[t.id]?"rgba(var(--gold-rgb),0.1)":"var(--bg-card)",border:f[t.id]?"1px solid var(--gold)":"1px solid var(--border)",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:22,height:22,borderRadius:4,border:`2px solid ${f[t.id]?"var(--gold)":"var(--border)"}`,background:f[t.id]?"var(--gold)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:f[t.id]&&e.jsx("span",{style:{color:"#000",fontSize:14,fontWeight:700},children:"âœ“"})}),e.jsxs("span",{style:{fontWeight:f[t.id]?600:400},children:[t.nombres," ",t.apellidos]}),e.jsx("span",{className:`badge ${f[t.id]?"badge-green":""}`,style:{marginLeft:"auto",fontSize:11},children:f[t.id]?"Presente":"Ausente"})]},t.id))}),e.jsx("button",{className:"btn btn-gold",onClick:R,style:{width:"100%",marginTop:16,justifyContent:"center"},children:"Guardar asistencia"})]})]}),d==="historial"&&e.jsx("div",{className:"card",children:x.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay registros de asistencia aun."}):x.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 0",borderBottom:"1px solid var(--border)",flexWrap:"wrap",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.tipo}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:13},children:new Date(t.fecha).toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:20,color:"var(--gold)"},children:t.total_presentes}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["de ",t.total_miembros]})]}),e.jsxs("div",{style:{width:50,height:50,borderRadius:"50%",background:"var(--bg-card)",border:`3px solid ${t.total_presentes/t.total_miembros>.7?"var(--green)":t.total_presentes/t.total_miembros>.4?"var(--gold)":"var(--red)"}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:13},children:[Math.round(t.total_presentes/t.total_miembros*100),"%"]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:12,padding:"4px 10px"},onClick:()=>T(t),children:"Ver"}),e.jsx("button",{className:"btn btn-danger",style:{fontSize:12,padding:"4px 10px"},onClick:()=>L(t.id),children:"âœ•"})]})]})]},t.id))}),d==="resumen"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13},children:["Basado en ",x.length," registros. Los miembros con menor asistencia aparecen primero."]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:o,children:"ðŸ–¨ï¸ Imprimir"})]}),C.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay datos aun."}):e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Miembro"}),e.jsx("th",{children:"Asistencias"}),e.jsx("th",{children:"Total cultos"}),e.jsx("th",{children:"Porcentaje"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:C.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{style:{fontWeight:500},children:[t.nombres," ",t.apellidos]}),e.jsx("td",{style:{color:"var(--gold)",fontWeight:600},children:t.asistio}),e.jsx("td",{style:{color:"var(--text-muted)"},children:t.total}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:6,background:"var(--border)",borderRadius:3},children:e.jsx("div",{style:{width:`${t.porcentaje}%`,height:"100%",borderRadius:3,background:t.porcentaje>70?"var(--green)":t.porcentaje>40?"var(--gold)":"var(--red)"}})}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,minWidth:35},children:[t.porcentaje,"%"]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${t.porcentaje>70?"badge-green":t.porcentaje>40?"badge-amber":"badge-red"}`,children:t.porcentaje>70?"Regular":t.porcentaje>40?"Irregular":"Ausente frecuente"})})]},t.id))})]})})]}),A&&e.jsx("div",{className:"modal-overlay",onClick:t=>t.target===t.currentTarget&&T(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:500},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[A.tipo," â€” ",new Date(A.fecha).toLocaleDateString("es-DO")]}),e.jsx("button",{className:"modal-close",onClick:()=>T(null),children:"Ã—"})]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13,marginBottom:14},children:[A.total_presentes," de ",A.total_miembros," miembros presentes"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto"},children:A.presentes.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",background:"var(--bg-card)",borderRadius:8},children:[e.jsx("span",{style:{color:"var(--green)",fontWeight:700},children:"âœ“"}),e.jsx("span",{children:t.nombre})]},t.id))})]})}),m&&e.jsx(M,{mensaje:m.mensaje,tipo:m.tipo,onClose:()=>S(null)}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar registro?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:N,children:"SÃ­, eliminar"})]})]})})]})}const de="documentos_iglesia",ae=["Actas","Permisos y licencias","Estatutos","Contratos","Certificados","Financiero","Otro"],se=()=>({nombre:"",categoria:"Actas",fecha:"",descripcion:"",url:"",archivo_nombre:""});function Ue(){const[u,h]=l.useState(null),N=async()=>{if(u)try{await deleteDocumento(u),h(null),load()}catch{s("No se pudo eliminar.")}},[m,S]=l.useState(null),s=c=>S({mensaje:c,tipo:"error"}),[i,x]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(de))||[]}catch{return[]}}),[v,d]=l.useState(!1),[p,j]=l.useState(null),[_,z]=l.useState(se()),[k,f]=l.useState(""),[B,b]=l.useState(""),[w,D]=l.useState(!1),P=c=>z({..._,[c.target.name]:c.target.value}),F=c=>{const E=c.target.files[0];if(!E)return;const C=new FileReader;C.onload=o=>{z(t=>({...t,archivo_nombre:E.name,url:o.target.result}))},C.readAsDataURL(E)},I=()=>{if(!_.nombre)return;let c;p!==null?(c=i.map((E,C)=>C===p?{..._,id:E.id}:E),j(null)):c=[{..._,id:Date.now(),fecha_subida:new Date().toISOString()},...i],x(c),localStorage.setItem(de,JSON.stringify(c)),z(se()),d(!1),D(!0),setTimeout(()=>D(!1),3e3)},A=c=>{z(i[c]),j(c),d(!0)},T=c=>{if(!c.url)return;const E=document.createElement("a");E.href=c.url,E.download=c.archivo_nombre||c.nombre,E.click()},r={Actas:"ðŸ“‹","Permisos y licencias":"ðŸ“œ",Estatutos:"ðŸ“–",Contratos:"ðŸ¤",Certificados:"ðŸ†",Financiero:"ðŸ’°",Otro:"ðŸ“„"},R=i.filter(c=>{var o;const E=c.nombre.toLowerCase().includes(k.toLowerCase())||((o=c.descripcion)==null?void 0:o.toLowerCase().includes(k.toLowerCase())),C=!B||c.categoria===B;return E&&C}),L=ae.map(c=>({cat:c,docs:R.filter(E=>E.categoria===c)})).filter(c=>c.docs.length>0);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Documentos"}),e.jsxs("p",{className:"page-subtitle",children:[i.length," documento",i.length!==1?"s":""," guardado",i.length!==1?"s":""]})]}),e.jsx("button",{className:"btn btn-gold",onClick:()=>{z(se()),j(null),d(!0)},children:"+ Subir documento"})]}),w&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Documento guardado correctamente"}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:20,flexWrap:"wrap"},children:[e.jsxs("div",{className:"search-bar",children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar documento...",value:k,onChange:c=>f(c.target.value)})]}),e.jsxs("select",{value:B,onChange:c=>b(c.target.value),className:"form-input",style:{width:"auto"},children:[e.jsx("option",{value:"",children:"Todas las categorias"}),ae.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),R.length===0?e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“‚"}),e.jsx("p",{children:"No hay documentos guardados. Sube el primero."})]}):L.map(({cat:c,docs:E})=>e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:20},children:r[c]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:15,fontWeight:700,color:"var(--gold)"},children:c}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["(",E.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:E.map((C,o)=>e.jsxs("div",{className:"card",style:{display:"flex",alignItems:"center",gap:16,padding:"14px 18px"},children:[e.jsx("span",{style:{fontSize:32,flexShrink:0},children:r[C.categoria]||"ðŸ“„"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:15,marginBottom:4},children:C.nombre}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[C.fecha&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Fecha: ",new Date(C.fecha).toLocaleDateString("es-DO")]}),C.archivo_nombre&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Archivo: ",C.archivo_nombre]}),C.fecha_subida&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Subido: ",new Date(C.fecha_subida).toLocaleDateString("es-DO")]})]}),C.descripcion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,marginTop:4},children:C.descripcion})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[C.url&&e.jsx("button",{className:"btn btn-gold",style:{padding:"5px 12px",fontSize:12},onClick:()=>T(C),children:"Descargar"}),e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>A(i.indexOf(C)),children:"Editar"}),e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>h(C.id),children:"âœ•"})]})]},C.id))})]},c)),v&&e.jsx("div",{className:"modal-overlay",onClick:c=>c.target===c.currentTarget&&d(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:p!==null?"Editar documento":"Subir documento"}),e.jsx("button",{className:"modal-close",onClick:()=>d(!1),children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del documento *"}),e.jsx("input",{name:"nombre",value:_.nombre,onChange:P,className:"form-input",placeholder:"Ej: Acta de fundacion",required:!0})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Categoria"}),e.jsx("select",{name:"categoria",value:_.categoria,onChange:P,className:"form-input",children:ae.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha del documento"}),e.jsx(J,{name:"fecha",value:_.fecha,onChange:P})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Descripcion"}),e.jsx("textarea",{name:"descripcion",value:_.descripcion,onChange:P,className:"form-input",rows:3,style:{resize:"vertical"},placeholder:"Descripcion breve del documento..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Subir archivo (PDF, imagen, Word)"}),e.jsx("input",{type:"file",onChange:F,className:"form-input",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),_.archivo_nombre&&e.jsxs("div",{style:{color:"var(--green)",fontSize:12,marginTop:4},children:["Archivo: ",_.archivo_nombre]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>d(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:I,children:p!==null?"Actualizar":"Guardar documento"})]})]})]})}),m&&e.jsx(M,{mensaje:m.mensaje,tipo:m.tipo,onClose:()=>S(null)}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar documento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:N,children:"SÃ­, eliminar"})]})]})})]})}export{He as A,Ue as D,Me as E,Ge as P,ke as _,Ve as a,Je as b};
