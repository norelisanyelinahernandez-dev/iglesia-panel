const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-admin-gGs79RPA.js","assets/vendor-react-D_uAx6on.js","assets/vendor-charts-DdYviQ4Y.js"])))=>i.map(i=>d[i]);
import{o as C,j as e,p as N,g as F,k as O,b as $,h as H}from"./pages-admin-gGs79RPA.js";import{r as u}from"./vendor-react-D_uAx6on.js";const U="modulepreload",Y=function(o){return"/"+o},A={},V=function(y,r,S){let b=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),d=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));b=Promise.allSettled(r.map(c=>{if(c=Y(c),c in A)return;A[c]=!0;const m=c.endsWith(".css"),i=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${i}`))return;const a=document.createElement("link");if(a.rel=m?"stylesheet":U,m||(a.as="script"),a.crossOrigin="",a.href=c,d&&a.setAttribute("nonce",d),document.head.appendChild(a),m)return new Promise((n,v)=>{a.addEventListener("load",n),a.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function h(s){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=s,window.dispatchEvent(d),!d.defaultPrevented)throw s}return b.then(s=>{for(const d of s||[])d.status==="rejected"&&h(d.reason);return y().catch(h)})},B=o=>o?new Date(o+"T00:00:00").toLocaleDateString("es-DO",{day:"2-digit",month:"long",year:"numeric"}):null,_=o=>o?o.charAt(0).toUpperCase()+o.slice(1):"",Z=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],G=["diacono","lider","maestra","maestro","secretaria","secretario","copastor","copastora","pastor","pastora"];function X(){var M,R;const{user:o,logout:y}=C(),[r,S]=u.useState(null),[b,h]=u.useState([]),[s,d]=u.useState(null),[c,m]=u.useState(!0),[i,a]=u.useState("perfil"),n=G.includes((M=o==null?void 0:o.rol)==null?void 0:M.toLowerCase()),[v,w]=u.useState([]),[l,k]=u.useState(null),[I,L]=u.useState(null),J=()=>{const t=new Date;t.setDate(t.getDate()+4-(t.getDay()||7));const x=new Date(t.getFullYear(),0,1);return`${t.getFullYear()}-W${Math.ceil(((t-x)/864e5+1)/7).toString().padStart(2,"0")}`};u.useEffect(()=>{(async()=>{var x,g;try{const[f,W]=await Promise.allSettled([N.get("/miembros/me/perfil"),F()]);if(f.status==="fulfilled"&&S(((x=f.value)==null?void 0:x.data)||null),n)try{const{getMiembros:p}=await V(async()=>{const{getMiembros:E}=await import("./pages-admin-gGs79RPA.js").then(q=>q.v);return{getMiembros:E}},__vite__mapDeps([0,1,2])),D=await p({limit:500});d(D.data.filter(E=>E.estado==="activo").length)}catch{}if(W.status==="fulfilled"){const p=new Date;h(W.value.data.filter(D=>new Date(D.fecha)>=p).slice(0,5))}try{const p=await O();w(p.data||[])}catch{}try{const p=await $();k(p.data||null)}catch{}try{const p=await H(J());L(((g=p.data)==null?void 0:g.datos)||null)}catch{}}catch{}m(!1)})()},[]);const j=({icon:t,label:x,value:g})=>g?e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:10,padding:"8px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{fontSize:15,minWidth:20,textAlign:"center"},children:t}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:.5,marginBottom:2},children:x}),e.jsx("div",{style:{fontSize:13,fontWeight:500},children:g})]})]}):null,z=({id:t,icon:x,label:g})=>e.jsxs("button",{onClick:()=>a(t),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:4,padding:"10px 4px",background:"none",border:"none",cursor:"pointer",color:i===t?"var(--gold)":"var(--text-muted)",borderTop:i===t?"2px solid var(--gold)":"2px solid transparent",fontSize:11,fontWeight:i===t?700:400},children:[e.jsx("span",{style:{fontSize:20},children:x}),g]});return c?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:e.jsx("span",{className:"spinner",style:{width:36,height:36}})}):e.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg)",paddingBottom:70},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, var(--surface-2), var(--surface-3))",padding:"20px 16px 16px",position:"relative"},children:[e.jsx("button",{onClick:y,style:{position:"absolute",top:14,right:14,background:"none",border:"1px solid var(--border)",borderRadius:8,color:"var(--text-muted)",fontSize:12,padding:"5px 10px",cursor:"pointer"},children:"Salir"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[r!=null&&r.foto?e.jsx("img",{src:r.foto,style:{width:64,height:64,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)"}}):e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:"var(--surface)",border:"3px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:26},children:"ðŸ™"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"var(--gold)",fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:"Ministerio San Juan 7:38"}),e.jsx("div",{style:{fontSize:18,fontWeight:700},children:o==null?void 0:o.nombre}),e.jsxs("div",{style:{fontSize:12,color:"var(--text-muted)"},children:[_(r==null?void 0:r.rol)," Â· ",_(r==null?void 0:r.estado)]})]})]}),n&&s!==null&&e.jsxs("div",{style:{marginTop:14,background:"var(--surface)",borderRadius:10,padding:"10px 16px",display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:"âœ¦"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"var(--gold)"},children:s}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Miembros activos"})]})]})]}),e.jsxs("div",{style:{padding:"16px 16px 0"},children:[i==="perfil"&&r&&e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:12,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 16px",background:"var(--surface-2)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"ðŸ‘¤"}),e.jsx("span",{style:{fontWeight:700,fontSize:12,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Mi InformaciÃ³n"})]}),e.jsxs("div",{style:{padding:"4px 16px 8px"},children:[e.jsx(j,{icon:"ðŸ“±",label:"TelÃ©fono",value:r.telefono}),e.jsx(j,{icon:"âœ‰ï¸",label:"Correo",value:r.email}),e.jsx(j,{icon:"ðŸŽ‚",label:"Fecha de nacimiento",value:B(r.fecha_nacimiento)}),e.jsx(j,{icon:"ðŸ’§",label:"Fecha de bautismo",value:B(r.fecha_bautismo)}),e.jsx(j,{icon:"â­",label:"Ministerio",value:r.ministerio_actual}),e.jsx(j,{icon:"ðŸ“",label:"DirecciÃ³n",value:r.direccion}),e.jsx(j,{icon:"ðŸ’¼",label:"OcupaciÃ³n",value:r.ocupacion})]})]}),i==="eventos"&&e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:12,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 16px",background:"var(--surface-2)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("span",{style:{fontWeight:700,fontSize:12,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"PrÃ³ximos Eventos"})]}),e.jsx("div",{style:{padding:"8px 16px"},children:b.length===0?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,padding:"8px 0"},children:"No hay eventos prÃ³ximos."}):b.map(t=>e.jsxs("div",{style:{padding:"10px 0",borderBottom:"1px solid var(--border)",display:"flex",gap:12,alignItems:"flex-start"},children:[e.jsxs("div",{style:{background:"var(--gold)",color:"#000",borderRadius:8,padding:"6px 10px",textAlign:"center",minWidth:44},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700},children:new Date(t.fecha).getDate()}),e.jsx("div",{style:{fontSize:10,fontWeight:600},children:Z[new Date(t.fecha).getMonth()].slice(0,3).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:14},children:t.nombre||t.titulo}),t.lugar&&e.jsxs("div",{style:{fontSize:12,color:"var(--text-muted)"},children:["ðŸ“ ",t.lugar]}),t.hora&&e.jsxs("div",{style:{fontSize:12,color:"var(--text-muted)"},children:["ðŸ• ",t.hora]})]})]},t.id))})]}),i==="programa"&&e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:12,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 16px",background:"var(--surface-2)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{style:{fontWeight:700,fontSize:12,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Programa de esta semana"})]}),e.jsx("div",{style:{padding:"12px 16px"},children:I?(R=I.dias)==null?void 0:R.map((t,x)=>e.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--surface-2)",borderRadius:10},children:[e.jsxs("div",{style:{fontWeight:700,color:"var(--gold)",marginBottom:8,fontSize:14},children:[t.tipo," â€” ",t.hora," ",t.lugar?`Â· ${t.lugar}`:""]}),t.partes&&Object.entries(t.partes).map(([g,f])=>e.jsxs("div",{style:{fontSize:13,padding:"4px 0",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:g}),e.jsx("span",{style:{fontWeight:500},children:(f==null?void 0:f.nombre_libre)||(f==null?void 0:f.pastor_externo)||"â€”"})]},g))]},x)):e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"No hay programa registrado para esta semana."})})]}),i==="anuncios"&&e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:12,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 16px",background:"var(--surface-2)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"ðŸ“¢"}),e.jsx("span",{style:{fontWeight:700,fontSize:12,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Anuncios"})]}),e.jsx("div",{style:{padding:"12px 16px"},children:v.length===0?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"No hay anuncios por el momento."}):v.map((t,x)=>e.jsxs("div",{style:{marginBottom:12,padding:12,background:"var(--surface-2)",borderRadius:10,borderLeft:"3px solid var(--gold)"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:14,marginBottom:4},children:t.titulo}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)",lineHeight:1.6},children:t.contenido}),t.fecha&&e.jsxs("div",{style:{fontSize:11,color:"var(--text-dim)",marginTop:6},children:["ðŸ“… ",t.fecha]})]},x))})]}),i==="pastora"&&e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:12,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 16px",background:"var(--surface-2)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"âœï¸"}),e.jsx("span",{style:{fontWeight:700,fontSize:12,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n Pastoral"})]}),e.jsx("div",{style:{padding:"12px 16px"},children:l?e.jsxs(e.Fragment,{children:[l.foto&&e.jsx("img",{src:l.foto,style:{width:80,height:80,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)",display:"block",margin:"0 auto 12px"}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[e.jsx("div",{style:{fontSize:18,fontWeight:700},children:l.nombre}),l.cargo&&e.jsx("div",{style:{fontSize:13,color:"var(--gold)"},children:l.cargo})]}),l.biografia&&e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",lineHeight:1.7,marginBottom:12},children:l.biografia}),l.versiculo&&e.jsxs("div",{style:{background:"var(--surface-2)",borderRadius:10,padding:12,borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:13,color:"var(--text-muted)",margin:0},children:['"',l.versiculo,'"']}),l.referencia&&e.jsxs("span",{style:{fontSize:11,color:"var(--gold)",fontWeight:600},children:["â€” ",l.referencia]})]})]}):e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"No hay informaciÃ³n pastoral disponible."})})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"var(--surface)",borderTop:"1px solid var(--border)",display:"flex"},children:[e.jsx(z,{id:"perfil",icon:"ðŸ‘¤",label:"Mi Perfil"}),e.jsx(z,{id:"eventos",icon:"ðŸ“…",label:"Eventos"}),e.jsx(z,{id:"programa",icon:"ðŸ“‹",label:"Programa"}),e.jsx(z,{id:"anuncios",icon:"ðŸ“¢",label:"Anuncios"}),e.jsx(z,{id:"pastora",icon:"âœï¸",label:"Pastoral"})]})]})}const P=[{texto:'"Porque yo sÃ© los pensamientos que tengo acerca de vosotros, dice JehovÃ¡, pensamientos de paz y no de mal."',ref:"JeremÃ­as 29:11"},{texto:'"Todo lo puedo en Cristo que me fortalece."',ref:"Filipenses 4:13"},{texto:'"El SeÃ±or es mi pastor; nada me faltarÃ¡."',ref:"Salmos 23:1"},{texto:'"FÃ­ate de JehovÃ¡ de todo tu corazÃ³n, y no te apoyes en tu propia prudencia."',ref:"Proverbios 3:5"},{texto:'"Mas buscad primeramente el reino de Dios y su justicia, y todas estas cosas os serÃ¡n aÃ±adidas."',ref:"Mateo 6:33"},{texto:'"El que cree en mÃ­, como dice la Escritura, de su interior correrÃ¡n rÃ­os de agua viva."',ref:"Juan 7:38"},{texto:'"No se turbe vuestro corazÃ³n; creÃ©is en Dios, creed tambiÃ©n en mÃ­."',ref:"Juan 14:1"},{texto:'"Encomienda a JehovÃ¡ tu camino, y confÃ­a en Ã©l; y Ã©l harÃ¡."',ref:"Salmos 37:5"},{texto:'"Y sabemos que a los que aman a Dios, todas las cosas les ayudan a bien."',ref:"Romanos 8:28"},{texto:'"JehovÃ¡ es mi luz y mi salvaciÃ³n; Â¿de quiÃ©n temerÃ©?"',ref:"Salmos 27:1"},{texto:'"Esforzaos y cobrad Ã¡nimo; no temÃ¡is, ni tengÃ¡is miedo, porque JehovÃ¡ tu Dios es el que va contigo."',ref:"Deuteronomio 31:6"},{texto:'"Pero los que esperan en JehovÃ¡ tendrÃ¡n nuevas fuerzas; levantarÃ¡n alas como las Ã¡guilas."',ref:"IsaÃ­as 40:31"}],T=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function ee(){var m;const{user:o}=C(),[y,r]=u.useState([]),[S,b]=u.useState(!0),h=new Date,s=h.getMonth()+1,d=Math.floor((h-new Date(h.getFullYear(),0,0))/864e5),c=P[d%P.length];return u.useEffect(()=>{N.get("/miembros/",{params:{limit:500}}).then(i=>{const a=s,n=(i.data||[]).filter(v=>v.fecha_nacimiento?parseInt(v.fecha_nacimiento.split("-")[1])===a:!1).sort((v,w)=>{const l=parseInt(v.fecha_nacimiento.split("-")[2]),k=parseInt(w.fecha_nacimiento.split("-")[2]);return l-k});r(n)}).catch(()=>{}).finally(()=>b(!1))},[]),e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"page-title",children:["Â¡Bienvenido, ",(m=o==null?void 0:o.nombre)==null?void 0:m.split(" ")[0],"!"]}),e.jsx("p",{className:"page-subtitle",children:"Ministerio San Juan 7:38 Â· Del Semillero 1/11"})]})}),e.jsx("div",{className:"card",style:{marginBottom:20,borderLeft:"4px solid var(--gold)",background:"linear-gradient(135deg, var(--surface-2), var(--surface))"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:14},children:[e.jsx("span",{style:{fontSize:32,flexShrink:0},children:"âœï¸"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"var(--gold)",fontWeight:700,textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"VersÃ­culo del dÃ­a"}),e.jsx("p",{style:{fontStyle:"italic",fontSize:15,lineHeight:1.8,color:"var(--text)",marginBottom:8},children:c.texto}),e.jsxs("span",{style:{color:"var(--gold)",fontWeight:700,fontSize:13},children:["â€” ",c.ref]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:12,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:["ðŸŽ‚ CumpleaÃ±os de ",T[s-1]]}),e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginTop:2},children:S?"...":`${y.length} miembro${y.length!==1?"s":""} este mes`})]})}),S?e.jsx("div",{style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})}):y.length===0?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,textAlign:"center",padding:"20px 0"},children:"No hay cumpleaÃ±os registrados este mes."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:y.map(i=>{const a=parseInt(i.fecha_nacimiento.split("-")[2]),n=a===h.getDate();return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,padding:"10px 12px",borderRadius:10,background:n?"var(--gold)":"var(--surface-2)",border:n?"none":"1px solid var(--border)"},children:[e.jsx("div",{style:{width:44,height:44,borderRadius:10,flexShrink:0,background:n?"#000":"var(--surface)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:n?22:18},children:n?"ðŸŽ‰":"ðŸŽ‚"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:14,color:n?"#000":"var(--text)"},children:[i.nombres," ",i.apellidos,n&&e.jsx("span",{style:{marginLeft:8,fontSize:11,background:"#000",color:"var(--gold)",borderRadius:4,padding:"2px 6px"},children:"Â¡HOY! ðŸŽŠ"})]}),e.jsxs("div",{style:{fontSize:12,color:n?"#333":"var(--text-muted)"},children:[a," de ",T[s-1]," Â· ",i.rol||"Miembro"]})]})]},i.id)})})]})]})}export{ee as D,X as M};
