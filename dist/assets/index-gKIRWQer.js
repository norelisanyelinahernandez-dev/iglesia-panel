import{o as P,u as V,k as X,j as e,e as Q,T as Z,p as D,A as ee,P as B,q as se,M as ae,t as oe,I as te,R as ne,v as re,F as ie}from"./pages-admin-BZcYvCNE.js";import{a as le,u as G,b as ce,r as i,N as de,B as me,d as T,e as r,f as E,R as ue}from"./vendor-react-Z5zKi_Kz.js";import{E as $,P as q,A as U,a as J,b as pe,D as he}from"./pages-content-DuxCjY2U.js";import{M as Y,D as xe}from"./pages-miembro-cOtuND03.js";import"./vendor-charts-Ds92Sbdx.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function p(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(n){if(n.ep)return;n.ep=!0;const t=p(n);fetch(n.href,t)}})();var W={},H=le;W.createRoot=H.createRoot,W.hydrateRoot=H.hydrateRoot;const je=[{to:"/miembro/",label:"Panel",icono:"üè†",seccion:"panel"},{to:"/miembro/eventos",label:"Eventos",icono:"üìÖ",seccion:"eventos"},{to:"/miembro/programa",label:"Programa",icono:"üìñ",seccion:"programa"},{to:"/miembro/anuncios",label:"Anuncios",icono:"üì¢",seccion:"anuncios",badge:!0},{to:"/miembro/perfil",label:"Mi Perfil",icono:"üë§",seccion:"panel"},{to:"/miembro/pastora",label:"Info Pastoral",icono:"‚úùÔ∏è",seccion:"pastora"}],ge=[{to:"/",label:"Panel",icono:"üè†",seccion:"panel"},{to:"/miembros",label:"Miembros",icono:"üë•",seccion:"miembros"},{to:"/tesoreria",label:"Tesorer√≠a",icono:"üí∞",seccion:"tesoreria"},{to:"/finanzas",label:"Finanzas",icono:"üìä",seccion:"finanzas"},{to:"/reportes",label:"Reportes",icono:"üìã",seccion:"reportes"},{to:"/inventario",label:"Inventario",icono:"üì¶",seccion:"inventario"},{to:"/eventos",label:"Eventos",icono:"üìÖ",seccion:"eventos"},{to:"/asistencia",label:"Asistencia",icono:"‚úÖ",seccion:"asistencia"},{to:"/pastora",label:"Pastora",icono:"‚úùÔ∏è",seccion:"pastora"},{to:"/programa",label:"Programa",icono:"üìñ",seccion:"programa"},{to:"/anuncios",label:"Anuncios",icono:"üì¢",seccion:"anuncios",badge:!0},{to:"/documentos",label:"Documentos",icono:"üìÑ",seccion:"documentos"},{to:"/respaldo",label:"Respaldo",icono:"üíæ",seccion:"respaldo"},{to:"/configuracion",label:"Configuraci√≥n",icono:"‚öôÔ∏è",seccion:"configuracion"}],K="anuncios_visto_en";function O({children:o}){var h,S,b;const{user:a,logout:p}=P(),{puede:l}=V(),n=G(),t=ce(),[d,x]=i.useState(!1),[R,v]=i.useState(!1),C=["admin","pastor","pastora","secretaria","secretario","copastor","copastora","tesorero","tesorera","diacono","maestra"],N=((h=a==null?void 0:a.rol)==null?void 0:h.toLowerCase())||"",m=(a==null?void 0:a.tipo)==="miembro"&&!C.includes(N),g=m?je:ge.filter(({seccion:f})=>l(f)),k=t.pathname.includes("anuncios");i.useEffect(()=>{k&&(localStorage.setItem(K,new Date().toISOString()),v(!1))},[k]),i.useEffect(()=>{k||X().then(f=>{const A=f.data||[];if(A.length===0)return;const w=localStorage.getItem(K);if(!w){v(!0);return}const _=A.reduce((z,M)=>{const I=new Date(M.created_at||M.fecha||0);return I>z?I:z},new Date(0));v(_>new Date(w))}).catch(()=>{})},[]);const y=()=>{p(),n("/login")},u=()=>x(!1);return e.jsxs("div",{className:"layout",children:[e.jsx("div",{className:`sidebar-overlay ${d?"open":""}`,onClick:u}),e.jsxs("aside",{className:`sidebar ${d?"open":""}`,children:[e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:42,height:42,borderRadius:"50%",objectFit:"cover",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("div",{className:"logo-name",style:{fontSize:12,lineHeight:1.3},children:"Ministerio San Juan 7:38"}),e.jsx("div",{className:"logo-sub",style:{fontSize:10},children:"Del Semillero 1/11"}),e.jsx("div",{className:"logo-sub",children:m?"Portal del miembro":"Panel de gesti√≥n"})]})]}),e.jsx("nav",{className:"sidebar-nav",children:g.map(({to:f,label:A,icono:w,badge:_})=>e.jsxs(de,{to:f,end:f==="/"||f==="/miembro/",className:({isActive:z})=>`nav-item ${z?"active":""}`,onClick:u,children:[e.jsx("span",{className:"nav-icon",children:w}),e.jsx("span",{style:{flex:1},children:A}),_&&R&&e.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"#e74c3c",flexShrink:0,boxShadow:"0 0 6px rgba(231,76,60,0.8)"}})]},f))}),e.jsxs("div",{className:"sidebar-footer",children:[e.jsxs("div",{className:"user-card",children:[e.jsx("div",{className:"user-avatar",children:(b=(S=a==null?void 0:a.nombre)==null?void 0:S[0])==null?void 0:b.toUpperCase()}),e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-name",children:a==null?void 0:a.nombre}),e.jsx("div",{className:"user-role",children:a==null?void 0:a.rol})]})]}),e.jsx("button",{className:"logout-btn",onClick:y,title:"Cerrar sesi√≥n",children:"‚èª"})]})]}),e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"mobile-topbar",children:[e.jsx("button",{className:"menu-toggle",onClick:()=>x(!d),children:"‚ò∞"}),e.jsxs("div",{className:"mobile-topbar-logo",children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:32,height:32,borderRadius:"50%",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsx("div",{className:"mobile-topbar-title",children:"Ministerio San Juan 7:38"}),e.jsx("div",{className:"mobile-topbar-sub",children:"Del Semillero 1/11"})]})]})]}),e.jsx("div",{className:"content-inner",children:o})]})]})}function be({onDone:o}){const[a,p]=i.useState(!0);return i.useEffect(()=>{const l=setTimeout(()=>{p(!1)},1800),n=setTimeout(()=>{o()},2200);return()=>{clearTimeout(l),clearTimeout(n)}},[]),e.jsxs("div",{style:{position:"fixed",inset:0,background:"#0f1117",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,opacity:a?1:0,transition:"opacity 0.4s ease",pointerEvents:a?"all":"none"},children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",marginBottom:20,boxShadow:"0 0 30px rgba(184,134,11,0.4)"}}),e.jsx("div",{style:{fontFamily:"Playfair Display, serif",fontSize:18,fontWeight:700,color:"#fff",marginBottom:6},children:"Ministerio San Juan 7:38"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginBottom:30},children:"Del Semillero 1/11"}),e.jsx("div",{style:{width:40,height:3,background:"#b8860b",borderRadius:2}})]})}function fe(){const[o,a]=i.useState([]),[p,l]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{const{data:t}=await Q({limit:500}),d=new Date,x=d.getDate(),R=d.getMonth()+1,v=t.filter(C=>{if(!C.fecha_nacimiento)return!1;const N=new Date(C.fecha_nacimiento);return N.getDate()===x&&N.getMonth()+1===R});v.length>0&&(a(v),l(!0))}catch{}})()},[]),p?e.jsxs("div",{style:{position:"fixed",bottom:24,right:24,background:"var(--surface)",border:"1px solid var(--gold)",borderRadius:16,padding:"18px 20px",maxWidth:320,zIndex:999,boxShadow:"0 8px 32px rgba(0,0,0,0.4)",animation:"slideIn 0.4s ease"},children:[e.jsx("style",{children:"@keyframes slideIn { from { transform: translateY(20px); opacity:0 } to { transform: translateY(0); opacity:1 } }"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:24},children:"üéÇ"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:14,color:"var(--gold)"},children:"Cumpleanos hoy!"}),e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:o.length===1?"1 miembro cumple anos":`${o.length} miembros cumplen anos`})]})]}),e.jsx("button",{onClick:()=>l(!1),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",fontSize:16,padding:4},children:"X"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.map(n=>{const t=new Date().getFullYear()-new Date(n.fecha_nacimiento).getFullYear();return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,background:"var(--bg-card)",borderRadius:10,padding:"8px 12px"},children:[n.foto?e.jsx("img",{src:n.foto,style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid var(--gold)"}}):e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"var(--gold-dim)",border:"2px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:"üéâ"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:13},children:[n.nombres," ",n.apellidos]}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["Hoy cumple ",t," anos!"]})]})]},n.id)})})]}):null}function ve(){const{login:o,loginMiembro:a}=P(),p=G(),[l,n]=i.useState("admin"),[t,d]=i.useState({email:"",password:"",cedula:"",nombres:"",apellidos:"",fecha_nacimiento:""}),[x,R]=i.useState(!1),[v,C]=i.useState(""),[N,m]=i.useState(!1),g=y=>d({...t,[y.target.name]:y.target.value}),k=async y=>{var u,h;y.preventDefault(),C(""),m(!0);try{l==="admin"?(await o(t.email,t.password),p("/")):(await a(x?{nombres:t.nombres,apellidos:t.apellidos,fecha_nacimiento:t.fecha_nacimiento}:{cedula:t.cedula}),p("/miembro/"))}catch(S){C(((h=(u=S.response)==null?void 0:u.data)==null?void 0:h.detail)||"No se encontraron datos con esa informaci√≥n")}finally{m(!1)}};return e.jsxs("div",{className:"login-bg",children:[e.jsx("div",{className:"deco-cross cross-1",children:"√¢≈ì‚Ä∫"}),e.jsx("div",{className:"deco-cross cross-2",children:"√¢≈ì‚Ä∫"}),e.jsx("div",{className:"deco-cross cross-3",children:"√¢≈ì‚Ä∫"}),e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:90,height:90,borderRadius:"50%",objectFit:"cover"}})}),e.jsx("h1",{className:"login-title",children:"Ministerio San Juan 7:38"}),e.jsx("p",{className:"login-sub",children:"Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",background:"var(--surface-2)",borderRadius:10,padding:4,marginBottom:20,gap:4},children:[e.jsx("button",{type:"button",onClick:()=>n("admin"),style:{flex:1,padding:"8px 0",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:13,background:l==="admin"?"var(--gold)":"transparent",color:l==="admin"?"#000":"var(--text-muted)",transition:"all .2s"},children:"üëë Administraci√≥n"}),e.jsx("button",{type:"button",onClick:()=>n("miembro"),style:{flex:1,padding:"8px 0",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:13,background:l==="miembro"?"var(--gold)":"transparent",color:l==="miembro"?"#000":"var(--text-muted)",transition:"all .2s"},children:"üôè Soy miembro"})]}),v&&e.jsx("div",{className:"alert alert-error",children:v}),e.jsxs("form",{onSubmit:k,className:"login-form",children:[l==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo electr√≥nico"}),e.jsx("input",{name:"email",type:"email",className:"form-input",placeholder:"admin@iglesia.com",value:t.email,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contrase√±a"}),e.jsx("input",{name:"password",type:"password",className:"form-input",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:t.password,onChange:g,required:!0})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:16},children:[e.jsx("button",{type:"button",onClick:()=>R(!1),style:{padding:"6px 16px",borderRadius:20,border:"1px solid var(--border)",cursor:"pointer",fontWeight:600,fontSize:12,background:x?"transparent":"var(--surface-2)",color:x?"var(--text-muted)":"var(--gold)"},children:"Adulto"}),e.jsx("button",{type:"button",onClick:()=>R(!0),style:{padding:"6px 16px",borderRadius:20,border:"1px solid var(--border)",cursor:"pointer",fontWeight:600,fontSize:12,background:x?"var(--surface-2)":"transparent",color:x?"var(--gold)":"var(--text-muted)"},children:"Menor de edad"})]}),x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombres"}),e.jsx("input",{name:"nombres",type:"text",className:"form-input",placeholder:"Nombres completos",value:t.nombres,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Apellidos"}),e.jsx("input",{name:"apellidos",type:"text",className:"form-input",placeholder:"Apellidos completos",value:t.apellidos,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de nacimiento"}),e.jsx("input",{name:"fecha_nacimiento",type:"date",className:"form-input",value:t.fecha_nacimiento,onChange:g,required:!0})]})]}):e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"N√∫mero de c√©dula"}),e.jsx("input",{name:"cedula",type:"text",className:"form-input",placeholder:"000-0000000-0",value:t.cedula,onChange:g,required:!0})]})]}),e.jsx("button",{type:"submit",className:"btn btn-gold login-btn",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner",style:{width:16,height:16}})," Buscando..."]}):l==="admin"?"Iniciar sesi√≥n":"Entrar"})]}),e.jsx("div",{className:"login-divider",children:e.jsx("span",{children:"Sistema de Gesti√≥n Integral"})}),e.jsxs("div",{style:{textAlign:"center",marginTop:16,padding:"0 8px"},children:[e.jsx("p",{style:{fontStyle:"italic",fontSize:13,color:"var(--text-muted)",lineHeight:1.7},children:'"El que cree en m√≠, como dice la Escritura, de su interior correr√°n r√≠os de agua viva."'}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"‚Äî Juan 7:38"})]})]})]})}function L(o){const a=document.createElement("div");a.style.cssText="position:fixed;top:20px;right:20px;z-index:99999;background:#27ae60;color:white;padding:14px 20px;border-radius:8px;font-size:14px;font-weight:500;box-shadow:0 4px 12px rgba(0,0,0,0.3);max-width:320px;",a.textContent=o,document.body.appendChild(a),setTimeout(()=>a.remove(),3e3)}function ye(){const[o,a]=i.useState(null),p=async()=>{if(o)try{await deleteConfig(o),a(null),w()}catch{t("No se pudo eliminar.")}},[l,n]=i.useState(null),t=s=>n({mensaje:s,tipo:"error"}),{user:d}=P(),[x,R]=i.useState([]),[v,C]=i.useState(!0),[N,m]=i.useState(null),[g,k]=i.useState(null),[y,u]=i.useState(""),[h,S]=i.useState({nombre:"",email:"",password:"",rol:"admin"}),[b,f]=i.useState({password_actual:"",password_nuevo:"",confirmar:""}),A=["admin","secretaria","secretario","pastor","pastora","copastor","copastora","tesorero","tesorera"],w=async()=>{try{const{data:s}=await D.get("/auth/usuarios");R(s)}catch{t("Ocurrio un error inesperado. Intenta de nuevo.")}C(!1)};i.useEffect(()=>{w()},[]);const _=async()=>{var s,c;if(u(""),!h.nombre||!h.email||!h.password){u("Todos los campos son obligatorios");return}try{await D.post("/auth/usuarios",h),m(null),S({nombre:"",email:"",password:"",rol:"admin"}),w(),L("Usuario creado exitosamente")}catch(F){u(((c=(s=F.response)==null?void 0:s.data)==null?void 0:c.detail)||"Error al crear usuario")}},z=async()=>{var s,c;if(u(""),!b.password_nuevo||!b.confirmar){u("Completa todos los campos");return}if(b.password_nuevo!==b.confirmar){u("Las contrase√±as no coinciden");return}if(b.password_nuevo.length<6){u("La contrase√±a debe tener al menos 6 caracteres");return}try{await D.put(`/auth/usuarios/${g.id}/password`,{password_actual:b.password_actual,password_nuevo:b.password_nuevo}),m(null),f({password_actual:"",password_nuevo:"",confirmar:""}),L("Contrase√±a actualizada exitosamente")}catch(F){u(((c=(s=F.response)==null?void 0:s.data)==null?void 0:c.detail)||"Error al cambiar contrase√±a")}},M=async s=>{try{await D.put(`/auth/usuarios/${s.id}/activo`,{activo:!s.activo}),w(),L(s.activo?"Usuario desactivado":"Usuario activado")}catch{t("Ocurrio un error inesperado. Intenta de nuevo.")}},I=async s=>{if(window.confirm(`¬øEliminar al usuario ${s.nombre}? Esta accion no se puede deshacer.`))try{await D.delete(`/auth/usuarios/${s.id}`),w(),L("Usuario eliminado")}catch{t("Ocurrio un error inesperado. Intenta de nuevo.")}};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Configuracion"}),e.jsx("p",{className:"page-subtitle",children:"Gestion de usuarios del sistema"})]}),e.jsx("button",{className:"btn btn-gold",onClick:()=>{u(""),m("nuevo")},children:"+ Nuevo usuario"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{style:{fontFamily:"var(--font-heading)",fontSize:17,fontWeight:600,marginBottom:16},children:"Usuarios del sistema"}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})})}):x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500},children:s.nombre}),e.jsx("td",{style:{color:"var(--text-muted)",fontSize:13},children:s.email}),e.jsx("td",{children:e.jsx("span",{style:{background:"var(--gold)",color:"#000",padding:"2px 10px",borderRadius:20,fontSize:12,fontWeight:600},children:s.rol})}),e.jsx("td",{children:e.jsx("span",{style:{color:s.activo?"var(--green)":"var(--red)",fontWeight:600,fontSize:13},children:s.activo?"Activo":"Inactivo"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-sm",onClick:()=>{k(s),u(""),m("password")},children:"Contrase√±a"}),e.jsx("button",{className:`btn btn-sm ${s.activo?"btn-danger":"btn-gold"}`,onClick:()=>M(s),children:s.activo?"Desactivar":"Activar"}),s.email!==(d==null?void 0:d.email)&&e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>I(s),children:"Eliminar"})]})})]},s.id))})]})})]}),N==="nuevo"&&e.jsx("div",{className:"modal-overlay",onClick:()=>m(null),children:e.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Nuevo usuario"}),e.jsx("button",{className:"modal-close",onClick:()=>m(null),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[y&&e.jsx("div",{className:"alert alert-error",children:y}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre completo"}),e.jsx("input",{className:"input",value:h.nombre,onChange:s=>S(c=>({...c,nombre:s.target.value})),placeholder:"Nombre"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{className:"input",type:"email",value:h.email,onChange:s=>S(c=>({...c,email:s.target.value})),placeholder:"email@iglesia.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contrase√±a"}),e.jsx("input",{className:"input",type:"password",value:h.password,onChange:s=>S(c=>({...c,password:s.target.value})),placeholder:"Minimo 6 caracteres"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rol"}),e.jsx("select",{className:"input",value:h.rol,onChange:s=>S(c=>({...c,rol:s.target.value})),children:A.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:()=>m(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:_,children:"Crear usuario"})]})]})}),N==="password"&&g&&e.jsx("div",{className:"modal-overlay",onClick:()=>m(null),children:e.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Cambiar contrase√±a ‚Äî ",g.nombre]}),e.jsx("button",{className:"modal-close",onClick:()=>m(null),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[y&&e.jsx("div",{className:"alert alert-error",children:y}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nueva contrase√±a"}),e.jsx("input",{className:"input",type:"password",value:b.password_nuevo,onChange:s=>f(c=>({...c,password_nuevo:s.target.value})),placeholder:"Minimo 6 caracteres"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirmar contrase√±a"}),e.jsx("input",{className:"input",type:"password",value:b.confirmar,onChange:s=>f(c=>({...c,confirmar:s.target.value})),placeholder:"Repite la contrase√±a"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:()=>m(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:z,children:"Guardar"})]})]})}),l&&e.jsx(Z,{mensaje:l.mensaje,tipo:l.tipo,onClose:()=>n(null)}),o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"‚ö†Ô∏è"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"¬øEliminar elemento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acci√≥n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>a(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:p,children:"S√≠, eliminar"})]})]})})]})}function Ne({children:o}){const{user:a}=P();return a?o:e.jsx(E,{to:"/login",replace:!0})}function j({seccion:o,children:a}){const{puede:p}=V();return p(o)?a:e.jsx(E,{to:"/",replace:!0})}function Se(){const{user:o}=P();return e.jsxs(T,{children:[e.jsx(r,{path:"/login",element:o?e.jsx(E,{to:o.tipo==="miembro"?"/miembro/":"/",replace:!0}):e.jsx(ve,{})}),e.jsx(r,{path:"/mi-perfil",element:(o==null?void 0:o.tipo)==="miembro"?e.jsx(B,{children:e.jsx(O,{children:e.jsx(Y,{})})}):e.jsx(E,{to:"/login",replace:!0})}),e.jsx(r,{path:"/miembro/*",element:(o==null?void 0:o.tipo)==="miembro"?e.jsx(B,{children:e.jsx(O,{children:e.jsxs(T,{children:[e.jsx(r,{path:"/",element:e.jsx(xe,{})}),e.jsx(r,{path:"/eventos",element:e.jsx($,{})}),e.jsx(r,{path:"/programa",element:e.jsx(q,{})}),e.jsx(r,{path:"/anuncios",element:e.jsx(U,{})}),e.jsx(r,{path:"/pastora",element:e.jsx(J,{})}),e.jsx(r,{path:"/perfil",element:e.jsx(Y,{})}),e.jsx(r,{path:"*",element:e.jsx(E,{to:"/miembro/",replace:!0})})]})})}):e.jsx(E,{to:"/login",replace:!0})}),e.jsx(r,{path:"/*",element:e.jsx(Ne,{children:e.jsx(B,{children:e.jsx(O,{children:e.jsxs(T,{children:[e.jsx(r,{path:"/",element:(o==null?void 0:o.tipo)==="miembro"?e.jsx(E,{to:"/miembro/",replace:!0}):e.jsx(se,{})}),e.jsx(r,{path:"/miembros",element:e.jsx(j,{seccion:"miembros",children:e.jsx(ae,{})})}),e.jsx(r,{path:"/tesoreria",element:e.jsx(j,{seccion:"tesoreria",children:e.jsx(oe,{})})}),e.jsx(r,{path:"/inventario",element:e.jsx(j,{seccion:"inventario",children:e.jsx(te,{})})}),e.jsx(r,{path:"/eventos",element:e.jsx(j,{seccion:"eventos",children:e.jsx($,{})})}),e.jsx(r,{path:"/pastora",element:e.jsx(j,{seccion:"pastora",children:e.jsx(J,{})})}),e.jsx(r,{path:"/programa",element:e.jsx(j,{seccion:"programa",children:e.jsx(q,{})})}),e.jsx(r,{path:"/anuncios",element:e.jsx(j,{seccion:"anuncios",children:e.jsx(U,{})})}),e.jsx(r,{path:"/asistencia",element:e.jsx(j,{seccion:"asistencia",children:e.jsx(pe,{})})}),e.jsx(r,{path:"/reportes",element:e.jsx(j,{seccion:"reportes",children:e.jsx(ne,{})})}),e.jsx(r,{path:"/respaldo",element:e.jsx(j,{seccion:"respaldo",children:e.jsx(re,{})})}),e.jsx(r,{path:"/finanzas",element:e.jsx(j,{seccion:"finanzas",children:e.jsx(ie,{})})}),e.jsx(r,{path:"/documentos",element:e.jsx(j,{seccion:"documentos",children:e.jsx(he,{})})}),e.jsx(r,{path:"/configuracion",element:e.jsx(j,{seccion:"configuracion",children:e.jsx(ye,{})})}),e.jsx(r,{path:"*",element:e.jsx(E,{to:"/",replace:!0})})]})})})})})]})}function we(){const[o,a]=i.useState(!0);return e.jsx(ee,{children:e.jsxs(me,{children:[o&&e.jsx(be,{onDone:()=>a(!1)}),e.jsx(Se,{}),e.jsx(fe,{})]})})}const Ce="https://iglesia-api-g1ux.onrender.com",Re=()=>{const o=()=>{fetch(`${Ce}/health`).catch(()=>{})};o(),setInterval(o,10*60*1e3)};Re();W.createRoot(document.getElementById("root")).render(e.jsx(ue.StrictMode,{children:e.jsx(we,{})}));
