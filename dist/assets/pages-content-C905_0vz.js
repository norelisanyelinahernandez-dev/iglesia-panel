import{u as K,j as e,D as M,T as L,g as oe,a as Q,c as re,r as le,d as de,b as ce,s as me,e as se,f as pe,h as he,i as ge,k as ue,l as xe,m as fe,n as ve}from"./pages-admin-CwaVnrC-.js";import{r as o}from"./vendor-react-Z5zKi_Kz.js";const je={culto:"badge-gold",retiro:"badge-blue",conferencia:"badge-blue",boda:"badge-green",bautismo:"badge-gold",celula:"badge-amber",otro:"badge-green"},X={culto:"â›ª",retiro:"ðŸ•ï¸",conferencia:"ðŸŽ¤",boda:"ðŸ’",bautismo:"ðŸ’§",celula:"ðŸ‘¥",otro:"ðŸ“…"},V={culto:"Culto",retiro:"Retiro",conferencia:"Conferencia",boda:"Boda",bautismo:"Bautismo",celula:"CÃ©lula",otro:"Otro"};function be({title:m,onClose:d,children:y}){return e.jsx("div",{className:"modal-overlay",onClick:n=>n.target===n.currentTarget&&d(),children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:m}),e.jsx("button",{className:"modal-close",onClick:d,children:"Ã—"})]}),y]})})}function We(){var u;const[m,d]=o.useState(null),[y,n]=o.useState(null),f=s=>n({mensaje:s,tipo:"error"}),{puedeEditar:p}=K(),l=p("eventos"),[c,v]=o.useState([]),[b,i]=o.useState(!0),[D,N]=o.useState(null),[S,_]=o.useState(null),[w,x]=o.useState(null),[h,k]=o.useState({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""}),[B,T]=o.useState({nombre_visita:"",telefono_visita:""}),[W,A]=o.useState(!1),[I,E]=o.useState(""),r=async()=>{i(!0);try{const{data:s}=await oe();v(s)}catch{f("Ocurrio un error inesperado. Intenta de nuevo.")}i(!1)};o.useEffect(()=>{r()},[]);const O=async s=>{_(s),x(null);try{const{data:j}=await Q(s.id);x(j)}catch{f("Ocurrio un error inesperado. Intenta de nuevo.")}},$=async s=>{var j,t;s.preventDefault(),A(!0),E("");try{if(!h.fecha_inicio){E("La fecha es requerida"),A(!1);return}const C=new Date(h.fecha_inicio);if(isNaN(C.getTime())){E("Fecha invÃ¡lida"),A(!1);return}const z={nombre:h.nombre,tipo:h.tipo||null,descripcion:h.descripcion||null,lugar:h.lugar||null,fecha_inicio:C.toISOString(),fecha_fin:h.fecha_fin?new Date(h.fecha_fin).toISOString():null};await re(z),r(),N(null),k({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""})}catch(C){const z=(t=(j=C.response)==null?void 0:j.data)==null?void 0:t.detail;Array.isArray(z)?E(z.map(P=>P.msg||JSON.stringify(P)).join(", ")):E(typeof z=="string"?z:"Error al crear evento")}A(!1)},a=async s=>{s.preventDefault(),A(!0);try{await le(S.id,{nombre_visita:B.nombre_visita,telefono_visita:B.telefono_visita,presente:!0});const{data:j}=await Q(S.id);x(j),T({nombre_visita:"",telefono_visita:""})}catch{f("Ocurrio un error inesperado. Intenta de nuevo.")}A(!1)},g=async()=>{if(m)try{await de(m),d(null),r()}catch{f("No se pudo eliminar.")}};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Eventos"}),e.jsxs("p",{className:"page-subtitle",children:[c.length," eventos registrados"]})]}),l&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{E(""),N("nuevo")},children:"+ Nuevo evento"})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:24,flexWrap:"wrap"},children:["culto","retiro","boda","bautismo","conferencia","celula"].map(s=>{const j=c.filter(t=>t.tipo===s).length;return j===0?null:e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:10,padding:"10px 16px",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:X[s]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:j}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:[V[s],"s"]})]})]},s)})}),b?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner",style:{width:28,height:28}})}):e.jsx("div",{className:"grid-3",children:c.map(s=>e.jsxs("div",{className:"card",style:{position:"relative",cursor:"default"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:12},children:[e.jsx("span",{style:{fontSize:26},children:X[s.tipo]||"ðŸ“…"}),e.jsx("span",{className:`badge ${je[s.tipo]||"badge-green"}`,children:V[s.tipo]||s.tipo})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:6},children:s.nombre}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:4},children:["ðŸ“… ",new Date(s.fecha_inicio).toLocaleDateString("es-DO",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),s.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:12},children:["ðŸ“ ",s.lugar]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:14,borderTop:"1px solid var(--border)",paddingTop:12},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1,justifyContent:"center",fontSize:12,padding:"6px"},onClick:()=>O(s),children:"Ver asistencia"}),l&&e.jsx("button",{className:"btn btn-danger",style:{padding:"6px 10px",fontSize:12},onClick:()=>d(s.id),children:"âœ•"})]})]},s.id))}),D==="nuevo"&&e.jsxs(be,{title:"Nuevo evento",onClose:()=>N(null),children:[I&&e.jsx("div",{className:"alert alert-error",children:I}),e.jsxs("form",{onSubmit:$,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del evento *"}),e.jsx("input",{value:h.nombre,onChange:s=>k({...h,nombre:s.target.value}),className:"form-input",required:!0})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsx("select",{value:h.tipo,onChange:s=>k({...h,tipo:s.target.value}),className:"form-input",children:["culto","retiro","conferencia","boda","bautismo","celula","otro"].map(s=>e.jsx("option",{value:s,children:V[s]},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha y hora *"}),e.jsx(M,{name:"fecha_inicio",value:h.fecha_inicio,onChange:s=>k({...h,fecha_inicio:s.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:h.lugar,onChange:s=>k({...h,lugar:s.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DescripciÃ³n"}),e.jsx("textarea",{value:h.descripcion,onChange:s=>k({...h,descripcion:s.target.value}),className:"form-input",rows:2,style:{resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>N(null),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:W,children:W?"Guardando...":"Crear evento"})]})]})]}),S&&e.jsx("div",{className:"modal-overlay",onClick:s=>s.target===s.currentTarget&&_(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:550},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["Asistencia â€“ ",S.nombre]}),e.jsx("button",{className:"modal-close",onClick:()=>_(null),children:"Ã—"})]}),w&&e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsxs("div",{style:{background:"var(--green-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--green)"},children:w.presentes}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Presentes"})]}),e.jsxs("div",{style:{background:"var(--blue-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--blue)"},children:w.total_registros}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Total"})]})]}),e.jsxs("form",{onSubmit:a,style:{display:"flex",gap:10,marginBottom:18},children:[e.jsx("input",{placeholder:"Nombre de visita",value:B.nombre_visita,onChange:s=>T({...B,nombre_visita:s.target.value}),className:"form-input",style:{flex:2},required:!0}),e.jsx("input",{placeholder:"Tel\\u00e9fono",value:B.telefono_visita,onChange:s=>T({...B,telefono_visita:s.target.value}),className:"form-input",style:{flex:1}}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:W,style:{whiteSpace:"nowrap"},children:"+ Agregar"})]}),w?((u=w.registros)==null?void 0:u.length)===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"var(--text-muted)",fontSize:13},children:"Sin registros aÃºn"}):e.jsx("div",{style:{maxHeight:250,overflowY:"auto"},children:w.registros.map((s,j)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{fontWeight:500,fontSize:13},children:s.nombre_visita||"Miembro registrado"}),e.jsx("span",{className:`badge ${s.presente?"badge-green":"badge-red"}`,children:s.presente?"Presente":"Ausente"})]},j))}):e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("span",{className:"spinner"})})]})}),y&&e.jsx(L,{mensaje:y.mensaje,tipo:y.tipo,onClose:()=>n(null)}),m&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar evento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:g,children:"SÃ­, eliminar"})]})]})})]})}const G={nombre:"",cargo:"",telefono:"",email:"",direccion:"",biografia:"",versiculo:"",anios_ministerio:"",especialidad:"",foto_url:""};function Ie(){const[m,d]=o.useState(null),y=x=>d({mensaje:x,tipo:"error"}),[n,f]=o.useState(G),[p,l]=o.useState(!1),[c,v]=o.useState(G),[b,i]=o.useState(!1),[D,N]=o.useState(!0);o.useEffect(()=>{ce().then(x=>{const h=x.data||G;f(h),v(h)}).catch(()=>{}).finally(()=>N(!1))},[]);const S=x=>v({...c,[x.target.name]:x.target.value}),_=async x=>{x.preventDefault();try{await me(c),f(c),l(!1),i(!0),setTimeout(()=>i(!1),3e3)}catch{y("Ocurrio un error inesperado. Intenta de nuevo.")}},w=(x,h)=>h?e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:2},children:x}),e.jsx("div",{style:{fontWeight:500},children:h})]}):null;return D?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner"})}):e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Perfil de la Pastora"}),e.jsx("p",{className:"page-subtitle",children:"InformaciÃ³n pastoral y ministerial"})]}),!p&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{v(n),l(!0)},children:"âœï¸ Editar perfil"})]}),b&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"âœ… Perfil guardado correctamente"}),p?e.jsx("div",{className:"card",style:{maxWidth:660},children:e.jsxs("form",{onSubmit:_,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:4},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n Personal"})}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre completo *"}),e.jsx("input",{name:"nombre",value:c.nombre,onChange:S,className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cargo / TÃ­tulo"}),e.jsx("input",{name:"cargo",value:c.cargo,onChange:S,className:"form-input",placeholder:"Ej: Pastora Principal"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TelÃ©fono"}),e.jsx("input",{name:"telefono",value:c.telefono,onChange:S,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo"}),e.jsx("input",{name:"email",type:"email",value:c.email,onChange:S,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"AÃ±os en el ministerio"}),e.jsx("input",{name:"anios_ministerio",value:c.anios_ministerio,onChange:S,className:"form-input",placeholder:"Ej: 15"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"URL de foto (opcional)"}),e.jsx("input",{name:"foto_url",value:c.foto_url,onChange:S,className:"form-input",placeholder:"https://..."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DirecciÃ³n"}),e.jsx("input",{name:"direccion",value:c.direccion,onChange:S,className:"form-input"})]}),e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,margin:"8px 0 4px"},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Especialidad ministerial"}),e.jsx("input",{name:"especialidad",value:c.especialidad,onChange:S,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"BiografÃ­a"}),e.jsx("textarea",{name:"biografia",value:c.biografia,onChange:S,className:"form-input",rows:4,style:{resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VersÃ­culo favorito"}),e.jsx("input",{name:"versiculo",value:c.versiculo,onChange:S,className:"form-input",placeholder:"Ej: Juan 7:38"})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:6},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>l(!1),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",children:"ðŸ’¾ Guardar perfil"})]})]})}):e.jsxs("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[e.jsxs("div",{className:"card",style:{flex:"0 0 260px",textAlign:"center",padding:32},children:[n.foto_url?e.jsx("img",{src:n.foto_url,alt:"Foto pastora",style:{width:140,height:140,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)",marginBottom:16}}):e.jsx("div",{style:{width:140,height:140,borderRadius:"50%",background:"var(--bg-card)",border:"3px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,margin:"0 auto 16px"},children:"ðŸ‘©â€ðŸ’¼"}),e.jsx("h2",{style:{fontFamily:"var(--font-heading)",fontSize:20,fontWeight:700,marginBottom:4},children:n.nombre||"Sin nombre"}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,marginBottom:8},children:n.cargo||"Pastora"}),n.anios_ministerio&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:13},children:[n.anios_ministerio," aÃ±os en el ministerio"]})]}),e.jsxs("div",{style:{flex:1,minWidth:280,display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n de contacto"})}),w("TelÃ©fono",n.telefono),w("Correo",n.email),w("DirecciÃ³n",n.direccion),!n.telefono&&!n.email&&!n.direccion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n de contacto"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),w("Especialidad",n.especialidad),w("BiografÃ­a",n.biografia),!n.especialidad&&!n.biografia&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n ministerial"})]}),n.versiculo&&e.jsxs("div",{className:"card",style:{borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:15,color:"var(--text)",marginBottom:6},children:['"',n.versiculo,'"']}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"â€” VersÃ­culo favorito"})]})]})]}),m&&e.jsx(L,{mensaje:m.mensaje,tipo:m.tipo,onClose:()=>d(null)})]})}const ye=["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"],Ne=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Visita a enfermos","Celula","Retiro congregacional","Culto unido"],ne={"Culto de avivamiento":"ðŸ”¥","Estudio bÃ­blico":"ðŸ“–","Escuela de niÃ±os":"ðŸ‘§","Visita a enfermos":"ðŸ¥",Celula:"ðŸ ","Retiro congregacional":"â›º","Culto unido":"ðŸ¤","":"ðŸ“…"},F={"Culto de avivamiento":["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],Celula:["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],"Estudio bÃ­blico":["Oracion de apertura","Encargado del estudio"],"Escuela de niÃ±os":["Encargado"],"Visita a enfermos":[],"Retiro congregacional":[],"Culto unido":[]},Z=[{texto:"No dejando de congregarnos, como algunos tienen por costumbre, sino exhortÃ¡ndonos.",ref:"Hebreos 10:25"},{texto:"Porque donde estÃ¡n dos o tres congregados en mi nombre, alli estoy yo en medio de ellos.",ref:"Mateo 18:20"},{texto:"Yo me alegre con los que me decÃ­an: A la casa de Jehova iremos.",ref:"Salmos 122:1"},{texto:"Una cosa he demandado a Jehova; que este yo en la casa de Jehova todos los dias de mi vida.",ref:"Salmos 27:4"},{texto:"Y perseveraban en la doctrina de los apÃ³stoles, en la comuniÃ³n unos con otros, en el partimiento del pan y en las oraciones.",ref:"Hechos 2:42"},{texto:"Engrandezcan a JehovÃ¡ conmigo, y exaltemos su nombre a una.",ref:"Salmos 34:3"},{texto:"Cantad a JehovÃ¡ cÃ¡ntico nuevo; su alabanza sea en la congregaciÃ³n de los santos.",ref:"Salmos 149:1"}],Se=m=>{const d=new Date(m);d.setHours(0,0,0,0),d.setDate(d.getDate()+4-(d.getDay()||7));const y=new Date(d.getFullYear(),0,1);return`${d.getFullYear()}-W${Math.ceil(((d-y)/864e5+1)/7).toString().padStart(2,"0")}`},J=()=>Se(new Date),Ce=m=>({dia:m,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}),ze=()=>({tipo_asignado:"miembro",miembro_id:"",pastor_externo:"",congregacion_externa:""}),ee=m=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel();const d=new SpeechSynthesisUtterance(m);d.lang="es-ES",d.rate=.9,window.speechSynthesis.speak(d)};function _e({label:m,parte:d,onChange:y,miembros:n}){const f=d||ze(),p=(l,c)=>y({...f,[l]:c});return e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:8,padding:"10px 14px",marginBottom:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:8,color:"var(--gold)"},children:m}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:1},children:[e.jsx("label",{className:"form-label",children:"Asignado a"}),e.jsxs("select",{value:f.tipo_asignado,onChange:l=>p("tipo_asignado",l.target.value),className:"form-input",children:[e.jsx("option",{value:"miembro",children:"Miembro de la iglesia"}),e.jsx("option",{value:"externo",children:"Miembro de otra congregacion"})]})]}),f.tipo_asignado==="miembro"?e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:2},children:[e.jsx("label",{className:"form-label",children:"Miembro"}),e.jsxs("select",{value:f.miembro_id,onChange:l=>p("miembro_id",l.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),n.map(l=>e.jsxs("option",{value:l.id,children:[l.nombres," ",l.apellidos]},l.id))]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Nombre del pastor"}),e.jsx("input",{value:f.pastor_externo,onChange:l=>p("pastor_externo",l.target.value),className:"form-input",placeholder:"Nombre"})]}),e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Congregacion"}),e.jsx("input",{value:f.congregacion_externa,onChange:l=>p("congregacion_externa",l.target.value),className:"form-input",placeholder:"Nombre congregacion"})]})]})]})]})}function we({diaData:m,miembros:d,onEscuchar:y}){const n=m,f=F[n.tipo]||[],p=ne[n.tipo]||"ðŸ“…",l=c=>{const v=n.partes[c];if(!v)return"Por asignar";if(v.tipo_asignado==="externo")return`${v.pastor_externo||"Pastor externo"} de ${v.congregacion_externa||"otra congregacion"}`;const b=d.find(i=>i.id===v.miembro_id);return b?`${b.nombres} ${b.apellidos}`:"Por asignar"};return n.tipo?e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,border:"2px solid var(--gold)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:f.length>0?14:0},children:[e.jsx("span",{style:{fontSize:48},children:p}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:22},children:n.dia}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,fontSize:16},children:n.tipo}),n.hora&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Hora: ",n.hora]}),n.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Lugar: ",n.lugar]}),n.pastor_visita&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Pastor: ",n.pastor_visita]})]}),e.jsx("button",{onClick:()=>y(n,l),style:{background:"var(--gold)",border:"none",borderRadius:50,width:56,height:56,fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"ðŸ”Š"})]}),f.length>0&&e.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12},children:f.map(c=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:14},children:c}),e.jsx("span",{style:{fontWeight:600,fontSize:14},children:l(c)})]},c))})]}):e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,display:"flex",alignItems:"center",gap:16,opacity:.5},children:[e.jsx("span",{style:{fontSize:40},children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:18},children:n.dia}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:14},children:"Sin actividad"})]})]})}function De({diaData:m,onChange:d,miembros:y}){const[n,f]=o.useState(!1),p=m,l=(i,D)=>d({...p,[i]:D}),c=F[p.tipo]||[],v=p.tipo==="Retiro congregacional"||p.tipo==="Culto unido",b=ne[p.tipo]||"ðŸ“…";return e.jsxs("div",{className:"card",style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>f(!n),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:b}),e.jsx("div",{style:{background:"var(--gold)",color:"#000",fontWeight:700,fontSize:13,borderRadius:6,padding:"4px 12px",minWidth:90,textAlign:"center"},children:p.dia}),p.tipo?e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:13},children:[p.tipo," ",p.hora?`- ${p.hora}`:""]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin actividad"})]}),e.jsx("span",{style:{color:"var(--text-muted)"},children:n?"cerrar":"abrir"})]}),n&&e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{className:"grid-2",style:{gap:12,marginBottom:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsxs("select",{value:p.tipo,onChange:i=>l("tipo",i.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Sin actividad --"}),Ne.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Hora"}),e.jsx("input",{type:"time",value:p.hora,onChange:i=>l("hora",i.target.value),className:"form-input"})]}),!v&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:p.lugar,onChange:i=>l("lugar",i.target.value),className:"form-input",placeholder:"Ej: Templo principal"})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pastor"}),e.jsx("input",{value:p.pastor_visita,onChange:i=>l("pastor_visita",i.target.value),className:"form-input",placeholder:"Nombre del pastor"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:p.lugar,onChange:i=>l("lugar",i.target.value),className:"form-input",placeholder:"Lugar del evento"})]})]})]}),c.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:10,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1},children:"Partes del programa"}),c.map(i=>e.jsx(_e,{label:i,parte:p.partes[i],miembros:y,onChange:D=>l("partes",{...p.partes,[i]:D})},i))]}),p.tipo==="Visita a enfermos"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Encargado de la visita"}),e.jsxs("select",{value:p.encargado,onChange:i=>l("encargado",i.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),y.map(i=>e.jsxs("option",{value:i.id,children:[i.nombres," ",i.apellidos]},i.id))]})]})]})]})}function Pe(){const[m,d]=o.useState(null),y=async()=>{if(m)try{await deletePrograma(m),d(null),load()}catch{p("No se pudo eliminar.")}},[n,f]=o.useState(null),p=a=>f({mensaje:a,tipo:"error"}),{puedeEditar:l}=K(),c=l("programa"),[v,b]=o.useState([]),[i,D]=o.useState(!1),[N,S]=o.useState(J()),[_,w]=o.useState({}),[x,h]=o.useState(!1),[k,B]=o.useState(!1),T=Z[new Date().getDay()%Z.length],W=N===J(),A=_[N]||ye.map(Ce);o.useEffect(()=>{se({limit:200}).then(a=>b(a.data)).catch(()=>{}),pe().then(a=>{const g=a.data||[];Promise.all(g.map(u=>he(u))).then(u=>{const s={};u.forEach(j=>{j.data&&(s[j.data.semana]=j.data.datos)}),w(s)})}).catch(()=>{})},[]);const I=(a,g)=>{[...A],{..._}},E=async()=>{try{await ge(N,A),h(!0),setTimeout(()=>h(!1),3e3)}catch{p("Ocurrio un error inesperado. Intenta de nuevo.")}},r=()=>{let a="Programa de la semana. ";A.forEach(g=>{if(!g.tipo){a+=`${g.dia}, sin actividad. `;return}a+=`${g.dia}, ${g.tipo}`,g.hora&&(a+=` a las ${g.hora}`),g.lugar&&(a+=`, en ${g.lugar}`),a+=". ",(F[g.tipo]||[]).forEach(s=>{const j=g.partes[s];if(j){const t=j.tipo_asignado==="externo"?`${j.pastor_externo} de ${j.congregacion_externa}`:v.find(C=>C.id===j.miembro_id)?`${v.find(C=>C.id===j.miembro_id).nombres} ${v.find(C=>C.id===j.miembro_id).apellidos}`:"por asignar";a+=`${s}: ${t}. `}})}),ee(a)},O=(a,g)=>{let u=`${a.dia}. ${a.tipo}`;a.hora&&(u+=` a las ${a.hora}`),a.lugar&&(u+=`, en ${a.lugar}`),a.pastor_visita&&(u+=`. Pastor ${a.pastor_visita}`),u+=". ",(F[a.tipo]||[]).forEach(j=>{u+=`${j}: ${g(j)}. `}),ee(u)},$=Object.keys(_).sort().reverse();return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Programa Semanal"}),e.jsx("p",{className:"page-subtitle",children:"Ministerio San Juan 7:38 - Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>B(!k),children:k?"Ver actual":"Historial"}),c&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>{var a;D(!i),(a=window.speechSynthesis)==null||a.cancel()},children:i?"Modo admin":"ðŸ”Š Modo facil"}),(i||!c)&&e.jsx("button",{onClick:r,style:{background:"var(--gold)",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:700,fontSize:15,cursor:"pointer"},children:"ðŸ”Š Escuchar todo"}),c&&!i&&W&&e.jsx("button",{className:"btn btn-ghost",onClick:limpiar,children:"Limpiar"}),c&&!i&&W&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>window.print(),children:"Imprimir"}),c&&!i&&W&&e.jsx("button",{className:"btn btn-gold",onClick:E,children:"Guardar"})]})]}),x&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Programa guardado correctamente"}),i&&e.jsxs("div",{style:{background:"var(--gold)",borderRadius:12,padding:"16px 20px",marginBottom:20,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:32},children:"ðŸ”Š"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#000"},children:"Modo facil activado"}),e.jsx("div",{style:{fontSize:13,color:"#333"},children:"Presiona el boton ðŸ”Š en cada dia para escuchar el programa, o presiona Escuchar todo para oir toda la semana."})]})]}),k?e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:16},children:"Historial de programas"}),$.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No hay programas guardados aun."}):$.map(a=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("span",{style:{fontWeight:500},children:["Semana: ",a]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>{S(a),B(!1)},children:"Ver programa"})]},a))]}):e.jsxs(e.Fragment,{children:[!W&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--gold)",borderRadius:8,padding:"10px 16px",marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{color:"var(--gold)",fontWeight:600},children:["Viendo semana anterior: ",N]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>S(J()),children:"Volver a semana actual"})]}),e.jsxs("div",{className:"card",style:{marginBottom:20,borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:14,marginBottom:4},children:['"',T.texto,'"']}),e.jsxs("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:["-- ",T.ref]})]}),i||!c?A.map((a,g)=>e.jsx(we,{diaData:a,miembros:v,onEscuchar:O},a.dia)):A.map((a,g)=>e.jsx(De,{diaData:a,index:g,onChange:u=>I(),miembros:v},a.dia))]}),e.jsx("style",{children:`
        @media print {
          .sidebar, .page-header button, .btn { display: none !important; }
          .card { box-shadow: none !important; border: 1px solid #ccc !important; }
          body { background: white !important; color: black !important; }
        }
      `}),n&&e.jsx(L,{mensaje:n.mensaje,tipo:n.tipo,onClose:()=>f(null)}),m&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar elemento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:y,children:"SÃ­, eliminar"})]})]})})]})}const H={alta:{label:"Urgente",color:"var(--red)"},media:{label:"Normal",color:"var(--gold)"},baja:{label:"Informativo",color:"var(--green)"}},q=()=>({titulo:"",contenido:"",prioridad:"media",fecha_expira:""});function Oe(){const[m,d]=o.useState(null),[y,n]=o.useState(null),f=r=>n({mensaje:r,tipo:"error"}),{puedeEditar:p}=K(),l=p("anuncios"),[c,v]=o.useState([]),[b,i]=o.useState(q()),[D,N]=o.useState(null),[S,_]=o.useState(!1),[w,x]=o.useState(!0),h=r=>i({...b,[r.target.name]:r.target.value}),k=async()=>{try{const{data:r}=await ue();v(r)}catch{f("Ocurrio un error inesperado. Intenta de nuevo.")}x(!1)};o.useEffect(()=>{k()},[]);const B=async()=>{if(!(!b.titulo||!b.contenido))try{const r={...b,fecha_expira:b.fecha_expira||null};D!==null?await xe(D,r):await fe(r),N(null),i(q()),_(!1),k()}catch{f("Ocurrio un error inesperado. Intenta de nuevo.")}},T=async()=>{if(m)try{await ve(m),d(null),k()}catch{f("No se pudo eliminar.")}},W=r=>{i({titulo:r.titulo,contenido:r.contenido,prioridad:r.prioridad,fecha_expira:r.fecha_expira||""}),N(r.id),_(!0)},A=new Date().toISOString().split("T")[0],I=c.filter(r=>!r.fecha_expira||r.fecha_expira>=A),E=c.filter(r=>r.fecha_expira&&r.fecha_expira<A);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Anuncios"}),e.jsxs("p",{className:"page-subtitle",children:[I.length," anuncio",I.length!==1?"s":""," activo",I.length!==1?"s":""]})]}),l&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{i(q()),N(null),_(!0)},children:"+ Nuevo anuncio"})]}),w&&e.jsx("div",{style:{textAlign:"center",padding:40},children:e.jsx("span",{className:"spinner"})}),!w&&I.length===0&&e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"Ã°Å¸â€œÂ¢"}),e.jsx("p",{children:"No hay anuncios activos. Crea uno nuevo."})]}),I.map(r=>{var O,$,a;return e.jsx("div",{className:"card",style:{marginBottom:14,borderLeft:`3px solid ${((O=H[r.prioridad])==null?void 0:O.color)||"var(--gold)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[e.jsx("span",{style:{background:($=H[r.prioridad])==null?void 0:$.color,color:"#fff",fontSize:11,fontWeight:700,borderRadius:4,padding:"2px 8px"},children:(a=H[r.prioridad])==null?void 0:a.label}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:new Date(r.fecha).toLocaleDateString("es-DO")}),r.fecha_expira&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Â· Expira: ",new Date(r.fecha_expira).toLocaleDateString("es-DO")]})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:700,marginBottom:6},children:r.titulo}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,lineHeight:1.6,whiteSpace:"pre-wrap"},children:r.contenido})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>W(r),children:"Editar"}),e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>d(r.id),children:"âœ•"})]})]})},r.id)}),E.length>0&&e.jsxs("div",{style:{marginTop:24},children:[e.jsx("h3",{style:{color:"var(--text-muted)",fontSize:13,textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Anuncios expirados"}),E.map(r=>e.jsx("div",{className:"card",style:{marginBottom:10,opacity:.5},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:14},children:r.titulo}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12,marginLeft:10},children:["ExpirÃ³: ",new Date(r.fecha_expira).toLocaleDateString("es-DO")]})]}),e.jsx("button",{className:"btn btn-danger",style:{padding:"4px 10px",fontSize:12},onClick:()=>d(r.id),children:"âœ•"})]})},r.id))]}),S&&e.jsx("div",{className:"modal-overlay",onClick:r=>r.target===r.currentTarget&&_(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:D!==null?"Editar anuncio":"Nuevo anuncio"}),e.jsx("button",{className:"modal-close",onClick:()=>_(!1),children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Titulo *"}),e.jsx("input",{name:"titulo",value:b.titulo,onChange:h,className:"form-input",placeholder:"Ej: Retiro congregacional este sabado",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contenido *"}),e.jsx("textarea",{name:"contenido",value:b.contenido,onChange:h,className:"form-input",rows:4,style:{resize:"vertical"},placeholder:"escribe aquÃ­ el detalle del anuncio..."})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Prioridad"}),e.jsxs("select",{name:"prioridad",value:b.prioridad,onChange:h,className:"form-input",children:[e.jsx("option",{value:"alta",children:"Urgente"}),e.jsx("option",{value:"media",children:"Normal"}),e.jsx("option",{value:"baja",children:"Informativo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de expiraciÃ³n"}),e.jsx(M,{name:"fecha_expira",value:b.fecha_expira,onChange:h})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:4},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>_(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:B,children:D!==null?"Actualizar":"Publicar anuncio"})]})]})]})}),y&&e.jsx(L,{mensaje:y.mensaje,tipo:y.tipo,onClose:()=>n(null)}),m&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar anuncio?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:T,children:"SÃ­, eliminar"})]})]})})]})}const ae="asistencia_iglesia",Ee=(m,d)=>{const y=new Date().toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),n=window.open("","_blank","width=900,height=700");n.document.write(`<!DOCTYPE html><html lang="es"><head>
    <meta charset="UTF-8"/>
    <title>${m}</title>
    <style>
      * { margin:0; padding:0; box-sizing:border-box; }
      body { font-family: Calibri, Arial, sans-serif; color: #1a1a2e; padding: 24px 32px; }
      .header { display:flex; align-items:center; gap:20px; border-bottom: 3px solid #1a2e4a; padding-bottom:14px; margin-bottom:18px; }
      .header img { width:72px; height:72px; object-fit:contain; border-radius:8px; }
      .header-info h1 { font-size:17px; font-weight:700; color:#1a2e4a; margin-bottom:3px; }
      .header-info p { font-size:13px; color:#4a6fa5; font-style:italic; margin-bottom:2px; }
      .header-info small { font-size:11px; color:#888; }
      h2 { font-size:15px; font-weight:700; color:#1a2e4a; margin:18px 0 10px; }
      table { width:100%; border-collapse:collapse; font-size:12px; margin-bottom:16px; }
      th { background:#1a2e4a; color:#fff; padding:7px 10px; text-align:left; font-weight:600; }
      td { padding:6px 10px; border-bottom:1px solid #e0e0e0; }
      tr:nth-child(even) td { background:#eef3fa; }
      .badge { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:600; }
      .badge-green { background:#d4edda; color:#155724; }
      .badge-amber { background:#fff3cd; color:#856404; }
      .badge-red   { background:#f8d7da; color:#721c24; }
      .section { margin-bottom:20px; }
      .stat-row { display:flex; gap:24px; margin-bottom:14px; flex-wrap:wrap; }
      .stat-box { background:#eef3fa; border-radius:8px; padding:12px 20px; text-align:center; }
      .stat-box .val { font-size:22px; font-weight:700; color:#1a2e4a; }
      .stat-box .lbl { font-size:11px; color:#666; }
      .bar-wrap { background:#e0e0e0; border-radius:4px; height:8px; margin-top:4px; }
      .bar { height:8px; border-radius:4px; }
      .footer { margin-top:24px; padding-top:10px; border-top:1px solid #ddd; font-size:11px; color:#aaa; text-align:right; }
      @media print { body { padding:12px 20px; } }
    </style>
  </head><body>
    <div class="header">
      <img src="/logo_iglesia.jpg" onerror="this.style.display='none'" />
      <div class="header-info">
        <h1>Iglesia Pentecostal Juan 7:38: El Semillero 1/10</h1>
        <p>Pastora: Dinorah Bautista</p>
        <small>${m} &nbsp;Â·&nbsp; ${y}</small>
      </div>
    </div>
    ${d}
    <div class="footer">Generado por el Sistema de GestiÃ³n â€” ${y}</div>
  </body></html>`),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close()},400)},ke=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Celula","Retiro congregacional","Culto unido","Otro"],Ae=()=>new Date().toISOString().split("T")[0];function $e(){const[m,d]=o.useState(null),y=async()=>{if(m)try{await deleteAsistencia(m),d(null),load()}catch{p("No se pudo eliminar.")}},[n,f]=o.useState(null),p=t=>f({mensaje:t,tipo:"error"}),[l,c]=o.useState([]),[v,b]=o.useState(()=>{try{return JSON.parse(localStorage.getItem(ae))||[]}catch{return[]}}),[i,D]=o.useState("registrar"),[N,S]=o.useState(Ae()),[_,w]=o.useState("Culto de avivamiento"),[x,h]=o.useState({}),[k,B]=o.useState(""),[T,W]=o.useState(!1),[A,I]=o.useState(!0),[E,r]=o.useState(null);o.useEffect(()=>{se({limit:500}).then(t=>{const C=t.data.filter(P=>P.estado==="activo");c(C);const z={};C.forEach(P=>z[P.id]=!1),h(z)}).catch(()=>{}).finally(()=>I(!1))},[]);const O=t=>{const C={};l.forEach(z=>C[z.id]=t),h(C)},$=()=>{const t=l.filter(R=>x[R.id]).map(R=>({id:R.id,nombre:`${R.nombres} ${R.apellidos}`})),z=[{id:Date.now(),fecha:N,tipo:_,total_miembros:l.length,total_presentes:t.length,presentes:t},...v];b(z),localStorage.setItem(ae,JSON.stringify(z)),W(!0),setTimeout(()=>W(!1),3e3);const P={};l.forEach(R=>P[R.id]=!1),h(P)},a=t=>d(t),g=l.filter(t=>`${t.nombres} ${t.apellidos}`.toLowerCase().includes(k.toLowerCase())),u=l.filter(t=>x[t.id]).length,s=l.map(t=>{const C=v.length,z=v.filter(R=>R.presentes.some(ie=>ie.id===t.id)).length,P=C>0?Math.round(z/C*100):0;return{...t,asistio:z,total:C,porcentaje:P}}).sort((t,C)=>t.porcentaje-C.porcentaje),j=()=>{const t=s.map(z=>{const P=z.porcentaje>70?"badge-green":z.porcentaje>40?"badge-amber":"badge-red",R=z.porcentaje>70?"Regular":z.porcentaje>40?"Irregular":"Ausente frecuente";return`<tr>
        <td>${z.nombres} ${z.apellidos}</td>
        <td style="text-align:center">${z.asistio}</td>
        <td style="text-align:center">${z.total}</td>
        <td style="text-align:center"><strong>${z.porcentaje}%</strong></td>
        <td><span class="badge ${P}">${R}</span></td>
      </tr>`}).join(""),C=`
      <div class="stat-row">
        <div class="stat-box"><div class="val">${v.length}</div><div class="lbl">Cultos registrados</div></div>
        <div class="stat-box"><div class="val">${l.length}</div><div class="lbl">Miembros activos</div></div>
      </div>
      <h2>Resumen de Asistencia por Miembro</h2>
      <table>
        <thead><tr><th>Miembro</th><th>Asistencias</th><th>Total cultos</th><th>%</th><th>Estado</th></tr></thead>
        <tbody>${t}</tbody>
      </table>`;Ee("Resumen de Asistencia",C)};return e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Asistencia"}),e.jsxs("p",{className:"page-subtitle",children:[v.length," registros guardados"]})]})}),e.jsx("div",{style:{display:"flex",gap:4,marginBottom:20,borderBottom:"1px solid var(--border)"},children:[["registrar","Registrar asistencia"],["historial","Historial"],["resumen","Resumen por miembro"]].map(([t,C])=>e.jsx("button",{onClick:()=>D(t),style:{background:"none",border:"none",cursor:"pointer",padding:"8px 18px",color:i===t?"var(--gold)":"var(--text-muted)",borderBottom:i===t?"2px solid var(--gold)":"2px solid transparent",fontSize:14,fontWeight:500,fontFamily:"var(--font-body)"},children:C},t))}),i==="registrar"&&e.jsxs("div",{children:[T&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Asistencia guardada correctamente"}),e.jsx("div",{className:"card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha"}),e.jsx(M,{name:"fecha",value:N,onChange:t=>S(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsx("select",{value:_,onChange:t=>w(t.target.value),className:"form-input",children:ke.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14,flexWrap:"wrap",gap:10},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600},children:"Presentes: "}),e.jsx("span",{style:{color:"var(--gold)",fontWeight:700,fontSize:18},children:u}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" / ",l.length]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>O(!0),children:"Marcar todos"}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>O(!1),children:"Desmarcar todos"})]})]}),e.jsxs("div",{className:"search-bar",style:{marginBottom:14},children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar miembro...",value:k,onChange:t=>B(t.target.value)})]}),A?e.jsx("div",{style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:400,overflowY:"auto"},children:g.map(t=>e.jsxs("div",{onClick:()=>h({...x,[t.id]:!x[t.id]}),style:{display:"flex",alignItems:"center",gap:12,padding:"10px 14px",borderRadius:8,cursor:"pointer",background:x[t.id]?"rgba(var(--gold-rgb),0.1)":"var(--bg-card)",border:x[t.id]?"1px solid var(--gold)":"1px solid var(--border)",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:22,height:22,borderRadius:4,border:`2px solid ${x[t.id]?"var(--gold)":"var(--border)"}`,background:x[t.id]?"var(--gold)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:x[t.id]&&e.jsx("span",{style:{color:"#000",fontSize:14,fontWeight:700},children:"âœ“"})}),e.jsxs("span",{style:{fontWeight:x[t.id]?600:400},children:[t.nombres," ",t.apellidos]}),e.jsx("span",{className:`badge ${x[t.id]?"badge-green":""}`,style:{marginLeft:"auto",fontSize:11},children:x[t.id]?"Presente":"Ausente"})]},t.id))}),e.jsx("button",{className:"btn btn-gold",onClick:$,style:{width:"100%",marginTop:16,justifyContent:"center"},children:"Guardar asistencia"})]})]}),i==="historial"&&e.jsx("div",{className:"card",children:v.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay registros de asistencia aun."}):v.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 0",borderBottom:"1px solid var(--border)",flexWrap:"wrap",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.tipo}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:13},children:new Date(t.fecha).toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:20,color:"var(--gold)"},children:t.total_presentes}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["de ",t.total_miembros]})]}),e.jsxs("div",{style:{width:50,height:50,borderRadius:"50%",background:"var(--bg-card)",border:`3px solid ${t.total_presentes/t.total_miembros>.7?"var(--green)":t.total_presentes/t.total_miembros>.4?"var(--gold)":"var(--red)"}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:13},children:[Math.round(t.total_presentes/t.total_miembros*100),"%"]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:12,padding:"4px 10px"},onClick:()=>r(t),children:"Ver"}),e.jsx("button",{className:"btn btn-danger",style:{fontSize:12,padding:"4px 10px"},onClick:()=>a(t.id),children:"âœ•"})]})]})]},t.id))}),i==="resumen"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13},children:["Basado en ",v.length," registros. Los miembros con menor asistencia aparecen primero."]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:j,children:"ðŸ–¨ï¸ Imprimir"})]}),s.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay datos aun."}):e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Miembro"}),e.jsx("th",{children:"Asistencias"}),e.jsx("th",{children:"Total cultos"}),e.jsx("th",{children:"Porcentaje"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{style:{fontWeight:500},children:[t.nombres," ",t.apellidos]}),e.jsx("td",{style:{color:"var(--gold)",fontWeight:600},children:t.asistio}),e.jsx("td",{style:{color:"var(--text-muted)"},children:t.total}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:6,background:"var(--border)",borderRadius:3},children:e.jsx("div",{style:{width:`${t.porcentaje}%`,height:"100%",borderRadius:3,background:t.porcentaje>70?"var(--green)":t.porcentaje>40?"var(--gold)":"var(--red)"}})}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,minWidth:35},children:[t.porcentaje,"%"]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${t.porcentaje>70?"badge-green":t.porcentaje>40?"badge-amber":"badge-red"}`,children:t.porcentaje>70?"Regular":t.porcentaje>40?"Irregular":"Ausente frecuente"})})]},t.id))})]})})]}),E&&e.jsx("div",{className:"modal-overlay",onClick:t=>t.target===t.currentTarget&&r(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:500},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[E.tipo," â€” ",new Date(E.fecha).toLocaleDateString("es-DO")]}),e.jsx("button",{className:"modal-close",onClick:()=>r(null),children:"Ã—"})]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13,marginBottom:14},children:[E.total_presentes," de ",E.total_miembros," miembros presentes"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto"},children:E.presentes.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",background:"var(--bg-card)",borderRadius:8},children:[e.jsx("span",{style:{color:"var(--green)",fontWeight:700},children:"âœ“"}),e.jsx("span",{children:t.nombre})]},t.id))})]})}),n&&e.jsx(L,{mensaje:n.mensaje,tipo:n.tipo,onClose:()=>f(null)}),m&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar registro?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:y,children:"SÃ­, eliminar"})]})]})})]})}const te="documentos_iglesia",Y=["Actas","Permisos y licencias","Estatutos","Contratos","Certificados","Financiero","Otro"],U=()=>({nombre:"",categoria:"Actas",fecha:"",descripcion:"",url:"",archivo_nombre:""});function Re(){const[m,d]=o.useState(null),y=async()=>{if(m)try{await deleteDocumento(m),d(null),load()}catch{p("No se pudo eliminar.")}},[n,f]=o.useState(null),p=a=>f({mensaje:a,tipo:"error"}),[l,c]=o.useState(()=>{try{return JSON.parse(localStorage.getItem(te))||[]}catch{return[]}}),[v,b]=o.useState(!1),[i,D]=o.useState(null),[N,S]=o.useState(U()),[_,w]=o.useState(""),[x,h]=o.useState(""),[k,B]=o.useState(!1),T=a=>S({...N,[a.target.name]:a.target.value}),W=a=>{const g=a.target.files[0];if(!g)return;const u=new FileReader;u.onload=s=>{S(j=>({...j,archivo_nombre:g.name,url:s.target.result}))},u.readAsDataURL(g)},A=()=>{if(!N.nombre)return;let a;i!==null?(a=l.map((g,u)=>u===i?{...N,id:g.id}:g),D(null)):a=[{...N,id:Date.now(),fecha_subida:new Date().toISOString()},...l],c(a),localStorage.setItem(te,JSON.stringify(a)),S(U()),b(!1),B(!0),setTimeout(()=>B(!1),3e3)},I=a=>{S(l[a]),D(a),b(!0)},E=a=>{if(!a.url)return;const g=document.createElement("a");g.href=a.url,g.download=a.archivo_nombre||a.nombre,g.click()},r={Actas:"ðŸ“‹","Permisos y licencias":"ðŸ“œ",Estatutos:"ðŸ“–",Contratos:"ðŸ¤",Certificados:"ðŸ†",Financiero:"ðŸ’°",Otro:"ðŸ“„"},O=l.filter(a=>{var s;const g=a.nombre.toLowerCase().includes(_.toLowerCase())||((s=a.descripcion)==null?void 0:s.toLowerCase().includes(_.toLowerCase())),u=!x||a.categoria===x;return g&&u}),$=Y.map(a=>({cat:a,docs:O.filter(g=>g.categoria===a)})).filter(a=>a.docs.length>0);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Documentos"}),e.jsxs("p",{className:"page-subtitle",children:[l.length," documento",l.length!==1?"s":""," guardado",l.length!==1?"s":""]})]}),e.jsx("button",{className:"btn btn-gold",onClick:()=>{S(U()),D(null),b(!0)},children:"+ Subir documento"})]}),k&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Documento guardado correctamente"}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:20,flexWrap:"wrap"},children:[e.jsxs("div",{className:"search-bar",children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar documento...",value:_,onChange:a=>w(a.target.value)})]}),e.jsxs("select",{value:x,onChange:a=>h(a.target.value),className:"form-input",style:{width:"auto"},children:[e.jsx("option",{value:"",children:"Todas las categorias"}),Y.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),O.length===0?e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“‚"}),e.jsx("p",{children:"No hay documentos guardados. Sube el primero."})]}):$.map(({cat:a,docs:g})=>e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:20},children:r[a]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:15,fontWeight:700,color:"var(--gold)"},children:a}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["(",g.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:g.map((u,s)=>e.jsxs("div",{className:"card",style:{display:"flex",alignItems:"center",gap:16,padding:"14px 18px"},children:[e.jsx("span",{style:{fontSize:32,flexShrink:0},children:r[u.categoria]||"ðŸ“„"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:15,marginBottom:4},children:u.nombre}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[u.fecha&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Fecha: ",new Date(u.fecha).toLocaleDateString("es-DO")]}),u.archivo_nombre&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Archivo: ",u.archivo_nombre]}),u.fecha_subida&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Subido: ",new Date(u.fecha_subida).toLocaleDateString("es-DO")]})]}),u.descripcion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,marginTop:4},children:u.descripcion})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[u.url&&e.jsx("button",{className:"btn btn-gold",style:{padding:"5px 12px",fontSize:12},onClick:()=>E(u),children:"Descargar"}),e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>I(l.indexOf(u)),children:"Editar"}),e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>d(u.id),children:"âœ•"})]})]},u.id))})]},a)),v&&e.jsx("div",{className:"modal-overlay",onClick:a=>a.target===a.currentTarget&&b(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:i!==null?"Editar documento":"Subir documento"}),e.jsx("button",{className:"modal-close",onClick:()=>b(!1),children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del documento *"}),e.jsx("input",{name:"nombre",value:N.nombre,onChange:T,className:"form-input",placeholder:"Ej: Acta de fundacion",required:!0})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Categoria"}),e.jsx("select",{name:"categoria",value:N.categoria,onChange:T,className:"form-input",children:Y.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha del documento"}),e.jsx(M,{name:"fecha",value:N.fecha,onChange:T})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Descripcion"}),e.jsx("textarea",{name:"descripcion",value:N.descripcion,onChange:T,className:"form-input",rows:3,style:{resize:"vertical"},placeholder:"Descripcion breve del documento..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Subir archivo (PDF, imagen, Word)"}),e.jsx("input",{type:"file",onChange:W,className:"form-input",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),N.archivo_nombre&&e.jsxs("div",{style:{color:"var(--green)",fontSize:12,marginTop:4},children:["Archivo: ",N.archivo_nombre]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>b(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:A,children:i!==null?"Actualizar":"Guardar documento"})]})]})]})}),n&&e.jsx(L,{mensaje:n.mensaje,tipo:n.tipo,onClose:()=>f(null)}),m&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar documento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:y,children:"SÃ­, eliminar"})]})]})})]})}export{Oe as A,Re as D,We as E,Pe as P,Ie as a,$e as b};
