import{o as M,u as Y,k as K,j as e,e as V,T as G,p as P,A as X,P as D,q as Q,M as Z,t as ee,I as se,R as ae,v as oe,F as te}from"./pages-admin-B6MszD-j.js";import{a as ne,u as H,b as re,r as i,N as ie,B as le,d as L,e as r,f as C,R as ce}from"./vendor-react-Z5zKi_Kz.js";import{E as T,P as B,A as W,a as $,b as de,D as me}from"./pages-content-xbqUuWIu.js";import{M as q,D as ue}from"./pages-miembro-D6C71RQz.js";import"./vendor-charts-Ds92Sbdx.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const h of t.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function u(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(n){if(n.ep)return;n.ep=!0;const t=u(n);fetch(n.href,t)}})();var O={},U=ne;O.createRoot=U.createRoot,O.hydrateRoot=U.hydrateRoot;const pe=[{to:"/miembro/",label:"Panel",icono:"üè†",seccion:"panel"},{to:"/miembro/eventos",label:"Eventos",icono:"üìÖ",seccion:"eventos"},{to:"/miembro/programa",label:"Programa",icono:"üìñ",seccion:"programa"},{to:"/miembro/anuncios",label:"Anuncios",icono:"üì¢",seccion:"anuncios",badge:!0},{to:"/miembro/perfil",label:"Mi Perfil",icono:"üë§",seccion:"panel"},{to:"/miembro/pastora",label:"Info Pastoral",icono:"‚úùÔ∏è",seccion:"pastora"}],he=[{to:"/",label:"Panel",icono:"üè†",seccion:"panel"},{to:"/miembros",label:"Miembros",icono:"üë•",seccion:"miembros"},{to:"/tesoreria",label:"Tesorer√≠a",icono:"üí∞",seccion:"tesoreria"},{to:"/finanzas",label:"Finanzas",icono:"üìä",seccion:"finanzas"},{to:"/reportes",label:"Reportes",icono:"üìã",seccion:"reportes"},{to:"/inventario",label:"Inventario",icono:"üì¶",seccion:"inventario"},{to:"/eventos",label:"Eventos",icono:"üìÖ",seccion:"eventos"},{to:"/asistencia",label:"Asistencia",icono:"‚úÖ",seccion:"asistencia"},{to:"/pastora",label:"Pastora",icono:"‚úùÔ∏è",seccion:"pastora"},{to:"/programa",label:"Programa",icono:"üìñ",seccion:"programa"},{to:"/anuncios",label:"Anuncios",icono:"üì¢",seccion:"anuncios",badge:!0},{to:"/documentos",label:"Documentos",icono:"üìÑ",seccion:"documentos"},{to:"/respaldo",label:"Respaldo",icono:"üíæ",seccion:"respaldo"},{to:"/configuracion",label:"Configuraci√≥n",icono:"‚öôÔ∏è",seccion:"configuracion"}],J="anuncios_visto_en";function F({children:o}){var S,E,R;const{user:a,logout:u}=M(),{puede:c}=Y(),n=H(),t=re(),[h,j]=i.useState(!1),[N,d]=i.useState(!1),f=["admin","pastor","pastora","secretaria","secretario","copastor","copastora","tesorero","tesorera","diacono","maestra"],w=((S=a==null?void 0:a.rol)==null?void 0:S.toLowerCase())||"",v=(a==null?void 0:a.tipo)==="miembro"&&!f.includes(w),m=v?pe:he.filter(({seccion:y})=>c(y)),x=t.pathname.includes("anuncios");i.useEffect(()=>{x&&(localStorage.setItem(J,new Date().toISOString()),d(!1))},[x]),i.useEffect(()=>{x||K().then(y=>{const k=y.data||[];if(k.length===0)return;const A=localStorage.getItem(J);if(!A){d(!0);return}const z=k.reduce((s,l)=>{const _=new Date(l.created_at||l.fecha||0);return _>s?_:s},new Date(0));d(z>new Date(A))}).catch(()=>{})},[]);const b=()=>{u(),n("/login")},p=()=>j(!1);return e.jsxs("div",{className:"layout",children:[e.jsx("div",{className:`sidebar-overlay ${h?"open":""}`,onClick:p}),e.jsxs("aside",{className:`sidebar ${h?"open":""}`,children:[e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:42,height:42,borderRadius:"50%",objectFit:"cover",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("div",{className:"logo-name",style:{fontSize:12,lineHeight:1.3},children:"Ministerio San Juan 7:38"}),e.jsx("div",{className:"logo-sub",style:{fontSize:10},children:"Del Semillero 1/11"}),e.jsx("div",{className:"logo-sub",children:v?"Portal del miembro":"Panel de gesti√≥n"})]})]}),e.jsx("nav",{className:"sidebar-nav",children:m.map(({to:y,label:k,icono:A,badge:z})=>e.jsxs(ie,{to:y,end:y==="/"||y==="/miembro/",className:({isActive:s})=>`nav-item ${s?"active":""}`,onClick:p,children:[e.jsx("span",{className:"nav-icon",children:A}),e.jsx("span",{style:{flex:1},children:k}),z&&N&&e.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"#e74c3c",flexShrink:0,boxShadow:"0 0 6px rgba(231,76,60,0.8)"}})]},y))}),e.jsxs("div",{className:"sidebar-footer",children:[e.jsxs("div",{className:"user-card",children:[e.jsx("div",{className:"user-avatar",children:(R=(E=a==null?void 0:a.nombre)==null?void 0:E[0])==null?void 0:R.toUpperCase()}),e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-name",children:a==null?void 0:a.nombre}),e.jsx("div",{className:"user-role",children:a==null?void 0:a.rol})]})]}),e.jsx("button",{className:"logout-btn",onClick:b,title:"Cerrar sesi√≥n",children:"‚èª"})]})]}),e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"mobile-topbar",children:[e.jsx("button",{className:"menu-toggle",onClick:()=>j(!h),children:"‚ò∞"}),e.jsxs("div",{className:"mobile-topbar-logo",children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:32,height:32,borderRadius:"50%",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsx("div",{className:"mobile-topbar-title",children:"Ministerio San Juan 7:38"}),e.jsx("div",{className:"mobile-topbar-sub",children:"Del Semillero 1/11"})]})]})]}),e.jsx("div",{className:"content-inner",children:o})]})]})}function xe({onDone:o}){const[a,u]=i.useState(!0);return i.useEffect(()=>{const c=setTimeout(()=>{u(!1)},1800),n=setTimeout(()=>{o()},2200);return()=>{clearTimeout(c),clearTimeout(n)}},[]),e.jsxs("div",{style:{position:"fixed",inset:0,background:"#0f1117",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,opacity:a?1:0,transition:"opacity 0.4s ease",pointerEvents:a?"all":"none"},children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",marginBottom:20,boxShadow:"0 0 30px rgba(184,134,11,0.4)"}}),e.jsx("div",{style:{fontFamily:"Playfair Display, serif",fontSize:18,fontWeight:700,color:"#fff",marginBottom:6},children:"Ministerio San Juan 7:38"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginBottom:30},children:"Del Semillero 1/11"}),e.jsx("div",{style:{width:40,height:3,background:"#b8860b",borderRadius:2}})]})}function je(){const[o,a]=i.useState([]),[u,c]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{const{data:t}=await V({limit:500}),h=new Date,j=h.getDate(),N=h.getMonth()+1,d=t.filter(f=>{if(!f.fecha_nacimiento)return!1;const w=new Date(f.fecha_nacimiento);return w.getDate()===j&&w.getMonth()+1===N});d.length>0&&(a(d),c(!0))}catch{}})()},[]),u?e.jsxs("div",{style:{position:"fixed",bottom:24,right:24,background:"var(--surface)",border:"1px solid var(--gold)",borderRadius:16,padding:"18px 20px",maxWidth:320,zIndex:999,boxShadow:"0 8px 32px rgba(0,0,0,0.4)",animation:"slideIn 0.4s ease"},children:[e.jsx("style",{children:"@keyframes slideIn { from { transform: translateY(20px); opacity:0 } to { transform: translateY(0); opacity:1 } }"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:24},children:"üéÇ"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:14,color:"var(--gold)"},children:"Cumpleanos hoy!"}),e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:o.length===1?"1 miembro cumple anos":`${o.length} miembros cumplen anos`})]})]}),e.jsx("button",{onClick:()=>c(!1),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",fontSize:16,padding:4},children:"X"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.map(n=>{const t=new Date().getFullYear()-new Date(n.fecha_nacimiento).getFullYear();return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,background:"var(--bg-card)",borderRadius:10,padding:"8px 12px"},children:[n.foto?e.jsx("img",{src:n.foto,style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid var(--gold)"}}):e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"var(--gold-dim)",border:"2px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:"üéâ"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:13},children:[n.nombres," ",n.apellidos]}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["Hoy cumple ",t," anos!"]})]})]},n.id)})})]}):null}function ge(){const{login:o,loginMiembro:a}=M(),u=H(),[c,n]=i.useState("admin"),[t,h]=i.useState({email:"",password:"",cedula:"",nombres:"",apellidos:"",fecha_nacimiento:""}),[j,N]=i.useState(!1),[d,f]=i.useState(""),[w,v]=i.useState(!1),m=b=>h({...t,[b.target.name]:b.target.value}),x=async b=>{var p,S;b.preventDefault(),f(""),v(!0);try{c==="admin"?(await o(t.email,t.password),u("/")):(await a(j?{nombres:t.nombres,apellidos:t.apellidos,fecha_nacimiento:t.fecha_nacimiento}:{cedula:t.cedula}),u("/mi-perfil"))}catch(E){f(((S=(p=E.response)==null?void 0:p.data)==null?void 0:S.detail)||"No se encontraron datos con esa informaci√≥n")}finally{v(!1)}};return e.jsxs("div",{className:"login-bg",children:[e.jsx("div",{className:"deco-cross cross-1",children:"‚úõ"}),e.jsx("div",{className:"deco-cross cross-2",children:"‚úõ"}),e.jsx("div",{className:"deco-cross cross-3",children:"‚úõ"}),e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:90,height:90,borderRadius:"50%",objectFit:"cover"}})}),e.jsx("h1",{className:"login-title",children:"Ministerio San Juan 7:38"}),e.jsx("p",{className:"login-sub",children:"Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",background:"var(--surface-2)",borderRadius:10,padding:4,marginBottom:20,gap:4},children:[e.jsx("button",{type:"button",onClick:()=>n("admin"),style:{flex:1,padding:"8px 0",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:13,background:c==="admin"?"var(--gold)":"transparent",color:c==="admin"?"#000":"var(--text-muted)",transition:"all .2s"},children:"üëë Administraci√≥n"}),e.jsx("button",{type:"button",onClick:()=>n("miembro"),style:{flex:1,padding:"8px 0",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:13,background:c==="miembro"?"var(--gold)":"transparent",color:c==="miembro"?"#000":"var(--text-muted)",transition:"all .2s"},children:"üôè Soy miembro"})]}),d&&e.jsx("div",{className:"alert alert-error",children:d}),e.jsxs("form",{onSubmit:x,className:"login-form",children:[c==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo electr√≥nico"}),e.jsx("input",{name:"email",type:"email",className:"form-input",placeholder:"admin@iglesia.com",value:t.email,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contrase√±a"}),e.jsx("input",{name:"password",type:"password",className:"form-input",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:t.password,onChange:m,required:!0})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:16},children:[e.jsx("button",{type:"button",onClick:()=>N(!1),style:{padding:"6px 16px",borderRadius:20,border:"1px solid var(--border)",cursor:"pointer",fontWeight:600,fontSize:12,background:j?"transparent":"var(--surface-2)",color:j?"var(--text-muted)":"var(--gold)"},children:"Adulto"}),e.jsx("button",{type:"button",onClick:()=>N(!0),style:{padding:"6px 16px",borderRadius:20,border:"1px solid var(--border)",cursor:"pointer",fontWeight:600,fontSize:12,background:j?"var(--surface-2)":"transparent",color:j?"var(--gold)":"var(--text-muted)"},children:"Menor de edad"})]}),j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombres"}),e.jsx("input",{name:"nombres",type:"text",className:"form-input",placeholder:"Nombres completos",value:t.nombres,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Apellidos"}),e.jsx("input",{name:"apellidos",type:"text",className:"form-input",placeholder:"Apellidos completos",value:t.apellidos,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de nacimiento"}),e.jsx("input",{name:"fecha_nacimiento",type:"date",className:"form-input",value:t.fecha_nacimiento,onChange:m,required:!0})]})]}):e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"N√∫mero de c√©dula"}),e.jsx("input",{name:"cedula",type:"text",className:"form-input",placeholder:"000-0000000-0",value:t.cedula,onChange:m,required:!0})]})]}),e.jsx("button",{type:"submit",className:"btn btn-gold login-btn",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner",style:{width:16,height:16}})," Buscando..."]}):c==="admin"?"Iniciar sesi√≥n":"Entrar"})]}),e.jsx("div",{className:"login-divider",children:e.jsx("span",{children:"Sistema de Gesti√≥n Integral"})}),e.jsxs("div",{style:{textAlign:"center",marginTop:16,padding:"0 8px"},children:[e.jsx("p",{style:{fontStyle:"italic",fontSize:13,color:"var(--text-muted)",lineHeight:1.7},children:'"El que cree en m√≠, como dice la Escritura, de su interior correr√°n r√≠os de agua viva."'}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"‚Äî Juan 7:38"})]})]})]})}function I(o){const a=document.createElement("div");a.style.cssText="position:fixed;top:20px;right:20px;z-index:99999;background:#27ae60;color:white;padding:14px 20px;border-radius:8px;font-size:14px;font-weight:500;box-shadow:0 4px 12px rgba(0,0,0,0.3);max-width:320px;",a.textContent=o,document.body.appendChild(a),setTimeout(()=>a.remove(),3e3)}function be(){const[o,a]=i.useState(null),u=s=>a({mensaje:s,tipo:"error"}),{user:c}=M(),[n,t]=i.useState([]),[h,j]=i.useState(!0),[N,d]=i.useState(null),[f,w]=i.useState(null),[v,m]=i.useState(""),[x,b]=i.useState({nombre:"",email:"",password:"",rol:"admin"}),[p,S]=i.useState({password_actual:"",password_nuevo:"",confirmar:""}),E=["admin","secretaria","secretario","pastor","pastora","copastor","copastora","tesorero","tesorera"],R=async()=>{try{const{data:s}=await P.get("/auth/usuarios");t(s)}catch{u("Ocurrio un error inesperado. Intenta de nuevo.")}j(!1)};i.useEffect(()=>{R()},[]);const y=async()=>{var s,l;if(m(""),!x.nombre||!x.email||!x.password){m("Todos los campos son obligatorios");return}try{await P.post("/auth/usuarios",x),d(null),b({nombre:"",email:"",password:"",rol:"admin"}),R(),I("Usuario creado exitosamente")}catch(_){m(((l=(s=_.response)==null?void 0:s.data)==null?void 0:l.detail)||"Error al crear usuario")}},k=async()=>{var s,l;if(m(""),!p.password_nuevo||!p.confirmar){m("Completa todos los campos");return}if(p.password_nuevo!==p.confirmar){m("Las contrase√±as no coinciden");return}if(p.password_nuevo.length<6){m("La contrase√±a debe tener al menos 6 caracteres");return}try{await P.put(`/auth/usuarios/${f.id}/password`,{password_actual:p.password_actual,password_nuevo:p.password_nuevo}),d(null),S({password_actual:"",password_nuevo:"",confirmar:""}),I("Contrase√±a actualizada exitosamente")}catch(_){m(((l=(s=_.response)==null?void 0:s.data)==null?void 0:l.detail)||"Error al cambiar contrase√±a")}},A=async s=>{try{await P.put(`/auth/usuarios/${s.id}/activo`,{activo:!s.activo}),R(),I(s.activo?"Usuario desactivado":"Usuario activado")}catch{u("Ocurrio un error inesperado. Intenta de nuevo.")}},z=async s=>{if(window.confirm(`¬øEliminar al usuario ${s.nombre}? Esta accion no se puede deshacer.`))try{await P.delete(`/auth/usuarios/${s.id}`),R(),I("Usuario eliminado")}catch{u("Ocurrio un error inesperado. Intenta de nuevo.")}};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Configuracion"}),e.jsx("p",{className:"page-subtitle",children:"Gestion de usuarios del sistema"})]}),e.jsx("button",{className:"btn btn-gold",onClick:()=>{m(""),d("nuevo")},children:"+ Nuevo usuario"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{style:{fontFamily:"var(--font-heading)",fontSize:17,fontWeight:600,marginBottom:16},children:"Usuarios del sistema"}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})})}):n.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500},children:s.nombre}),e.jsx("td",{style:{color:"var(--text-muted)",fontSize:13},children:s.email}),e.jsx("td",{children:e.jsx("span",{style:{background:"var(--gold)",color:"#000",padding:"2px 10px",borderRadius:20,fontSize:12,fontWeight:600},children:s.rol})}),e.jsx("td",{children:e.jsx("span",{style:{color:s.activo?"var(--green)":"var(--red)",fontWeight:600,fontSize:13},children:s.activo?"Activo":"Inactivo"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-sm",onClick:()=>{w(s),m(""),d("password")},children:"Contrase√±a"}),e.jsx("button",{className:`btn btn-sm ${s.activo?"btn-danger":"btn-gold"}`,onClick:()=>A(s),children:s.activo?"Desactivar":"Activar"}),s.email!==(c==null?void 0:c.email)&&e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>z(s),children:"Eliminar"})]})})]},s.id))})]})})]}),N==="nuevo"&&e.jsx("div",{className:"modal-overlay",onClick:()=>d(null),children:e.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Nuevo usuario"}),e.jsx("button",{className:"modal-close",onClick:()=>d(null),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[v&&e.jsx("div",{className:"alert alert-error",children:v}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre completo"}),e.jsx("input",{className:"input",value:x.nombre,onChange:s=>b(l=>({...l,nombre:s.target.value})),placeholder:"Nombre"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{className:"input",type:"email",value:x.email,onChange:s=>b(l=>({...l,email:s.target.value})),placeholder:"email@iglesia.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contrase√±a"}),e.jsx("input",{className:"input",type:"password",value:x.password,onChange:s=>b(l=>({...l,password:s.target.value})),placeholder:"Minimo 6 caracteres"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rol"}),e.jsx("select",{className:"input",value:x.rol,onChange:s=>b(l=>({...l,rol:s.target.value})),children:E.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:y,children:"Crear usuario"})]})]})}),N==="password"&&f&&e.jsx("div",{className:"modal-overlay",onClick:()=>d(null),children:e.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Cambiar contrase√±a ‚Äî ",f.nombre]}),e.jsx("button",{className:"modal-close",onClick:()=>d(null),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[v&&e.jsx("div",{className:"alert alert-error",children:v}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nueva contrase√±a"}),e.jsx("input",{className:"input",type:"password",value:p.password_nuevo,onChange:s=>S(l=>({...l,password_nuevo:s.target.value})),placeholder:"Minimo 6 caracteres"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirmar contrase√±a"}),e.jsx("input",{className:"input",type:"password",value:p.confirmar,onChange:s=>S(l=>({...l,confirmar:s.target.value})),placeholder:"Repite la contrase√±a"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:()=>d(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:k,children:"Guardar"})]})]})}),o&&e.jsx(G,{mensaje:o.mensaje,tipo:o.tipo,onClose:()=>a(null)})]})}function fe({children:o}){const{user:a}=M();return a?o:e.jsx(C,{to:"/login",replace:!0})}function g({seccion:o,children:a}){const{puede:u}=Y();return u(o)?a:e.jsx(C,{to:"/",replace:!0})}function ve(){const{user:o}=M();return e.jsxs(L,{children:[e.jsx(r,{path:"/login",element:o?e.jsx(C,{to:o.tipo==="miembro"?"/miembro/":"/",replace:!0}):e.jsx(ge,{})}),e.jsx(r,{path:"/mi-perfil",element:(o==null?void 0:o.tipo)==="miembro"?e.jsx(D,{children:e.jsx(F,{children:e.jsx(q,{})})}):e.jsx(C,{to:"/login",replace:!0})}),e.jsx(r,{path:"/miembro/*",element:(o==null?void 0:o.tipo)==="miembro"?e.jsx(D,{children:e.jsx(F,{children:e.jsxs(L,{children:[e.jsx(r,{path:"/",element:e.jsx(ue,{})}),e.jsx(r,{path:"/eventos",element:e.jsx(T,{})}),e.jsx(r,{path:"/programa",element:e.jsx(B,{})}),e.jsx(r,{path:"/anuncios",element:e.jsx(W,{})}),e.jsx(r,{path:"/pastora",element:e.jsx($,{})}),e.jsx(r,{path:"/perfil",element:e.jsx(q,{})}),e.jsx(r,{path:"*",element:e.jsx(C,{to:"/miembro/",replace:!0})})]})})}):e.jsx(C,{to:"/login",replace:!0})}),e.jsx(r,{path:"/*",element:e.jsx(fe,{children:e.jsx(D,{children:e.jsx(F,{children:e.jsxs(L,{children:[e.jsx(r,{path:"/",element:(o==null?void 0:o.tipo)==="miembro"?e.jsx(C,{to:"/miembro/",replace:!0}):e.jsx(Q,{})}),e.jsx(r,{path:"/miembros",element:e.jsx(g,{seccion:"miembros",children:e.jsx(Z,{})})}),e.jsx(r,{path:"/tesoreria",element:e.jsx(g,{seccion:"tesoreria",children:e.jsx(ee,{})})}),e.jsx(r,{path:"/inventario",element:e.jsx(g,{seccion:"inventario",children:e.jsx(se,{})})}),e.jsx(r,{path:"/eventos",element:e.jsx(g,{seccion:"eventos",children:e.jsx(T,{})})}),e.jsx(r,{path:"/pastora",element:e.jsx(g,{seccion:"pastora",children:e.jsx($,{})})}),e.jsx(r,{path:"/programa",element:e.jsx(g,{seccion:"programa",children:e.jsx(B,{})})}),e.jsx(r,{path:"/anuncios",element:e.jsx(g,{seccion:"anuncios",children:e.jsx(W,{})})}),e.jsx(r,{path:"/asistencia",element:e.jsx(g,{seccion:"asistencia",children:e.jsx(de,{})})}),e.jsx(r,{path:"/reportes",element:e.jsx(g,{seccion:"reportes",children:e.jsx(ae,{})})}),e.jsx(r,{path:"/respaldo",element:e.jsx(g,{seccion:"respaldo",children:e.jsx(oe,{})})}),e.jsx(r,{path:"/finanzas",element:e.jsx(g,{seccion:"finanzas",children:e.jsx(te,{})})}),e.jsx(r,{path:"/documentos",element:e.jsx(g,{seccion:"documentos",children:e.jsx(me,{})})}),e.jsx(r,{path:"/configuracion",element:e.jsx(g,{seccion:"configuracion",children:e.jsx(be,{})})}),e.jsx(r,{path:"*",element:e.jsx(C,{to:"/",replace:!0})})]})})})})})]})}function ye(){const[o,a]=i.useState(!0);return e.jsx(X,{children:e.jsxs(le,{children:[o&&e.jsx(xe,{onDone:()=>a(!1)}),e.jsx(ve,{}),e.jsx(je,{})]})})}const Ne="https://iglesia-api-g1ux.onrender.com",we=()=>{const o=()=>{fetch(`${Ne}/health`).catch(()=>{})};o(),setInterval(o,10*60*1e3)};we();O.createRoot(document.getElementById("root")).render(e.jsx(ce.StrictMode,{children:e.jsx(ye,{})}));
