import{u as se,j as e,D as H,T as M,g as ge,a as ne,c as ue,r as xe,d as fe,b as ve,s as je,e as me,f as q,h as be,i as ye,k as Se,l as Ne,m as Ce,n as _e}from"./pages-admin-BZcYvCNE.js";import{r as l}from"./vendor-react-Z5zKi_Kz.js";const ze={culto:"badge-gold",retiro:"badge-blue",conferencia:"badge-blue",boda:"badge-green",bautismo:"badge-gold",celula:"badge-amber",otro:"badge-green"},oe={culto:"â›ª",retiro:"ðŸ•ï¸",conferencia:"ðŸŽ¤",boda:"ðŸ’",bautismo:"ðŸ’§",celula:"ðŸ‘¥",otro:"ðŸ“…"},Y={culto:"Culto",retiro:"Retiro",conferencia:"Conferencia",boda:"Boda",bautismo:"Bautismo",celula:"CÃ©lula",otro:"Otro"};function we({title:x,onClose:h,children:C}){return e.jsx("div",{className:"modal-overlay",onClick:s=>s.target===s.currentTarget&&h(),children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:x}),e.jsx("button",{className:"modal-close",onClick:h,children:"Ã—"})]}),C]})})}function Me(){var _;const[x,h]=l.useState(null),[C,s]=l.useState(null),S=o=>s({mensaje:o,tipo:"error"}),{puedeEditar:p}=se(),i=p("eventos"),[d,f]=l.useState([]),[g,m]=l.useState(!0),[v,w]=l.useState(null),[j,E]=l.useState(null),[N,z]=l.useState(null),[b,T]=l.useState({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""}),[B,P]=l.useState({nombre_visita:"",telefono_visita:""}),[F,I]=l.useState(!1),[k,A]=l.useState(""),r=async()=>{m(!0);try{const{data:o}=await ge();f(o)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}m(!1)};l.useEffect(()=>{r()},[]);const R=async o=>{E(o),z(null);try{const{data:t}=await ne(o.id);z(t)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}},L=async o=>{var t,n;o.preventDefault(),I(!0),A("");try{if(!b.fecha_inicio){A("La fecha es requerida"),I(!1);return}const a=new Date(b.fecha_inicio);if(isNaN(a.getTime())){A("Fecha invÃ¡lida"),I(!1);return}const u={nombre:b.nombre,tipo:b.tipo||null,descripcion:b.descripcion||null,lugar:b.lugar||null,fecha_inicio:a.toISOString(),fecha_fin:b.fecha_fin?new Date(b.fecha_fin).toISOString():null};await ue(u),r(),w(null),T({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""})}catch(a){const u=(n=(t=a.response)==null?void 0:t.data)==null?void 0:n.detail;Array.isArray(u)?A(u.map(y=>y.msg||JSON.stringify(y)).join(", ")):A(typeof u=="string"?u:"Error al crear evento")}I(!1)},c=async o=>{o.preventDefault(),I(!0);try{await xe(j.id,{nombre_visita:B.nombre_visita,telefono_visita:B.telefono_visita,presente:!0});const{data:t}=await ne(j.id);z(t),P({nombre_visita:"",telefono_visita:""})}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}I(!1)},D=async()=>{if(x)try{await fe(x),h(null),r()}catch{S("No se pudo eliminar.")}};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Eventos"}),e.jsxs("p",{className:"page-subtitle",children:[d.length," eventos registrados"]})]}),i&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{A(""),w("nuevo")},children:"+ Nuevo evento"})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:24,flexWrap:"wrap"},children:["culto","retiro","boda","bautismo","conferencia","celula"].map(o=>{const t=d.filter(n=>n.tipo===o).length;return t===0?null:e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:10,padding:"10px 16px",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:oe[o]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:t}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:[Y[o],"s"]})]})]},o)})}),g?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner",style:{width:28,height:28}})}):e.jsx("div",{className:"grid-3",children:d.map(o=>e.jsxs("div",{className:"card",style:{position:"relative",cursor:"default"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:12},children:[e.jsx("span",{style:{fontSize:26},children:oe[o.tipo]||"ðŸ“…"}),e.jsx("span",{className:`badge ${ze[o.tipo]||"badge-green"}`,children:Y[o.tipo]||o.tipo})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:6},children:o.nombre}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:4},children:["ðŸ“… ",new Date(o.fecha_inicio).toLocaleDateString("es-DO",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),o.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:12},children:["ðŸ“ ",o.lugar]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:14,borderTop:"1px solid var(--border)",paddingTop:12},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1,justifyContent:"center",fontSize:12,padding:"6px"},onClick:()=>R(o),children:"Ver asistencia"}),i&&e.jsx("button",{className:"btn btn-danger",style:{padding:"6px 10px",fontSize:12},onClick:()=>h(o.id),children:"âœ•"})]})]},o.id))}),v==="nuevo"&&e.jsxs(we,{title:"Nuevo evento",onClose:()=>w(null),children:[k&&e.jsx("div",{className:"alert alert-error",children:k}),e.jsxs("form",{onSubmit:L,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del evento *"}),e.jsx("input",{value:b.nombre,onChange:o=>T({...b,nombre:o.target.value}),className:"form-input",required:!0})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsx("select",{value:b.tipo,onChange:o=>T({...b,tipo:o.target.value}),className:"form-input",children:["culto","retiro","conferencia","boda","bautismo","celula","otro"].map(o=>e.jsx("option",{value:o,children:Y[o]},o))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha y hora *"}),e.jsx(H,{name:"fecha_inicio",value:b.fecha_inicio,onChange:o=>T({...b,fecha_inicio:o.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:b.lugar,onChange:o=>T({...b,lugar:o.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DescripciÃ³n"}),e.jsx("textarea",{value:b.descripcion,onChange:o=>T({...b,descripcion:o.target.value}),className:"form-input",rows:2,style:{resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>w(null),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:F,children:F?"Guardando...":"Crear evento"})]})]})]}),j&&e.jsx("div",{className:"modal-overlay",onClick:o=>o.target===o.currentTarget&&E(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:550},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["Asistencia â€“ ",j.nombre]}),e.jsx("button",{className:"modal-close",onClick:()=>E(null),children:"Ã—"})]}),N&&e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsxs("div",{style:{background:"var(--green-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--green)"},children:N.presentes}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Presentes"})]}),e.jsxs("div",{style:{background:"var(--blue-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--blue)"},children:N.total_registros}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Total"})]})]}),e.jsxs("form",{onSubmit:c,style:{display:"flex",gap:10,marginBottom:18},children:[e.jsx("input",{placeholder:"Nombre de visita",value:B.nombre_visita,onChange:o=>P({...B,nombre_visita:o.target.value}),className:"form-input",style:{flex:2},required:!0}),e.jsx("input",{placeholder:"Tel\\u00e9fono",value:B.telefono_visita,onChange:o=>P({...B,telefono_visita:o.target.value}),className:"form-input",style:{flex:1}}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:F,style:{whiteSpace:"nowrap"},children:"+ Agregar"})]}),N?((_=N.registros)==null?void 0:_.length)===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"var(--text-muted)",fontSize:13},children:"Sin registros aÃºn"}):e.jsx("div",{style:{maxHeight:250,overflowY:"auto"},children:N.registros.map((o,t)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{fontWeight:500,fontSize:13},children:o.nombre_visita||"Miembro registrado"}),e.jsx("span",{className:`badge ${o.presente?"badge-green":"badge-red"}`,children:o.presente?"Presente":"Ausente"})]},t))}):e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("span",{className:"spinner"})})]})}),C&&e.jsx(M,{mensaje:C.mensaje,tipo:C.tipo,onClose:()=>s(null)}),x&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar evento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:D,children:"SÃ­, eliminar"})]})]})})]})}const K={nombre:"",cargo:"",telefono:"",email:"",direccion:"",biografia:"",versiculo:"",anios_ministerio:"",especialidad:"",foto_url:""};function Ve(){const[x,h]=l.useState(null),C=z=>h({mensaje:z,tipo:"error"}),[s,S]=l.useState(K),[p,i]=l.useState(!1),[d,f]=l.useState(K),[g,m]=l.useState(!1),[v,w]=l.useState(!0);l.useEffect(()=>{ve().then(z=>{const b=z.data||K;S(b),f(b)}).catch(()=>{}).finally(()=>w(!1))},[]);const j=z=>f({...d,[z.target.name]:z.target.value}),E=async z=>{z.preventDefault();try{await je(d),S(d),i(!1),m(!0),setTimeout(()=>m(!1),3e3)}catch{C("Ocurrio un error inesperado. Intenta de nuevo.")}},N=(z,b)=>b?e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:2},children:z}),e.jsx("div",{style:{fontWeight:500},children:b})]}):null;return v?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner"})}):e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Perfil de la Pastora"}),e.jsx("p",{className:"page-subtitle",children:"InformaciÃ³n pastoral y ministerial"})]}),!p&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{f(s),i(!0)},children:"âœï¸ Editar perfil"})]}),g&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"âœ… Perfil guardado correctamente"}),p?e.jsx("div",{className:"card",style:{maxWidth:660},children:e.jsxs("form",{onSubmit:E,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:4},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n Personal"})}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre completo *"}),e.jsx("input",{name:"nombre",value:d.nombre,onChange:j,className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cargo / TÃ­tulo"}),e.jsx("input",{name:"cargo",value:d.cargo,onChange:j,className:"form-input",placeholder:"Ej: Pastora Principal"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TelÃ©fono"}),e.jsx("input",{name:"telefono",value:d.telefono,onChange:j,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo"}),e.jsx("input",{name:"email",type:"email",value:d.email,onChange:j,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"AÃ±os en el ministerio"}),e.jsx("input",{name:"anios_ministerio",value:d.anios_ministerio,onChange:j,className:"form-input",placeholder:"Ej: 15"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"URL de foto (opcional)"}),e.jsx("input",{name:"foto_url",value:d.foto_url,onChange:j,className:"form-input",placeholder:"https://..."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DirecciÃ³n"}),e.jsx("input",{name:"direccion",value:d.direccion,onChange:j,className:"form-input"})]}),e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,margin:"8px 0 4px"},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Especialidad ministerial"}),e.jsx("input",{name:"especialidad",value:d.especialidad,onChange:j,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"BiografÃ­a"}),e.jsx("textarea",{name:"biografia",value:d.biografia,onChange:j,className:"form-input",rows:4,style:{resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VersÃ­culo favorito"}),e.jsx("input",{name:"versiculo",value:d.versiculo,onChange:j,className:"form-input",placeholder:"Ej: Juan 7:38"})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:6},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>i(!1),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",children:"ðŸ’¾ Guardar perfil"})]})]})}):e.jsxs("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[e.jsxs("div",{className:"card",style:{flex:"0 0 260px",textAlign:"center",padding:32},children:[s.foto_url?e.jsx("img",{src:s.foto_url,alt:"Foto pastora",style:{width:140,height:140,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)",marginBottom:16}}):e.jsx("div",{style:{width:140,height:140,borderRadius:"50%",background:"var(--bg-card)",border:"3px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,margin:"0 auto 16px"},children:"ðŸ‘©â€ðŸ’¼"}),e.jsx("h2",{style:{fontFamily:"var(--font-heading)",fontSize:20,fontWeight:700,marginBottom:4},children:s.nombre||"Sin nombre"}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,marginBottom:8},children:s.cargo||"Pastora"}),s.anios_ministerio&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:13},children:[s.anios_ministerio," aÃ±os en el ministerio"]})]}),e.jsxs("div",{style:{flex:1,minWidth:280,display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n de contacto"})}),N("TelÃ©fono",s.telefono),N("Correo",s.email),N("DirecciÃ³n",s.direccion),!s.telefono&&!s.email&&!s.direccion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n de contacto"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),N("Especialidad",s.especialidad),N("BiografÃ­a",s.biografia),!s.especialidad&&!s.biografia&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n ministerial"})]}),s.versiculo&&e.jsxs("div",{className:"card",style:{borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:15,color:"var(--text)",marginBottom:6},children:['"',s.versiculo,'"']}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"â€” VersÃ­culo favorito"})]})]})]}),x&&e.jsx(M,{mensaje:x.mensaje,tipo:x.tipo,onClose:()=>h(null)})]})}const De="modulepreload",Ee=function(x){return"/"+x},ie={},ke=function(h,C,s){let S=Promise.resolve();if(C&&C.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),d=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));S=Promise.allSettled(C.map(f=>{if(f=Ee(f),f in ie)return;ie[f]=!0;const g=f.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":De,g||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),g)return new Promise((w,j)=>{v.addEventListener("load",w),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function p(i){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=i,window.dispatchEvent(d),!d.defaultPrevented)throw i}return S.then(i=>{for(const d of i||[])d.status==="rejected"&&p(d.reason);return h().catch(p)})},Q=["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"],Ae=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Visita a enfermos","Celula","Retiro congregacional","Culto unido"],pe={"Culto de avivamiento":"ðŸ”¥","Estudio bÃ­blico":"ðŸ“–","Escuela de niÃ±os":"ðŸ‘§","Visita a enfermos":"ðŸ¥",Celula:"ðŸ ","Retiro congregacional":"â›º","Culto unido":"ðŸ¤","":"ðŸ“…"},G={"Culto de avivamiento":["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],Celula:["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],"Estudio bÃ­blico":["Oracion de apertura","Encargado del estudio"],"Escuela de niÃ±os":["Encargado"],"Visita a enfermos":[],"Retiro congregacional":[],"Culto unido":[]},re=[{texto:"No dejando de congregarnos, como algunos tienen por costumbre, sino exhortÃ¡ndonos.",ref:"Hebreos 10:25"},{texto:"Porque donde estÃ¡n dos o tres congregados en mi nombre, alli estoy yo en medio de ellos.",ref:"Mateo 18:20"},{texto:"Yo me alegre con los que me decÃ­an: A la casa de Jehova iremos.",ref:"Salmos 122:1"},{texto:"Una cosa he demandado a Jehova; que este yo en la casa de Jehova todos los dias de mi vida.",ref:"Salmos 27:4"},{texto:"Y perseveraban en la doctrina de los apÃ³stoles, en la comuniÃ³n unos con otros, en el partimiento del pan y en las oraciones.",ref:"Hechos 2:42"},{texto:"Engrandezcan a JehovÃ¡ conmigo, y exaltemos su nombre a una.",ref:"Salmos 34:3"},{texto:"Cantad a JehovÃ¡ cÃ¡ntico nuevo; su alabanza sea en la congregaciÃ³n de los santos.",ref:"Salmos 149:1"}],Te=x=>{const h=new Date(x);h.setHours(0,0,0,0),h.setDate(h.getDate()+4-(h.getDay()||7));const C=new Date(h.getFullYear(),0,1);return`${h.getFullYear()}-W${Math.ceil(((h-C)/864e5+1)/7).toString().padStart(2,"0")}`},V=()=>Te(new Date),X=x=>({dia:x,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}),Be=()=>({tipo_asignado:"miembro",miembro_id:"",pastor_externo:"",congregacion_externa:""}),le=x=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel();const h=new SpeechSynthesisUtterance(x);h.lang="es-ES",h.rate=.9,window.speechSynthesis.speak(h)};function Pe({label:x,parte:h,onChange:C,miembros:s}){const S=h||Be(),p=(i,d)=>C({...S,[i]:d});return e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:8,padding:"10px 14px",marginBottom:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:8,color:"var(--gold)"},children:x}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:1},children:[e.jsx("label",{className:"form-label",children:"Asignado a"}),e.jsxs("select",{value:S.tipo_asignado,onChange:i=>p("tipo_asignado",i.target.value),className:"form-input",children:[e.jsx("option",{value:"miembro",children:"Miembro de la iglesia"}),e.jsx("option",{value:"externo",children:"Miembro de otra congregacion"})]})]}),S.tipo_asignado==="miembro"?e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:2},children:[e.jsx("label",{className:"form-label",children:"Miembro"}),e.jsxs("select",{value:S.miembro_id,onChange:i=>p("miembro_id",i.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),s.map(i=>e.jsxs("option",{value:i.id,children:[i.nombres," ",i.apellidos]},i.id))]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Nombre del pastor"}),e.jsx("input",{value:S.pastor_externo,onChange:i=>p("pastor_externo",i.target.value),className:"form-input",placeholder:"Nombre"})]}),e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Congregacion"}),e.jsx("input",{value:S.congregacion_externa,onChange:i=>p("congregacion_externa",i.target.value),className:"form-input",placeholder:"Nombre congregacion"})]})]})]})]})}function Ie({diaData:x,miembros:h,onEscuchar:C}){const s=x,S=G[s.tipo]||[],p=pe[s.tipo]||"ðŸ“…",i=d=>{const f=s.partes[d];if(!f)return"Por asignar";if(f.tipo_asignado==="externo")return`${f.pastor_externo||"Pastor externo"} de ${f.congregacion_externa||"otra congregacion"}`;const g=h.find(m=>m.id===f.miembro_id);return g?`${g.nombres} ${g.apellidos}`:"Por asignar"};return s.tipo?e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,border:"2px solid var(--gold)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:S.length>0?14:0},children:[e.jsx("span",{style:{fontSize:48},children:p}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:22},children:s.dia}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,fontSize:16},children:s.tipo}),s.hora&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Hora: ",s.hora]}),s.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Lugar: ",s.lugar]}),s.pastor_visita&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Pastor: ",s.pastor_visita]})]}),e.jsx("button",{onClick:()=>C(s,i),style:{background:"var(--gold)",border:"none",borderRadius:50,width:56,height:56,fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"ðŸ”Š"})]}),S.length>0&&e.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12},children:S.map(d=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:14},children:d}),e.jsx("span",{style:{fontWeight:600,fontSize:14},children:i(d)})]},d))})]}):e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,display:"flex",alignItems:"center",gap:16,opacity:.5},children:[e.jsx("span",{style:{fontSize:40},children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:18},children:s.dia}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:14},children:"Sin actividad"})]})]})}function We({diaData:x,onChange:h,miembros:C}){const[s,S]=l.useState(!1),p=x,i=(m,v)=>h({...p,[m]:v}),d=G[p.tipo]||[],f=p.tipo==="Retiro congregacional"||p.tipo==="Culto unido",g=pe[p.tipo]||"ðŸ“…";return e.jsxs("div",{className:"card",style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>S(!s),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:g}),e.jsx("div",{style:{background:"var(--gold)",color:"#000",fontWeight:700,fontSize:13,borderRadius:6,padding:"4px 12px",minWidth:90,textAlign:"center"},children:p.dia}),p.tipo?e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:13},children:[p.tipo," ",p.hora?`- ${p.hora}`:""]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin actividad"})]}),e.jsx("span",{style:{color:"var(--text-muted)"},children:s?"cerrar":"abrir"})]}),s&&e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{className:"grid-2",style:{gap:12,marginBottom:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsxs("select",{value:p.tipo,onChange:m=>i("tipo",m.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Sin actividad --"}),Ae.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Hora"}),e.jsx("input",{type:"time",value:p.hora,onChange:m=>i("hora",m.target.value),className:"form-input"})]}),!f&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:p.lugar,onChange:m=>i("lugar",m.target.value),className:"form-input",placeholder:"Ej: Templo principal"})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pastor"}),e.jsx("input",{value:p.pastor_visita,onChange:m=>i("pastor_visita",m.target.value),className:"form-input",placeholder:"Nombre del pastor"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:p.lugar,onChange:m=>i("lugar",m.target.value),className:"form-input",placeholder:"Lugar del evento"})]})]})]}),d.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:10,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1},children:"Partes del programa"}),d.map(m=>e.jsx(Pe,{label:m,parte:p.partes[m],miembros:C,onChange:v=>i("partes",{...p.partes,[m]:v})},m))]}),p.tipo==="Visita a enfermos"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Encargado de la visita"}),e.jsxs("select",{value:p.encargado,onChange:m=>i("encargado",m.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),C.map(m=>e.jsxs("option",{value:m.id,children:[m.nombres," ",m.apellidos]},m.id))]})]})]})]})}function Ge(){const[x,h]=l.useState(null),C=async()=>{if(x&&x==="limpiar"){const n={...N,[j]:Q.map(X)};z(n),h(null);try{await q(j,Q.map(X))}catch{}}},[s,S]=l.useState(null),p=n=>S({mensaje:n,tipo:"error"}),{puedeEditar:i,rol:d}=se(),f=i("programa"),[g,m]=l.useState([]),[v,w]=l.useState(!1),[j,E]=l.useState(V()),[N,z]=l.useState({}),[b,T]=l.useState(!1),[B,P]=l.useState(!1),[F,I]=l.useState(!1),k=re[new Date().getDay()%re.length],A=j===V(),r=N[j]||Q.map(X);l.useEffect(()=>{if(me({limit:200}).then(a=>m(a.data)).catch(()=>{}),["admin","pastor","pastora","secretaria","secretario"].includes(d)){const a=new Date;if(a.getDay()===0&&a.getHours()>=17){const u=V();localStorage.getItem("archivado_"+u)||q(u,["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"].map(y=>({dia:y,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}))).then(()=>{localStorage.setItem("archivado_"+u,"1"),I(!0),setTimeout(()=>I(!1),6e3)}).catch(()=>{})}}be().then(a=>{const u=a.data||[];Promise.all(u.map(y=>ye(y))).then(y=>{const W={};y.forEach(O=>{O.data&&(W[O.data.semana]=O.data.datos)}),z(W)})}).catch(()=>{})},[]);const R=(n,a)=>{[...r],{...N}},L=async()=>{try{await q(j,r),T(!0),setTimeout(()=>T(!1),3e3)}catch{p("Ocurrio un error inesperado. Intenta de nuevo.")}},c=()=>{ke(async()=>{const{jsPDF:n}=await import("./jspdf.es.min-BXXEKGtF.js").then(a=>a.j);return{jsPDF:n}},[]).then(({jsPDF:n})=>{const a=new n;a.setFillColor(8,13,26),a.rect(0,0,210,297,"F"),a.setFontSize(18),a.setTextColor(201,168,76),a.text("Programa Semanal",105,18,{align:"center"}),a.setFontSize(10),a.setTextColor(122,132,153),a.text("Ministerio San Juan 7:38 - Semana: "+j,105,26,{align:"center"}),a.setDrawColor(201,168,76),a.line(14,30,196,30);let u=38;r.forEach(y=>{if(u>270&&(a.addPage(),a.setFillColor(8,13,26),a.rect(0,0,210,297,"F"),u=20),a.setFillColor(14,21,37),a.roundedRect(14,u,182,8,2,2,"F"),a.setFontSize(10),a.setTextColor(201,168,76),a.text((y.dia||"").toUpperCase()+(y.tipo?"  -  "+y.tipo:"  -  Sin actividad"),18,u+5.5),u+=11,y.hora||y.lugar){a.setFontSize(8),a.setTextColor(122,132,153);let O="";y.hora&&(O+="Hora: "+y.hora+"   "),y.lugar&&(O+="Lugar: "+y.lugar),a.text(O.trim(),18,u),u+=5}["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre","Encargado del estudio","Encargado"].forEach(O=>{const $=y.partes&&y.partes[O];if($){let J="Por asignar";if($.tipo_asignado==="externo")J=($.pastor_externo||"")+" de "+($.congregacion_externa||"");else{const U=g.find(he=>String(he.id)===String($.miembro_id));U&&(J=U.nombres+" "+U.apellidos)}a.setFontSize(8),a.setTextColor(122,132,153),a.text(O+":",20,u),a.setTextColor(232,234,242),a.text(J,75,u),u+=5}}),u+=3}),a.setFontSize(7),a.setTextColor(122,132,153),a.text("Generado el "+new Date().toLocaleDateString("es-DO"),105,290,{align:"center"}),a.save("programa-"+j+".pdf")})},D=async()=>h("limpiar"),_=()=>{let n="Programa de la semana. ";r.forEach(a=>{if(!a.tipo){n+=`${a.dia}, sin actividad. `;return}n+=`${a.dia}, ${a.tipo}`,a.hora&&(n+=` a las ${a.hora}`),a.lugar&&(n+=`, en ${a.lugar}`),n+=". ",(G[a.tipo]||[]).forEach(y=>{const W=a.partes[y];if(W){const O=W.tipo_asignado==="externo"?`${W.pastor_externo} de ${W.congregacion_externa}`:g.find($=>$.id===W.miembro_id)?`${g.find($=>$.id===W.miembro_id).nombres} ${g.find($=>$.id===W.miembro_id).apellidos}`:"por asignar";n+=`${y}: ${O}. `}})}),le(n)},o=(n,a)=>{let u=`${n.dia}. ${n.tipo}`;n.hora&&(u+=` a las ${n.hora}`),n.lugar&&(u+=`, en ${n.lugar}`),n.pastor_visita&&(u+=`. Pastor ${n.pastor_visita}`),u+=". ",(G[n.tipo]||[]).forEach(W=>{u+=`${W}: ${a(W)}. `}),le(u)},t=Object.keys(N).sort().reverse();return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Programa Semanal"}),e.jsx("p",{className:"page-subtitle",children:"Ministerio San Juan 7:38 - Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>P(!B),children:B?"Ver actual":"Historial"}),f&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>{var n;w(!v),(n=window.speechSynthesis)==null||n.cancel()},children:v?"Modo admin":"ðŸ”Š Modo facil"}),(v||!f)&&e.jsx("button",{onClick:_,style:{background:"var(--gold)",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:700,fontSize:15,cursor:"pointer"},children:"ðŸ”Š Escuchar todo"}),f&&!v&&A&&e.jsx("button",{className:"btn btn-ghost",onClick:D,children:"Limpiar"}),f&&!v&&A&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>window.print(),children:"Imprimir"}),f&&!v&&e.jsx("button",{className:"btn btn-ghost",onClick:c,children:"â‡© Descargar PDF"}),f&&!v&&A&&e.jsx("button",{className:"btn btn-gold",onClick:L,children:"Guardar"})]})]}),b&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Programa guardado correctamente"}),F&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"âœ“ Programa archivado automÃ¡ticamente."}),v&&e.jsxs("div",{style:{background:"var(--gold)",borderRadius:12,padding:"16px 20px",marginBottom:20,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:32},children:"ðŸ”Š"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#000"},children:"Modo facil activado"}),e.jsx("div",{style:{fontSize:13,color:"#333"},children:"Presiona el boton ðŸ”Š en cada dia para escuchar el programa, o presiona Escuchar todo para oir toda la semana."})]})]}),B?e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:16},children:"Historial de programas"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No hay programas guardados aun."}):t.map(n=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("span",{style:{fontWeight:500},children:["Semana: ",n]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>{E(n),P(!1)},children:"Ver programa"})]},n))]}):e.jsxs(e.Fragment,{children:[!A&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--gold)",borderRadius:8,padding:"10px 16px",marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{color:"var(--gold)",fontWeight:600},children:["Viendo semana anterior: ",j]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>E(V()),children:"Volver a semana actual"})]}),e.jsxs("div",{className:"card",style:{marginBottom:20,borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:14,marginBottom:4},children:['"',k.texto,'"']}),e.jsxs("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:["-- ",k.ref]})]}),v||!f?r.map((n,a)=>e.jsx(Ie,{diaData:n,miembros:g,onEscuchar:o},n.dia)):r.map((n,a)=>e.jsx(We,{diaData:n,index:a,onChange:u=>R(),miembros:g},n.dia))]}),e.jsx("style",{children:`
        @media print {
          .sidebar, .page-header button, .btn { display: none !important; }
          .card { box-shadow: none !important; border: 1px solid #ccc !important; }
          body { background: white !important; color: black !important; }
        }
      `}),s&&e.jsx(M,{mensaje:s.mensaje,tipo:s.tipo,onClose:()=>S(null)}),x&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar elemento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:C,children:"SÃ­, eliminar"})]})]})})]})}const Z={alta:{label:"Urgente",color:"var(--red)"},media:{label:"Normal",color:"var(--gold)"},baja:{label:"Informativo",color:"var(--green)"}},ee=()=>({titulo:"",contenido:"",prioridad:"media",fecha_expira:""});function He(){const[x,h]=l.useState(null),[C,s]=l.useState(null),S=r=>h({mensaje:r,tipo:"error"}),{puedeEditar:p}=se(),i=p("anuncios"),[d,f]=l.useState([]),[g,m]=l.useState(ee()),[v,w]=l.useState(null),[j,E]=l.useState(!1),[N,z]=l.useState(!0),b=r=>m({...g,[r.target.name]:r.target.value}),T=async()=>{try{const{data:r}=await Se();f(r)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}z(!1)};l.useEffect(()=>{T()},[]);const B=async()=>{if(!(!g.titulo||!g.contenido))try{const r={...g,fecha_expira:g.fecha_expira||null};v!==null?await Ne(v,r):await Ce(r),w(null),m(ee()),E(!1),T()}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}},P=async()=>{if(C)try{await _e(C),s(null),T()}catch{S("No se pudo eliminar.")}},F=r=>{m({titulo:r.titulo,contenido:r.contenido,prioridad:r.prioridad,fecha_expira:r.fecha_expira||""}),w(r.id),E(!0)},I=new Date().toISOString().split("T")[0],k=d.filter(r=>!r.fecha_expira||r.fecha_expira>=I),A=d.filter(r=>r.fecha_expira&&r.fecha_expira<I);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Anuncios"}),e.jsxs("p",{className:"page-subtitle",children:[k.length," anuncio",k.length!==1?"s":""," activo",k.length!==1?"s":""]})]}),i&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{m(ee()),w(null),E(!0)},children:"+ Nuevo anuncio"})]}),N&&e.jsx("div",{style:{textAlign:"center",padding:40},children:e.jsx("span",{className:"spinner"})}),!N&&k.length===0&&e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“¢"}),e.jsx("p",{children:"No hay anuncios activos. Crea uno nuevo."})]}),k.map(r=>{var R,L,c;return e.jsx("div",{className:"card",style:{marginBottom:14,borderLeft:`3px solid ${((R=Z[r.prioridad])==null?void 0:R.color)||"var(--gold)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[e.jsx("span",{style:{background:(L=Z[r.prioridad])==null?void 0:L.color,color:"#fff",fontSize:11,fontWeight:700,borderRadius:4,padding:"2px 8px"},children:(c=Z[r.prioridad])==null?void 0:c.label}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:new Date(r.fecha).toLocaleDateString("es-DO")}),r.fecha_expira&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Ã‚Â· Expira: ",new Date(r.fecha_expira).toLocaleDateString("es-DO")]})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:700,marginBottom:6},children:r.titulo}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,lineHeight:1.6,whiteSpace:"pre-wrap"},children:r.contenido})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[i&&e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>F(r),children:"Editar"}),i&&e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>s(r.id),children:"âœ•"})]})]})},r.id)}),A.length>0&&e.jsxs("div",{style:{marginTop:24},children:[e.jsx("h3",{style:{color:"var(--text-muted)",fontSize:13,textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Anuncios expirados"}),A.map(r=>e.jsx("div",{className:"card",style:{marginBottom:10,opacity:.5},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:14},children:r.titulo}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12,marginLeft:10},children:["ExpirÃƒÂ³: ",new Date(r.fecha_expira).toLocaleDateString("es-DO")]})]}),i&&e.jsx("button",{className:"btn btn-danger",style:{padding:"4px 10px",fontSize:12},onClick:()=>s(r.id),children:"âœ•"})]})},r.id))]}),j&&e.jsx("div",{className:"modal-overlay",onClick:r=>r.target===r.currentTarget&&E(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:v!==null?"Editar anuncio":"Nuevo anuncio"}),e.jsx("button",{className:"modal-close",onClick:()=>E(!1),children:"Ãƒâ€”"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Titulo *"}),e.jsx("input",{name:"titulo",value:g.titulo,onChange:b,className:"form-input",placeholder:"Ej: Retiro congregacional este sabado",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contenido *"}),e.jsx("textarea",{name:"contenido",value:g.contenido,onChange:b,className:"form-input",rows:4,style:{resize:"vertical"},placeholder:"Escribe aquÃƒÂ­ el detalle del anuncio..."})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Prioridad"}),e.jsxs("select",{name:"prioridad",value:g.prioridad,onChange:b,className:"form-input",children:[e.jsx("option",{value:"alta",children:"Urgente"}),e.jsx("option",{value:"media",children:"Normal"}),e.jsx("option",{value:"baja",children:"Informativo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de expiraciÃƒÂ³n"}),e.jsx(H,{name:"fecha_expira",value:g.fecha_expira,onChange:b})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:4},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>E(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:B,children:v!==null?"Actualizar":"Publicar anuncio"})]})]})]})}),x&&e.jsx(M,{mensaje:x.mensaje,tipo:x.tipo,onClose:()=>h(null)}),C&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar anuncio?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta accion no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>s(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:P,children:"Si, eliminar"})]})]})})]})}const ce="asistencia_iglesia",Oe=(x,h)=>{const C=new Date().toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=window.open("","_blank","width=900,height=700");s.document.write(`<!DOCTYPE html><html lang="es"><head>
    <meta charset="UTF-8"/>
    <title>${x}</title>
    <style>
      * { margin:0; padding:0; box-sizing:border-box; }
      body { font-family: Calibri, Arial, sans-serif; color: #1a1a2e; padding: 24px 32px; }
      .header { display:flex; align-items:center; gap:20px; border-bottom: 3px solid #1a2e4a; padding-bottom:14px; margin-bottom:18px; }
      .header img { width:72px; height:72px; object-fit:contain; border-radius:8px; }
      .header-info h1 { font-size:17px; font-weight:700; color:#1a2e4a; margin-bottom:3px; }
      .header-info p { font-size:13px; color:#4a6fa5; font-style:italic; margin-bottom:2px; }
      .header-info small { font-size:11px; color:#888; }
      h2 { font-size:15px; font-weight:700; color:#1a2e4a; margin:18px 0 10px; }
      table { width:100%; border-collapse:collapse; font-size:12px; margin-bottom:16px; }
      th { background:#1a2e4a; color:#fff; padding:7px 10px; text-align:left; font-weight:600; }
      td { padding:6px 10px; border-bottom:1px solid #e0e0e0; }
      tr:nth-child(even) td { background:#eef3fa; }
      .badge { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:600; }
      .badge-green { background:#d4edda; color:#155724; }
      .badge-amber { background:#fff3cd; color:#856404; }
      .badge-red   { background:#f8d7da; color:#721c24; }
      .section { margin-bottom:20px; }
      .stat-row { display:flex; gap:24px; margin-bottom:14px; flex-wrap:wrap; }
      .stat-box { background:#eef3fa; border-radius:8px; padding:12px 20px; text-align:center; }
      .stat-box .val { font-size:22px; font-weight:700; color:#1a2e4a; }
      .stat-box .lbl { font-size:11px; color:#666; }
      .bar-wrap { background:#e0e0e0; border-radius:4px; height:8px; margin-top:4px; }
      .bar { height:8px; border-radius:4px; }
      .footer { margin-top:24px; padding-top:10px; border-top:1px solid #ddd; font-size:11px; color:#aaa; text-align:right; }
      @media print { body { padding:12px 20px; } }
    </style>
  </head><body>
    <div class="header">
      <img src="/logo_iglesia.jpg" onerror="this.style.display='none'" />
      <div class="header-info">
        <h1>Iglesia Pentecostal Juan 7:38: El Semillero 1/10</h1>
        <p>Pastora: Dinorah Bautista</p>
        <small>${x} &nbsp;Â·&nbsp; ${C}</small>
      </div>
    </div>
    ${h}
    <div class="footer">Generado por el Sistema de GestiÃ³n â€” ${C}</div>
  </body></html>`),s.document.close(),s.focus(),setTimeout(()=>{s.print(),s.close()},400)},Fe=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Celula","Retiro congregacional","Culto unido","Otro"],Re=()=>new Date().toISOString().split("T")[0];function Je(){const[x,h]=l.useState(null),C=()=>{x&&(f(t=>t.filter(n=>n.id!==x)),h(null))},[s,S]=l.useState(null),[p,i]=l.useState([]),[d,f]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(ce))||[]}catch{return[]}}),[g,m]=l.useState("registrar"),[v,w]=l.useState(Re()),[j,E]=l.useState("Culto de avivamiento"),[N,z]=l.useState({}),[b,T]=l.useState(""),[B,P]=l.useState(!1),[F,I]=l.useState(!0),[k,A]=l.useState(null);l.useEffect(()=>{me({limit:500}).then(t=>{const n=t.data.filter(u=>u.estado==="activo");i(n);const a={};n.forEach(u=>a[u.id]=!1),z(a)}).catch(()=>{}).finally(()=>I(!1))},[]);const r=t=>{const n={};p.forEach(a=>n[a.id]=t),z(n)},R=()=>{const t=p.filter(y=>N[y.id]).map(y=>({id:y.id,nombre:`${y.nombres} ${y.apellidos}`})),a=[{id:Date.now(),fecha:v,tipo:j,total_miembros:p.length,total_presentes:t.length,presentes:t},...d];f(a),localStorage.setItem(ce,JSON.stringify(a)),P(!0),setTimeout(()=>P(!1),3e3);const u={};p.forEach(y=>u[y.id]=!1),z(u)},L=t=>h(t),c=p.filter(t=>`${t.nombres} ${t.apellidos}`.toLowerCase().includes(b.toLowerCase())),D=p.filter(t=>N[t.id]).length,_=p.map(t=>{const n=d.length,a=d.filter(y=>y.presentes.some(W=>W.id===t.id)).length,u=n>0?Math.round(a/n*100):0;return{...t,asistio:a,total:n,porcentaje:u}}).sort((t,n)=>t.porcentaje-n.porcentaje),o=()=>{const t=_.map(a=>{const u=a.porcentaje>70?"badge-green":a.porcentaje>40?"badge-amber":"badge-red",y=a.porcentaje>70?"Regular":a.porcentaje>40?"Irregular":"Ausente frecuente";return`<tr>
        <td>${a.nombres} ${a.apellidos}</td>
        <td style="text-align:center">${a.asistio}</td>
        <td style="text-align:center">${a.total}</td>
        <td style="text-align:center"><strong>${a.porcentaje}%</strong></td>
        <td><span class="badge ${u}">${y}</span></td>
      </tr>`}).join(""),n=`
      <div class="stat-row">
        <div class="stat-box"><div class="val">${d.length}</div><div class="lbl">Cultos registrados</div></div>
        <div class="stat-box"><div class="val">${p.length}</div><div class="lbl">Miembros activos</div></div>
      </div>
      <h2>Resumen de Asistencia por Miembro</h2>
      <table>
        <thead><tr><th>Miembro</th><th>Asistencias</th><th>Total cultos</th><th>%</th><th>Estado</th></tr></thead>
        <tbody>${t}</tbody>
      </table>`;Oe("Resumen de Asistencia",n)};return e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Asistencia"}),e.jsxs("p",{className:"page-subtitle",children:[d.length," registros guardados"]})]})}),e.jsx("div",{style:{display:"flex",gap:4,marginBottom:20,borderBottom:"1px solid var(--border)"},children:[["registrar","Registrar asistencia"],["historial","Historial"],["resumen","Resumen por miembro"]].map(([t,n])=>e.jsx("button",{onClick:()=>m(t),style:{background:"none",border:"none",cursor:"pointer",padding:"8px 18px",color:g===t?"var(--gold)":"var(--text-muted)",borderBottom:g===t?"2px solid var(--gold)":"2px solid transparent",fontSize:14,fontWeight:500,fontFamily:"var(--font-body)"},children:n},t))}),g==="registrar"&&e.jsxs("div",{children:[B&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Asistencia guardada correctamente"}),e.jsx("div",{className:"card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha"}),e.jsx(H,{name:"fecha",value:v,onChange:t=>w(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsx("select",{value:j,onChange:t=>E(t.target.value),className:"form-input",children:Fe.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14,flexWrap:"wrap",gap:10},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600},children:"Presentes: "}),e.jsx("span",{style:{color:"var(--gold)",fontWeight:700,fontSize:18},children:D}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" / ",p.length]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>r(!0),children:"Marcar todos"}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>r(!1),children:"Desmarcar todos"})]})]}),e.jsxs("div",{className:"search-bar",style:{marginBottom:14},children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar miembro...",value:b,onChange:t=>T(t.target.value)})]}),F?e.jsx("div",{style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:400,overflowY:"auto"},children:c.map(t=>e.jsxs("div",{onClick:()=>z({...N,[t.id]:!N[t.id]}),style:{display:"flex",alignItems:"center",gap:12,padding:"10px 14px",borderRadius:8,cursor:"pointer",background:N[t.id]?"rgba(var(--gold-rgb),0.1)":"var(--bg-card)",border:N[t.id]?"1px solid var(--gold)":"1px solid var(--border)",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:22,height:22,borderRadius:4,border:`2px solid ${N[t.id]?"var(--gold)":"var(--border)"}`,background:N[t.id]?"var(--gold)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:N[t.id]&&e.jsx("span",{style:{color:"#000",fontSize:14,fontWeight:700},children:"âœ“"})}),e.jsxs("span",{style:{fontWeight:N[t.id]?600:400},children:[t.nombres," ",t.apellidos]}),e.jsx("span",{className:`badge ${N[t.id]?"badge-green":""}`,style:{marginLeft:"auto",fontSize:11},children:N[t.id]?"Presente":"Ausente"})]},t.id))}),e.jsx("button",{className:"btn btn-gold",onClick:R,style:{width:"100%",marginTop:16,justifyContent:"center"},children:"Guardar asistencia"})]})]}),g==="historial"&&e.jsx("div",{className:"card",children:d.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay registros de asistencia aun."}):d.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 0",borderBottom:"1px solid var(--border)",flexWrap:"wrap",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.tipo}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:13},children:new Date(t.fecha).toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:20,color:"var(--gold)"},children:t.total_presentes}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["de ",t.total_miembros]})]}),e.jsxs("div",{style:{width:50,height:50,borderRadius:"50%",background:"var(--bg-card)",border:`3px solid ${t.total_presentes/t.total_miembros>.7?"var(--green)":t.total_presentes/t.total_miembros>.4?"var(--gold)":"var(--red)"}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:13},children:[Math.round(t.total_presentes/t.total_miembros*100),"%"]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:12,padding:"4px 10px"},onClick:()=>A(t),children:"Ver"}),e.jsx("button",{className:"btn btn-danger",style:{fontSize:12,padding:"4px 10px"},onClick:()=>L(t.id),children:"âœ•"})]})]})]},t.id))}),g==="resumen"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13},children:["Basado en ",d.length," registros. Los miembros con menor asistencia aparecen primero."]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:o,children:"ðŸ–¨ï¸ Imprimir"})]}),_.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay datos aun."}):e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Miembro"}),e.jsx("th",{children:"Asistencias"}),e.jsx("th",{children:"Total cultos"}),e.jsx("th",{children:"Porcentaje"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:_.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{style:{fontWeight:500},children:[t.nombres," ",t.apellidos]}),e.jsx("td",{style:{color:"var(--gold)",fontWeight:600},children:t.asistio}),e.jsx("td",{style:{color:"var(--text-muted)"},children:t.total}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:6,background:"var(--border)",borderRadius:3},children:e.jsx("div",{style:{width:`${t.porcentaje}%`,height:"100%",borderRadius:3,background:t.porcentaje>70?"var(--green)":t.porcentaje>40?"var(--gold)":"var(--red)"}})}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,minWidth:35},children:[t.porcentaje,"%"]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${t.porcentaje>70?"badge-green":t.porcentaje>40?"badge-amber":"badge-red"}`,children:t.porcentaje>70?"Regular":t.porcentaje>40?"Irregular":"Ausente frecuente"})})]},t.id))})]})})]}),k&&e.jsx("div",{className:"modal-overlay",onClick:t=>t.target===t.currentTarget&&A(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:500},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[k.tipo," â€” ",new Date(k.fecha).toLocaleDateString("es-DO")]}),e.jsx("button",{className:"modal-close",onClick:()=>A(null),children:"Ã—"})]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13,marginBottom:14},children:[k.total_presentes," de ",k.total_miembros," miembros presentes"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto"},children:k.presentes.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",background:"var(--bg-card)",borderRadius:8},children:[e.jsx("span",{style:{color:"var(--green)",fontWeight:700},children:"âœ“"}),e.jsx("span",{children:t.nombre})]},t.id))})]})}),s&&e.jsx(M,{mensaje:s.mensaje,tipo:s.tipo,onClose:()=>S(null)}),x&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar registro?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:C,children:"SÃ­, eliminar"})]})]})})]})}const de="documentos_iglesia",te=["Actas","Permisos y licencias","Estatutos","Contratos","Certificados","Financiero","Otro"],ae=()=>({nombre:"",categoria:"Actas",fecha:"",descripcion:"",url:"",archivo_nombre:""});function Ue(){const[x,h]=l.useState(null),C=async()=>{if(x)try{await deleteDocumento(x),h(null),load()}catch{p("No se pudo eliminar.")}},[s,S]=l.useState(null),p=c=>S({mensaje:c,tipo:"error"}),[i,d]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(de))||[]}catch{return[]}}),[f,g]=l.useState(!1),[m,v]=l.useState(null),[w,j]=l.useState(ae()),[E,N]=l.useState(""),[z,b]=l.useState(""),[T,B]=l.useState(!1),P=c=>j({...w,[c.target.name]:c.target.value}),F=c=>{const D=c.target.files[0];if(!D)return;const _=new FileReader;_.onload=o=>{j(t=>({...t,archivo_nombre:D.name,url:o.target.result}))},_.readAsDataURL(D)},I=()=>{if(!w.nombre)return;let c;m!==null?(c=i.map((D,_)=>_===m?{...w,id:D.id}:D),v(null)):c=[{...w,id:Date.now(),fecha_subida:new Date().toISOString()},...i],d(c),localStorage.setItem(de,JSON.stringify(c)),j(ae()),g(!1),B(!0),setTimeout(()=>B(!1),3e3)},k=c=>{j(i[c]),v(c),g(!0)},A=c=>{if(!c.url)return;const D=document.createElement("a");D.href=c.url,D.download=c.archivo_nombre||c.nombre,D.click()},r={Actas:"ðŸ“‹","Permisos y licencias":"ðŸ“œ",Estatutos:"ðŸ“–",Contratos:"ðŸ¤",Certificados:"ðŸ†",Financiero:"ðŸ’°",Otro:"ðŸ“„"},R=i.filter(c=>{var o;const D=c.nombre.toLowerCase().includes(E.toLowerCase())||((o=c.descripcion)==null?void 0:o.toLowerCase().includes(E.toLowerCase())),_=!z||c.categoria===z;return D&&_}),L=te.map(c=>({cat:c,docs:R.filter(D=>D.categoria===c)})).filter(c=>c.docs.length>0);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Documentos"}),e.jsxs("p",{className:"page-subtitle",children:[i.length," documento",i.length!==1?"s":""," guardado",i.length!==1?"s":""]})]}),e.jsx("button",{className:"btn btn-gold",onClick:()=>{j(ae()),v(null),g(!0)},children:"+ Subir documento"})]}),T&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Documento guardado correctamente"}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:20,flexWrap:"wrap"},children:[e.jsxs("div",{className:"search-bar",children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar documento...",value:E,onChange:c=>N(c.target.value)})]}),e.jsxs("select",{value:z,onChange:c=>b(c.target.value),className:"form-input",style:{width:"auto"},children:[e.jsx("option",{value:"",children:"Todas las categorias"}),te.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),R.length===0?e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“‚"}),e.jsx("p",{children:"No hay documentos guardados. Sube el primero."})]}):L.map(({cat:c,docs:D})=>e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:20},children:r[c]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:15,fontWeight:700,color:"var(--gold)"},children:c}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["(",D.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:D.map((_,o)=>e.jsxs("div",{className:"card",style:{display:"flex",alignItems:"center",gap:16,padding:"14px 18px"},children:[e.jsx("span",{style:{fontSize:32,flexShrink:0},children:r[_.categoria]||"ðŸ“„"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:15,marginBottom:4},children:_.nombre}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[_.fecha&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Fecha: ",new Date(_.fecha).toLocaleDateString("es-DO")]}),_.archivo_nombre&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Archivo: ",_.archivo_nombre]}),_.fecha_subida&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Subido: ",new Date(_.fecha_subida).toLocaleDateString("es-DO")]})]}),_.descripcion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,marginTop:4},children:_.descripcion})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[_.url&&e.jsx("button",{className:"btn btn-gold",style:{padding:"5px 12px",fontSize:12},onClick:()=>A(_),children:"Descargar"}),e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>k(i.indexOf(_)),children:"Editar"}),e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>h(_.id),children:"âœ•"})]})]},_.id))})]},c)),f&&e.jsx("div",{className:"modal-overlay",onClick:c=>c.target===c.currentTarget&&g(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:m!==null?"Editar documento":"Subir documento"}),e.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del documento *"}),e.jsx("input",{name:"nombre",value:w.nombre,onChange:P,className:"form-input",placeholder:"Ej: Acta de fundacion",required:!0})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Categoria"}),e.jsx("select",{name:"categoria",value:w.categoria,onChange:P,className:"form-input",children:te.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha del documento"}),e.jsx(H,{name:"fecha",value:w.fecha,onChange:P})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Descripcion"}),e.jsx("textarea",{name:"descripcion",value:w.descripcion,onChange:P,className:"form-input",rows:3,style:{resize:"vertical"},placeholder:"Descripcion breve del documento..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Subir archivo (PDF, imagen, Word)"}),e.jsx("input",{type:"file",onChange:F,className:"form-input",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),w.archivo_nombre&&e.jsxs("div",{style:{color:"var(--green)",fontSize:12,marginTop:4},children:["Archivo: ",w.archivo_nombre]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>g(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:I,children:m!==null?"Actualizar":"Guardar documento"})]})]})]})}),s&&e.jsx(M,{mensaje:s.mensaje,tipo:s.tipo,onClose:()=>S(null)}),x&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar documento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>h(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:C,children:"SÃ­, eliminar"})]})]})})]})}export{He as A,Ue as D,Me as E,Ge as P,ke as _,Ve as a,Je as b};
