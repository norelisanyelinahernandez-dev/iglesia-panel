const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-admin-CwaVnrC-.js","assets/vendor-react-Z5zKi_Kz.js","assets/vendor-charts-Ds92Sbdx.js"])))=>i.map(i=>d[i]);
import{o as M,j as e,T as C,p as R,g as q,k as L}from"./pages-admin-CwaVnrC-.js";import{r as f,u as B}from"./vendor-react-Z5zKi_Kz.js";const W="modulepreload",T=function(a){return"/"+a},N={},P=function(g,p,u){let t=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));t=Promise.allSettled(p.map(d=>{if(d=T(d),d in N)return;N[d]=!0;const m=d.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const o=document.createElement("link");if(o.rel=m?"stylesheet":W,m||(o.as="script"),o.crossOrigin="",o.href=d,r&&o.setAttribute("nonce",r),document.head.appendChild(o),m)return new Promise((S,c)=>{o.addEventListener("load",S),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${d}`)))})}))}function x(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return t.then(n=>{for(const r of n||[])r.status==="rejected"&&x(r.reason);return g().catch(x)})},J=a=>a?new Date(a+"T00:00:00").toLocaleDateString("es-DO",{day:"2-digit",month:"long",year:"numeric"}):null,D=a=>a?a.charAt(0).toUpperCase()+a.slice(1):"",O=["diacono","lider","maestra","maestro","secretaria","secretario","copastor","copastora","pastor","pastora"];function U(){var S;const[a,g]=f.useState(null),p=c=>g({mensaje:c,tipo:"error"}),{user:u}=M(),[t,x]=f.useState(null),[n,r]=f.useState(null),[d,m]=f.useState(!0),b=O.includes((S=u==null?void 0:u.rol)==null?void 0:S.toLowerCase());f.useEffect(()=>{(async()=>{try{const h=await R.get("/miembros/me/perfil");if(x(h.data||null),b)try{const{getMiembros:v}=await P(async()=>{const{getMiembros:y}=await import("./pages-admin-CwaVnrC-.js").then(E=>E.w);return{getMiembros:y}},__vite__mapDeps([0,1,2])),z=await v({limit:500});r(z.data.filter(y=>y.estado==="activo").length)}catch{p("Ocurrio un error inesperado. Intenta de nuevo.")}}catch{p("Ocurrio un error inesperado. Intenta de nuevo.")}m(!1)})()},[]);const o=({icon:c,label:h,value:v})=>v?e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:10,padding:"10px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{fontSize:16,minWidth:22,textAlign:"center"},children:c}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:.5,marginBottom:2},children:h}),e.jsx("div",{style:{fontSize:14,fontWeight:500},children:v})]})]}):null;return d?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:60},children:e.jsx("span",{className:"spinner",style:{width:36,height:36}})}):e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Mi Perfil"}),e.jsxs("p",{className:"page-subtitle",children:[D(t==null?void 0:t.rol)," Â· ",D(t==null?void 0:t.estado)]})]})}),e.jsxs("div",{className:"card",style:{marginBottom:20,display:"flex",alignItems:"center",gap:18,background:"linear-gradient(135deg, var(--surface-2), var(--surface))"},children:[t!=null&&t.foto?e.jsx("img",{src:t.foto,style:{width:72,height:72,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)",flexShrink:0}}):e.jsx("div",{style:{width:72,height:72,borderRadius:"50%",background:"var(--surface)",border:"3px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,flexShrink:0},children:"ðŸ™"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"var(--gold)",fontWeight:700,textTransform:"uppercase",letterSpacing:1,marginBottom:4},children:"Ministerio San Juan 7:38"}),e.jsx("div",{style:{fontSize:20,fontWeight:700},children:u==null?void 0:u.nombre}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)"},children:[D(t==null?void 0:t.rol)," Â· ",D(t==null?void 0:t.estado)]})]}),b&&n!==null&&e.jsxs("div",{style:{marginLeft:"auto",textAlign:"center",background:"var(--gold-dim)",border:"1px solid var(--gold)",borderRadius:10,padding:"10px 18px"},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"var(--gold)"},children:n}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Miembros activos"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:12,marginBottom:16},children:e.jsx("div",{style:{fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Mi InformaciÃ³n"})}),e.jsx(o,{icon:"ðŸ“±",label:"TelÃ©fono",value:t==null?void 0:t.telefono}),e.jsx(o,{icon:"âœ‰ï¸",label:"Correo",value:t==null?void 0:t.email}),e.jsx(o,{icon:"ðŸŽ‚",label:"Fecha de nacimiento",value:J(t==null?void 0:t.fecha_nacimiento)}),e.jsx(o,{icon:"ðŸ’§",label:"Fecha de bautismo",value:J(t==null?void 0:t.fecha_bautismo)}),e.jsx(o,{icon:"â­",label:"Ministerio",value:t==null?void 0:t.ministerio_actual}),e.jsx(o,{icon:"ðŸ“",label:"DirecciÃ³n",value:t==null?void 0:t.direccion}),e.jsx(o,{icon:"ðŸ’¼",label:"OcupaciÃ³n",value:t==null?void 0:t.ocupacion})]}),a&&e.jsx(C,{mensaje:a.mensaje,tipo:a.tipo,onClose:()=>g(null)})]})}const I=[{texto:"â€œPorque yo sÃ© los pensamientos que tengo acerca de vosotros, dice JehovÃ¡, pensamientos de paz y no de mal.â€",ref:"JeremÃ­as 29:11"},{texto:"â€œTodo lo puedo en Cristo que me fortalece.â€",ref:"Filipenses 4:13"},{texto:"â€œEl SeÃ±or es mi pastor; nada me faltarÃ¡.â€",ref:"Salmos 23:1"},{texto:"â€œFÃ­aos de JehovÃ¡ de todo tu corazÃ³n, y no te apoyes en tu propia prudencia.â€",ref:"Proverbios 3:5"},{texto:"â€œMas buscad primeramente el reino de Dios y su justicia, y todas estas cosas os serÃ¡n aÃ±adidas.â€",ref:"Mateo 6:33"},{texto:"â€œEl que cree en mÃ­, de su interior correrÃ¡n rÃ­os de agua viva.â€",ref:"Juan 7:38"},{texto:"â€œNo se turbe vuestro corazÃ³n; creÃ©is en Dios, creed tambiÃ©n en mÃ­.â€",ref:"Juan 14:1"},{texto:"â€œEncomienda a JehovÃ¡ tu camino, y confÃ­a en Ã©l; y Ã©l harÃ¡.â€",ref:"Salmos 37:5"},{texto:"â€œY sabemos que a los que aman a Dios, todas las cosas les ayudan a bien.â€",ref:"Romanos 8:28"},{texto:"â€œJehovÃ¡ es mi luz y mi salvaciÃ³n; Â¿de quiÃ©n temerÃ©?â€",ref:"Salmos 27:1"},{texto:"â€œEsforzaos y cobrad Ã¡nimo; no temÃ¡is, ni tengÃ¡is miedo, porque JehovÃ¡ tu Dios va contigo.â€",ref:"Deuteronomio 31:6"},{texto:"â€œLos que esperan en JehovÃ¡ tendrÃ¡n nuevas fuerzas; levantarÃ¡n alas como las Ã¡guilas.â€",ref:"IsaÃ­as 40:31"},{texto:"â€œVenid a mÃ­ todos los que estÃ¡is trabajados y cargados, y yo os harÃ© descansar.â€",ref:"Mateo 11:28"},{texto:"â€œEl amor es sufrido, es benigno; el amor no tiene envidia.â€",ref:"1 Corintios 13:4"},{texto:"â€œEstad siempre gozosos. Orad sin cesar. Dad gracias en todo.â€",ref:"1 Tesalonicenses 5:16-18"},{texto:"â€œDe tal manera amÃ³ Dios al mundo, que ha dado a su Hijo unigÃ©nito.â€",ref:"Juan 3:16"},{texto:"â€œJehovÃ¡ pelearÃ¡ por vosotros, y vosotros estarÃ©is tranquilos.â€",ref:"Ã‰xodo 14:14"},{texto:"â€œEl nombre de JehovÃ¡ es torre fuerte; a Ã©l correrÃ¡ el justo y serÃ¡ levantado.â€",ref:"Proverbios 18:10"},{texto:"â€œBendito el varÃ³n que confÃ­a en JehovÃ¡, y cuya confianza es JehovÃ¡.â€",ref:"JeremÃ­as 17:7"},{texto:"â€œNinguna arma forjada contra ti prosperarÃ¡.â€",ref:"IsaÃ­as 54:17"},{texto:"â€œJehovÃ¡ tu Dios estÃ¡ en medio de ti, poderoso, Ã©l salvarÃ¡.â€",ref:"SofonÃ­as 3:17"},{texto:"â€œPelea la buena batalla de la fe, echa mano de la vida eterna.â€",ref:"1 Timoteo 6:12"},{texto:"â€œDios es nuestro amparo y fortaleza, nuestro pronto auxilio en las tribulaciones.â€",ref:"Salmos 46:1"},{texto:"â€œBÃ¡state mi gracia; porque mi poder se perfecciona en la debilidad.â€",ref:"2 Corintios 12:9"},{texto:"â€œAlzarÃ© mis ojos a los montes; Â¿de dÃ³nde vendrÃ¡ mi socorro? Mi socorro viene de JehovÃ¡.â€",ref:"Salmos 121:1-2"},{texto:"â€œYo soy la vid, vosotros los pÃ¡mpanos; el que permanece en mÃ­, Ã©ste lleva mucho fruto.â€",ref:"Juan 15:5"},{texto:"â€œClama a mÃ­, y yo te responderÃ©, y te enseÃ±arÃ© cosas grandes y ocultas.â€",ref:"JeremÃ­as 33:3"},{texto:"â€œNo temas, porque yo estoy contigo; no desmayes, porque yo soy tu Dios.â€",ref:"IsaÃ­as 41:10"},{texto:"â€œEl corazÃ³n del hombre piensa su camino; mas JehovÃ¡ endereza sus pasos.â€",ref:"Proverbios 16:9"},{texto:"â€œSean gratas las palabras de mi boca y la meditaciÃ³n de mi corazÃ³n delante de ti.â€",ref:"Salmos 19:14"},{texto:"â€œEl que habita al abrigo del AltÃ­simo morarÃ¡ bajo la sombra del Omnipotente.â€",ref:"Salmos 91:1"}],k=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function V(){var E;const[a,g]=f.useState(null),p=s=>g({mensaje:s,tipo:"error"}),{user:u}=M(),t=B(),[x,n]=f.useState([]),[r,d]=f.useState([]),[m,b]=f.useState([]),[o,S]=f.useState(!0),c=new Date,h=c.getMonth()+1,v=Math.floor((c-new Date(c.getFullYear(),0,0))/864e5),z=I[v%I.length];f.useEffect(()=>{(async()=>{try{const[l,i,w]=await Promise.allSettled([R.get("/miembros/",{params:{limit:500}}),q(),L()]);if(l.status==="fulfilled"){const A=(l.value.data||[]).filter(j=>j.fecha_nacimiento&&parseInt(j.fecha_nacimiento.split("-")[1])===h).sort((j,_)=>parseInt(j.fecha_nacimiento.split("-")[2])-parseInt(_.fecha_nacimiento.split("-")[2]));n(A)}if(i.status==="fulfilled"){const A=(i.value.data||[]).filter(j=>new Date(j.fecha_inicio||j.fecha)>=c).slice(0,3);d(A)}w.status==="fulfilled"&&b((w.value.data||[]).slice(0,3))}catch{p("Ocurrio un error inesperado. Intenta de nuevo.")}S(!1)})()},[]);const y=({emoji:s,title:l,link:i})=>e.jsxs("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:12,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:[s," ",l]}),i&&e.jsx("button",{onClick:()=>t(i),style:{background:"none",border:"none",color:"var(--text-muted)",fontSize:12,cursor:"pointer",textDecoration:"underline"},children:"Ver todos â†’"})]});return e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"page-title",children:["Â¡Bienvenido, ",(E=u==null?void 0:u.nombre)==null?void 0:E.split(" ")[0],"!"]}),e.jsx("p",{className:"page-subtitle",children:"Ministerio San Juan 7:38 Â· Del Semillero 1/11"})]})}),e.jsx("div",{className:"card",style:{marginBottom:20,borderLeft:"4px solid var(--gold)",background:"linear-gradient(135deg, var(--surface-2), var(--surface))"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:14},children:[e.jsx("span",{style:{fontSize:32,flexShrink:0},children:"âœï¸"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"var(--gold)",fontWeight:700,textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"VersÃ­culo del dÃ­a"}),e.jsx("p",{style:{fontStyle:"italic",fontSize:15,lineHeight:1.8,color:"var(--text)",marginBottom:8},children:z.texto}),e.jsxs("span",{style:{color:"var(--gold)",fontWeight:700,fontSize:13},children:["â€” ",z.ref]})]})]})}),e.jsxs("div",{className:"card",style:{marginBottom:20},children:[e.jsx(y,{emoji:"ðŸ“…",title:"PrÃ³ximos Eventos",link:"/miembro/eventos"}),o?e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("span",{className:"spinner"})}):r.length===0?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,textAlign:"center",padding:"10px 0"},children:"No hay eventos prÃ³ximos."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:r.map(s=>{const l=new Date(s.fecha_inicio||s.fecha);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 10px",borderRadius:10,background:"var(--surface-2)",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{background:"var(--gold)",color:"#000",borderRadius:8,padding:"6px 10px",textAlign:"center",minWidth:44,flexShrink:0},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700},children:l.getDate()}),e.jsx("div",{style:{fontSize:10,fontWeight:600},children:k[l.getMonth()].slice(0,3).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:14},children:s.nombre||s.titulo}),s.lugar&&e.jsxs("div",{style:{fontSize:12,color:"var(--text-muted)"},children:["ðŸ“ ",s.lugar]})]})]},s.id)})})]}),e.jsxs("div",{className:"card",style:{marginBottom:20},children:[e.jsx(y,{emoji:"ðŸ“¢",title:"Anuncios",link:"/miembro/anuncios"}),o?e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("span",{className:"spinner"})}):m.length===0?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,textAlign:"center",padding:"10px 0"},children:"No hay anuncios por el momento."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:m.map((s,l)=>e.jsxs("div",{style:{padding:"10px 12px",borderRadius:10,background:"var(--surface-2)",borderLeft:"3px solid var(--gold)"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:14,marginBottom:4},children:s.titulo}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)",lineHeight:1.5,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.contenido})]},l))})]}),e.jsxs("div",{className:"card",children:[e.jsx(y,{emoji:"ðŸŽ‚",title:"CumpleaÃ±os de "+k[h-1]}),e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginBottom:12},children:o?"...":`${x.length} miembro${x.length!==1?"s":""} este mes`}),o?e.jsx("div",{style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})}):x.length===0?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,textAlign:"center",padding:"20px 0"},children:"No hay cumpleaÃ±os registrados este mes."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:x.map(s=>{const l=parseInt(s.fecha_nacimiento.split("-")[2]),i=l===c.getDate();return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,padding:"10px 12px",borderRadius:10,background:i?"var(--gold)":"var(--surface-2)",border:i?"none":"1px solid var(--border)"},children:[e.jsx("div",{style:{width:44,height:44,borderRadius:10,flexShrink:0,background:i?"#000":"var(--surface)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:i?22:18},children:i?"&#127881;":"&#127874;"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:14,color:i?"#000":"var(--text)"},children:[s.nombres," ",s.apellidos,i&&e.jsx("span",{style:{marginLeft:8,fontSize:11,background:"#000",color:"var(--gold)",borderRadius:4,padding:"2px 6px"},children:"Â¡HOY! ðŸŽŠ"})]}),e.jsxs("div",{style:{fontSize:12,color:i?"#333":"var(--text-muted)"},children:[l," de ",k[h-1]," Â· ",s.rol||"Miembro"]})]})]},s.id)})})]}),a&&e.jsx(C,{mensaje:a.mensaje,tipo:a.tipo,onClose:()=>g(null)})]})}export{V as D,U as M};
