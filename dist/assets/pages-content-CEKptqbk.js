import{u as oe,j as e,D as Y,T as J,g as xe,a as ie,c as fe,r as ve,d as je,b as be,s as ye,e as ge,f as re,h as le,i as K,k as Ne,l as Se,m as Ce,n as _e}from"./pages-admin-CwaVnrC-.js";import{r as i}from"./vendor-react-Z5zKi_Kz.js";const ze={culto:"badge-gold",retiro:"badge-blue",conferencia:"badge-blue",boda:"badge-green",bautismo:"badge-gold",celula:"badge-amber",otro:"badge-green"},ce={culto:"â›ª",retiro:"ðŸ•ï¸",conferencia:"ðŸŽ¤",boda:"ðŸ’",bautismo:"ðŸ’§",celula:"ðŸ‘¥",otro:"ðŸ“…"},Q={culto:"Culto",retiro:"Retiro",conferencia:"Conferencia",boda:"Boda",bautismo:"Bautismo",celula:"CÃ©lula",otro:"Otro"};function we({title:g,onClose:p,children:S}){return e.jsx("div",{className:"modal-overlay",onClick:s=>s.target===s.currentTarget&&p(),children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:g}),e.jsx("button",{className:"modal-close",onClick:p,children:"Ã—"})]}),S]})})}function Le(){var y;const[g,p]=i.useState(null),[S,s]=i.useState(null),b=n=>s({mensaje:n,tipo:"error"}),{puedeEditar:m}=oe(),c=m("eventos"),[h,C]=i.useState([]),[u,d]=i.useState(!0),[_,D]=i.useState(null),[f,k]=i.useState(null),[v,z]=i.useState(null),[x,T]=i.useState({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""}),[I,O]=i.useState({nombre_visita:"",telefono_visita:""}),[P,W]=i.useState(!1),[A,B]=i.useState(""),o=async()=>{d(!0);try{const{data:n}=await xe();C(n)}catch{b("Ocurrio un error inesperado. Intenta de nuevo.")}d(!1)};i.useEffect(()=>{o()},[]);const R=async n=>{k(n),z(null);try{const{data:a}=await ie(n.id);z(a)}catch{b("Ocurrio un error inesperado. Intenta de nuevo.")}},L=async n=>{var a,t;n.preventDefault(),W(!0),B("");try{if(!x.fecha_inicio){B("La fecha es requerida"),W(!1);return}const l=new Date(x.fecha_inicio);if(isNaN(l.getTime())){B("Fecha invÃ¡lida"),W(!1);return}const j={nombre:x.nombre,tipo:x.tipo||null,descripcion:x.descripcion||null,lugar:x.lugar||null,fecha_inicio:l.toISOString(),fecha_fin:x.fecha_fin?new Date(x.fecha_fin).toISOString():null};await fe(j),o(),D(null),T({nombre:"",tipo:"culto",descripcion:"",fecha_inicio:"",fecha_fin:"",lugar:""})}catch(l){const j=(t=(a=l.response)==null?void 0:a.data)==null?void 0:t.detail;Array.isArray(j)?B(j.map(w=>w.msg||JSON.stringify(w)).join(", ")):B(typeof j=="string"?j:"Error al crear evento")}W(!1)},r=async n=>{n.preventDefault(),W(!0);try{await ve(f.id,{nombre_visita:I.nombre_visita,telefono_visita:I.telefono_visita,presente:!0});const{data:a}=await ie(f.id);z(a),O({nombre_visita:"",telefono_visita:""})}catch{b("Ocurrio un error inesperado. Intenta de nuevo.")}W(!1)},E=async()=>{if(g)try{await je(g),p(null),o()}catch{b("No se pudo eliminar.")}};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Eventos"}),e.jsxs("p",{className:"page-subtitle",children:[h.length," eventos registrados"]})]}),c&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{B(""),D("nuevo")},children:"+ Nuevo evento"})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:24,flexWrap:"wrap"},children:["culto","retiro","boda","bautismo","conferencia","celula"].map(n=>{const a=h.filter(t=>t.tipo===n).length;return a===0?null:e.jsxs("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:10,padding:"10px 16px",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:ce[n]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:a}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:[Q[n],"s"]})]})]},n)})}),u?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner",style:{width:28,height:28}})}):e.jsx("div",{className:"grid-3",children:h.map(n=>e.jsxs("div",{className:"card",style:{position:"relative",cursor:"default"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:12},children:[e.jsx("span",{style:{fontSize:26},children:ce[n.tipo]||"ðŸ“…"}),e.jsx("span",{className:`badge ${ze[n.tipo]||"badge-green"}`,children:Q[n.tipo]||n.tipo})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:6},children:n.nombre}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:4},children:["ðŸ“… ",new Date(n.fecha_inicio).toLocaleDateString("es-DO",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),n.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:12},children:["ðŸ“ ",n.lugar]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:14,borderTop:"1px solid var(--border)",paddingTop:12},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1,justifyContent:"center",fontSize:12,padding:"6px"},onClick:()=>R(n),children:"Ver asistencia"}),c&&e.jsx("button",{className:"btn btn-danger",style:{padding:"6px 10px",fontSize:12},onClick:()=>p(n.id),children:"âœ•"})]})]},n.id))}),_==="nuevo"&&e.jsxs(we,{title:"Nuevo evento",onClose:()=>D(null),children:[A&&e.jsx("div",{className:"alert alert-error",children:A}),e.jsxs("form",{onSubmit:L,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del evento *"}),e.jsx("input",{value:x.nombre,onChange:n=>T({...x,nombre:n.target.value}),className:"form-input",required:!0})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsx("select",{value:x.tipo,onChange:n=>T({...x,tipo:n.target.value}),className:"form-input",children:["culto","retiro","conferencia","boda","bautismo","celula","otro"].map(n=>e.jsx("option",{value:n,children:Q[n]},n))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha y hora *"}),e.jsx(Y,{name:"fecha_inicio",value:x.fecha_inicio,onChange:n=>T({...x,fecha_inicio:n.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:x.lugar,onChange:n=>T({...x,lugar:n.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DescripciÃ³n"}),e.jsx("textarea",{value:x.descripcion,onChange:n=>T({...x,descripcion:n.target.value}),className:"form-input",rows:2,style:{resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>D(null),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:P,children:P?"Guardando...":"Crear evento"})]})]})]}),f&&e.jsx("div",{className:"modal-overlay",onClick:n=>n.target===n.currentTarget&&k(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:550},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["Asistencia â€“ ",f.nombre]}),e.jsx("button",{className:"modal-close",onClick:()=>k(null),children:"Ã—"})]}),v&&e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsxs("div",{style:{background:"var(--green-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--green)"},children:v.presentes}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Presentes"})]}),e.jsxs("div",{style:{background:"var(--blue-dim)",borderRadius:8,padding:"10px 20px",flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--blue)"},children:v.total_registros}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)"},children:"Total"})]})]}),e.jsxs("form",{onSubmit:r,style:{display:"flex",gap:10,marginBottom:18},children:[e.jsx("input",{placeholder:"Nombre de visita",value:I.nombre_visita,onChange:n=>O({...I,nombre_visita:n.target.value}),className:"form-input",style:{flex:2},required:!0}),e.jsx("input",{placeholder:"Tel\\u00e9fono",value:I.telefono_visita,onChange:n=>O({...I,telefono_visita:n.target.value}),className:"form-input",style:{flex:1}}),e.jsx("button",{type:"submit",className:"btn btn-gold",disabled:P,style:{whiteSpace:"nowrap"},children:"+ Agregar"})]}),v?((y=v.registros)==null?void 0:y.length)===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"var(--text-muted)",fontSize:13},children:"Sin registros aÃºn"}):e.jsx("div",{style:{maxHeight:250,overflowY:"auto"},children:v.registros.map((n,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{fontWeight:500,fontSize:13},children:n.nombre_visita||"Miembro registrado"}),e.jsx("span",{className:`badge ${n.presente?"badge-green":"badge-red"}`,children:n.presente?"Presente":"Ausente"})]},a))}):e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("span",{className:"spinner"})})]})}),S&&e.jsx(J,{mensaje:S.mensaje,tipo:S.tipo,onClose:()=>s(null)}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar evento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>p(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:E,children:"SÃ­, eliminar"})]})]})})]})}const X={nombre:"",cargo:"",telefono:"",email:"",direccion:"",biografia:"",versiculo:"",anios_ministerio:"",especialidad:"",foto_url:""};function $e(){const[g,p]=i.useState(null),S=z=>p({mensaje:z,tipo:"error"}),[s,b]=i.useState(X),[m,c]=i.useState(!1),[h,C]=i.useState(X),[u,d]=i.useState(!1),[_,D]=i.useState(!0);i.useEffect(()=>{be().then(z=>{const x=z.data||X;b(x),C(x)}).catch(()=>{}).finally(()=>D(!1))},[]);const f=z=>C({...h,[z.target.name]:z.target.value}),k=async z=>{z.preventDefault();try{await ye(h),b(h),c(!1),d(!0),setTimeout(()=>d(!1),3e3)}catch{S("Ocurrio un error inesperado. Intenta de nuevo.")}},v=(z,x)=>x?e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("div",{style:{color:"var(--text-muted)",fontSize:12,marginBottom:2},children:z}),e.jsx("div",{style:{fontWeight:500},children:x})]}):null;return _?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx("span",{className:"spinner"})}):e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Perfil de la Pastora"}),e.jsx("p",{className:"page-subtitle",children:"InformaciÃ³n pastoral y ministerial"})]}),!m&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{C(s),c(!0)},children:"âœï¸ Editar perfil"})]}),u&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"âœ… Perfil guardado correctamente"}),m?e.jsx("div",{className:"card",style:{maxWidth:660},children:e.jsxs("form",{onSubmit:k,style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:4},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n Personal"})}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre completo *"}),e.jsx("input",{name:"nombre",value:h.nombre,onChange:f,className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cargo / TÃ­tulo"}),e.jsx("input",{name:"cargo",value:h.cargo,onChange:f,className:"form-input",placeholder:"Ej: Pastora Principal"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TelÃ©fono"}),e.jsx("input",{name:"telefono",value:h.telefono,onChange:f,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo"}),e.jsx("input",{name:"email",type:"email",value:h.email,onChange:f,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"AÃ±os en el ministerio"}),e.jsx("input",{name:"anios_ministerio",value:h.anios_ministerio,onChange:f,className:"form-input",placeholder:"Ej: 15"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"URL de foto (opcional)"}),e.jsx("input",{name:"foto_url",value:h.foto_url,onChange:f,className:"form-input",placeholder:"https://..."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"DirecciÃ³n"}),e.jsx("input",{name:"direccion",value:h.direccion,onChange:f,className:"form-input"})]}),e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,margin:"8px 0 4px"},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Especialidad ministerial"}),e.jsx("input",{name:"especialidad",value:h.especialidad,onChange:f,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"BiografÃ­a"}),e.jsx("textarea",{name:"biografia",value:h.biografia,onChange:f,className:"form-input",rows:4,style:{resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VersÃ­culo favorito"}),e.jsx("input",{name:"versiculo",value:h.versiculo,onChange:f,className:"form-input",placeholder:"Ej: Juan 7:38"})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:6},children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>c(!1),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-gold",children:"ðŸ’¾ Guardar perfil"})]})]})}):e.jsxs("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[e.jsxs("div",{className:"card",style:{flex:"0 0 260px",textAlign:"center",padding:32},children:[s.foto_url?e.jsx("img",{src:s.foto_url,alt:"Foto pastora",style:{width:140,height:140,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--gold)",marginBottom:16}}):e.jsx("div",{style:{width:140,height:140,borderRadius:"50%",background:"var(--bg-card)",border:"3px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,margin:"0 auto 16px"},children:"ðŸ‘©â€ðŸ’¼"}),e.jsx("h2",{style:{fontFamily:"var(--font-heading)",fontSize:20,fontWeight:700,marginBottom:4},children:s.nombre||"Sin nombre"}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,marginBottom:8},children:s.cargo||"Pastora"}),s.anios_ministerio&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:13},children:[s.anios_ministerio," aÃ±os en el ministerio"]})]}),e.jsxs("div",{style:{flex:1,minWidth:280,display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"InformaciÃ³n de contacto"})}),v("TelÃ©fono",s.telefono),v("Correo",s.email),v("DirecciÃ³n",s.direccion),!s.telefono&&!s.email&&!s.direccion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n de contacto"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderLeft:"3px solid var(--gold)",paddingLeft:10,marginBottom:14},children:e.jsx("span",{style:{fontFamily:"var(--font-heading)",fontWeight:700,fontSize:13,color:"var(--gold)",textTransform:"uppercase",letterSpacing:1},children:"Ministerio"})}),v("Especialidad",s.especialidad),v("BiografÃ­a",s.biografia),!s.especialidad&&!s.biografia&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin informaciÃ³n ministerial"})]}),s.versiculo&&e.jsxs("div",{className:"card",style:{borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:15,color:"var(--text)",marginBottom:6},children:['"',s.versiculo,'"']}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"â€” VersÃ­culo favorito"})]})]})]}),g&&e.jsx(J,{mensaje:g.mensaje,tipo:g.tipo,onClose:()=>p(null)})]})}const Z=["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"],De=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Visita a enfermos","Celula","Retiro congregacional","Culto unido"],ue={"Culto de avivamiento":"ðŸ”¥","Estudio bÃ­blico":"ðŸ“–","Escuela de niÃ±os":"ðŸ‘§","Visita a enfermos":"ðŸ¥",Celula:"ðŸ ","Retiro congregacional":"â›º","Culto unido":"ðŸ¤","":"ðŸ“…"},q={"Culto de avivamiento":["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],Celula:["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre"],"Estudio bÃ­blico":["Oracion de apertura","Encargado del estudio"],"Escuela de niÃ±os":["Encargado"],"Visita a enfermos":[],"Retiro congregacional":[],"Culto unido":[]},de=[{texto:"No dejando de congregarnos, como algunos tienen por costumbre, sino exhortÃ¡ndonos.",ref:"Hebreos 10:25"},{texto:"Porque donde estÃ¡n dos o tres congregados en mi nombre, alli estoy yo en medio de ellos.",ref:"Mateo 18:20"},{texto:"Yo me alegre con los que me decÃ­an: A la casa de Jehova iremos.",ref:"Salmos 122:1"},{texto:"Una cosa he demandado a Jehova; que este yo en la casa de Jehova todos los dias de mi vida.",ref:"Salmos 27:4"},{texto:"Y perseveraban en la doctrina de los apÃ³stoles, en la comuniÃ³n unos con otros, en el partimiento del pan y en las oraciones.",ref:"Hechos 2:42"},{texto:"Engrandezcan a JehovÃ¡ conmigo, y exaltemos su nombre a una.",ref:"Salmos 34:3"},{texto:"Cantad a JehovÃ¡ cÃ¡ntico nuevo; su alabanza sea en la congregaciÃ³n de los santos.",ref:"Salmos 149:1"}],Ee=g=>{const p=new Date(g);p.setHours(0,0,0,0),p.setDate(p.getDate()+4-(p.getDay()||7));const S=new Date(p.getFullYear(),0,1);return`${p.getFullYear()}-W${Math.ceil(((p-S)/864e5+1)/7).toString().padStart(2,"0")}`},U=()=>Ee(new Date),ee=g=>({dia:g,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}),ke=()=>({tipo_asignado:"miembro",miembro_id:"",pastor_externo:"",congregacion_externa:""}),me=g=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel();const p=new SpeechSynthesisUtterance(g);p.lang="es-ES",p.rate=.9,window.speechSynthesis.speak(p)};function Ae({label:g,parte:p,onChange:S,miembros:s}){const b=p||ke(),m=(c,h)=>S({...b,[c]:h});return e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:8,padding:"10px 14px",marginBottom:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:8,color:"var(--gold)"},children:g}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:1},children:[e.jsx("label",{className:"form-label",children:"Asignado a"}),e.jsxs("select",{value:b.tipo_asignado,onChange:c=>m("tipo_asignado",c.target.value),className:"form-input",children:[e.jsx("option",{value:"miembro",children:"Miembro de la iglesia"}),e.jsx("option",{value:"externo",children:"Miembro de otra congregacion"})]})]}),b.tipo_asignado==="miembro"?e.jsxs("div",{className:"form-group",style:{minWidth:180,flex:2},children:[e.jsx("label",{className:"form-label",children:"Miembro"}),e.jsxs("select",{value:b.miembro_id,onChange:c=>m("miembro_id",c.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),s.map(c=>e.jsxs("option",{value:c.id,children:[c.nombres," ",c.apellidos]},c.id))]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Nombre del pastor"}),e.jsx("input",{value:b.pastor_externo,onChange:c=>m("pastor_externo",c.target.value),className:"form-input",placeholder:"Nombre"})]}),e.jsxs("div",{className:"form-group",style:{minWidth:150,flex:1},children:[e.jsx("label",{className:"form-label",children:"Congregacion"}),e.jsx("input",{value:b.congregacion_externa,onChange:c=>m("congregacion_externa",c.target.value),className:"form-input",placeholder:"Nombre congregacion"})]})]})]})]})}function Be({diaData:g,miembros:p,onEscuchar:S}){const s=g,b=q[s.tipo]||[],m=ue[s.tipo]||"ðŸ“…",c=h=>{const C=s.partes[h];if(!C)return"Por asignar";if(C.tipo_asignado==="externo")return`${C.pastor_externo||"Pastor externo"} de ${C.congregacion_externa||"otra congregacion"}`;const u=p.find(d=>d.id===C.miembro_id);return u?`${u.nombres} ${u.apellidos}`:"Por asignar"};return s.tipo?e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,border:"2px solid var(--gold)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:b.length>0?14:0},children:[e.jsx("span",{style:{fontSize:48},children:m}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:22},children:s.dia}),e.jsx("div",{style:{color:"var(--gold)",fontWeight:600,fontSize:16},children:s.tipo}),s.hora&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Hora: ",s.hora]}),s.lugar&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Lugar: ",s.lugar]}),s.pastor_visita&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:14},children:["Pastor: ",s.pastor_visita]})]}),e.jsx("button",{onClick:()=>S(s,c),style:{background:"var(--gold)",border:"none",borderRadius:50,width:56,height:56,fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"ðŸ”Š"})]}),b.length>0&&e.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12},children:b.map(h=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:14},children:h}),e.jsx("span",{style:{fontWeight:600,fontSize:14},children:c(h)})]},h))})]}):e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,display:"flex",alignItems:"center",gap:16,opacity:.5},children:[e.jsx("span",{style:{fontSize:40},children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:18},children:s.dia}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:14},children:"Sin actividad"})]})]})}function Te({diaData:g,onChange:p,miembros:S}){const[s,b]=i.useState(!1),m=g,c=(d,_)=>p({...m,[d]:_}),h=q[m.tipo]||[],C=m.tipo==="Retiro congregacional"||m.tipo==="Culto unido",u=ue[m.tipo]||"ðŸ“…";return e.jsxs("div",{className:"card",style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>b(!s),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:u}),e.jsx("div",{style:{background:"var(--gold)",color:"#000",fontWeight:700,fontSize:13,borderRadius:6,padding:"4px 12px",minWidth:90,textAlign:"center"},children:m.dia}),m.tipo?e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:13},children:[m.tipo," ",m.hora?`- ${m.hora}`:""]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Sin actividad"})]}),e.jsx("span",{style:{color:"var(--text-muted)"},children:s?"cerrar":"abrir"})]}),s&&e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{className:"grid-2",style:{gap:12,marginBottom:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsxs("select",{value:m.tipo,onChange:d=>c("tipo",d.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Sin actividad --"}),De.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Hora"}),e.jsx("input",{type:"time",value:m.hora,onChange:d=>c("hora",d.target.value),className:"form-input"})]}),!C&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:m.lugar,onChange:d=>c("lugar",d.target.value),className:"form-input",placeholder:"Ej: Templo principal"})]}),C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pastor"}),e.jsx("input",{value:m.pastor_visita,onChange:d=>c("pastor_visita",d.target.value),className:"form-input",placeholder:"Nombre del pastor"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lugar"}),e.jsx("input",{value:m.lugar,onChange:d=>c("lugar",d.target.value),className:"form-input",placeholder:"Lugar del evento"})]})]})]}),h.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:13,marginBottom:10,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1},children:"Partes del programa"}),h.map(d=>e.jsx(Ae,{label:d,parte:m.partes[d],miembros:S,onChange:_=>c("partes",{...m.partes,[d]:_})},d))]}),m.tipo==="Visita a enfermos"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Encargado de la visita"}),e.jsxs("select",{value:m.encargado,onChange:d=>c("encargado",d.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"-- Seleccionar --"}),S.map(d=>e.jsxs("option",{value:d.id,children:[d.nombres," ",d.apellidos]},d.id))]})]})]})]})}function Fe(){const[g,p]=i.useState(null),S=async()=>{if(g&&g==="limpiar"){const t={...v,[f]:Z.map(ee)};z(t),p(null);try{await K(f,Z.map(ee))}catch{}}},[s,b]=i.useState(null),m=t=>b({mensaje:t,tipo:"error"}),{puedeEditar:c,rol:h}=oe(),C=c("programa"),[u,d]=i.useState([]),[_,D]=i.useState(!1),[f,k]=i.useState(U()),[v,z]=i.useState({}),[x,T]=i.useState(!1),[I,O]=i.useState(!1),[P,W]=i.useState(!1),A=de[new Date().getDay()%de.length],B=f===U(),o=v[f]||Z.map(ee);i.useEffect(()=>{if(ge({limit:200}).then(l=>d(l.data)).catch(()=>{}),["admin","pastor","pastora","secretaria","secretario"].includes(h)){const l=new Date,j=l.getDay()===0,w=l.getHours()>=17,N=U(),F=localStorage.getItem("programa_archivado_"+N);j&&w&&!F&&re().then($=>{const M=$.data||[];Promise.all(M.map(V=>le(V))).then(V=>{const G={};V.forEach(H=>{H.data&&(G[H.data.semana]=H.data.datos)}),z(G),K(N,["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"].map(H=>({dia:H,tipo:"",hora:"",lugar:"",encargado:"",partes:{},pastor_visita:"",congregacion_visita:""}))).then(()=>{localStorage.setItem("programa_archivado_"+N,"1"),W(!0),setTimeout(()=>W(!1),6e3)}).catch(()=>{})})}).catch(()=>{})}re().then(l=>{const j=l.data||[];Promise.all(j.map(w=>le(w))).then(w=>{const N={};w.forEach(F=>{F.data&&(N[F.data.semana]=F.data.datos)}),z(N)})}).catch(()=>{})},[]);const R=(t,l)=>{[...o],{...v}},L=async()=>{try{await K(f,o),T(!0),setTimeout(()=>T(!1),3e3)}catch{m("Ocurrio un error inesperado. Intenta de nuevo.")}},r=()=>{const t=[];t.push("PROGRAMA SEMANAL - MINISTERIO SAN JUAN 7:38"),t.push("Semana: "+f),t.push("=".repeat(50)),o.forEach(N=>{t.push(""),t.push(N.dia.toUpperCase()+(N.tipo?" - "+N.tipo:" - Sin actividad")),N.hora&&t.push("  Hora: "+N.hora),N.lugar&&t.push("  Lugar: "+N.lugar),N.pastor_visita&&t.push("  Pastor: "+N.pastor_visita),["Oracion de apertura","Direccion","Devocional","Alabanzas","Mensaje","Oracion de cierre","Encargado del estudio","Encargado"].forEach($=>{const M=N.partes[$];if(M){let V="Por asignar";if(M.tipo_asignado==="externo")V=(M.pastor_externo||"Pastor externo")+" de "+(M.congregacion_externa||"otra congregacion");else{const G=u.find(H=>String(H.id)===String(M.miembro_id));G&&(V=G.nombres+" "+G.apellidos)}t.push("  "+$+": "+V)}})}),t.push(""),t.push("Generado el "+new Date().toLocaleDateString("es-DO"));const l=new Blob([t.join(`
`)],{type:"text/plain;charset=utf-8"}),j=URL.createObjectURL(l),w=document.createElement("a");w.href=j,w.download="programa-"+f+".txt",w.click(),URL.revokeObjectURL(j)},E=async()=>p("limpiar"),y=()=>{let t="Programa de la semana. ";o.forEach(l=>{if(!l.tipo){t+=`${l.dia}, sin actividad. `;return}t+=`${l.dia}, ${l.tipo}`,l.hora&&(t+=` a las ${l.hora}`),l.lugar&&(t+=`, en ${l.lugar}`),t+=". ",(q[l.tipo]||[]).forEach(w=>{const N=l.partes[w];if(N){const F=N.tipo_asignado==="externo"?`${N.pastor_externo} de ${N.congregacion_externa}`:u.find($=>$.id===N.miembro_id)?`${u.find($=>$.id===N.miembro_id).nombres} ${u.find($=>$.id===N.miembro_id).apellidos}`:"por asignar";t+=`${w}: ${F}. `}})}),me(t)},n=(t,l)=>{let j=`${t.dia}. ${t.tipo}`;t.hora&&(j+=` a las ${t.hora}`),t.lugar&&(j+=`, en ${t.lugar}`),t.pastor_visita&&(j+=`. Pastor ${t.pastor_visita}`),j+=". ",(q[t.tipo]||[]).forEach(N=>{j+=`${N}: ${l(N)}. `}),me(j)},a=Object.keys(v).sort().reverse();return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Programa Semanal"}),e.jsx("p",{className:"page-subtitle",children:"Ministerio San Juan 7:38 - Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>O(!I),children:I?"Ver actual":"Historial"}),C&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>{var t;D(!_),(t=window.speechSynthesis)==null||t.cancel()},children:_?"Modo admin":"ðŸ”Š Modo facil"}),(_||!C)&&e.jsx("button",{onClick:y,style:{background:"var(--gold)",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:700,fontSize:15,cursor:"pointer"},children:"ðŸ”Š Escuchar todo"}),C&&!_&&B&&e.jsx("button",{className:"btn btn-ghost",onClick:E,children:"Limpiar"}),C&&!_&&B&&e.jsx("button",{className:"btn btn-ghost",onClick:()=>window.print(),children:"Imprimir"}),C&&!_&&e.jsx("button",{className:"btn btn-ghost",onClick:r,children:"â‡© Descargar"}),C&&!_&&B&&e.jsx("button",{className:"btn btn-gold",onClick:L,children:"Guardar"})]})]}),x&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Programa guardado correctamente"}),P&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"âœ“ El programa de esta semana fue archivado automÃ¡ticamente."}),_&&e.jsxs("div",{style:{background:"var(--gold)",borderRadius:12,padding:"16px 20px",marginBottom:20,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:32},children:"ðŸ”Š"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#000"},children:"Modo facil activado"}),e.jsx("div",{style:{fontSize:13,color:"#333"},children:"Presiona el boton ðŸ”Š en cada dia para escuchar el programa, o presiona Escuchar todo para oir toda la semana."})]})]}),I?e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:600,marginBottom:16},children:"Historial de programas"}),a.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No hay programas guardados aun."}):a.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("span",{style:{fontWeight:500},children:["Semana: ",t]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>{k(t),O(!1)},children:"Ver programa"})]},t))]}):e.jsxs(e.Fragment,{children:[!B&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--gold)",borderRadius:8,padding:"10px 16px",marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{color:"var(--gold)",fontWeight:600},children:["Viendo semana anterior: ",f]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>k(U()),children:"Volver a semana actual"})]}),e.jsxs("div",{className:"card",style:{marginBottom:20,borderLeft:"3px solid var(--gold)"},children:[e.jsxs("p",{style:{fontStyle:"italic",fontSize:14,marginBottom:4},children:['"',A.texto,'"']}),e.jsxs("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:["-- ",A.ref]})]}),_||!C?o.map((t,l)=>e.jsx(Be,{diaData:t,miembros:u,onEscuchar:n},t.dia)):o.map((t,l)=>e.jsx(Te,{diaData:t,index:l,onChange:j=>R(),miembros:u},t.dia))]}),e.jsx("style",{children:`
        @media print {
          .sidebar, .page-header button, .btn { display: none !important; }
          .card { box-shadow: none !important; border: 1px solid #ccc !important; }
          body { background: white !important; color: black !important; }
        }
      `}),s&&e.jsx(J,{mensaje:s.mensaje,tipo:s.tipo,onClose:()=>b(null)}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar elemento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>p(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:S,children:"SÃ­, eliminar"})]})]})})]})}const ae={alta:{label:"Urgente",color:"var(--red)"},media:{label:"Normal",color:"var(--gold)"},baja:{label:"Informativo",color:"var(--green)"}},te=()=>({titulo:"",contenido:"",prioridad:"media",fecha_expira:""});function Me(){const[g,p]=i.useState(null),[S,s]=i.useState(null),b=o=>p({mensaje:o,tipo:"error"}),{puedeEditar:m}=oe(),c=m("anuncios"),[h,C]=i.useState([]),[u,d]=i.useState(te()),[_,D]=i.useState(null),[f,k]=i.useState(!1),[v,z]=i.useState(!0),x=o=>d({...u,[o.target.name]:o.target.value}),T=async()=>{try{const{data:o}=await Ne();C(o)}catch{b("Ocurrio un error inesperado. Intenta de nuevo.")}z(!1)};i.useEffect(()=>{T()},[]);const I=async()=>{if(!(!u.titulo||!u.contenido))try{const o={...u,fecha_expira:u.fecha_expira||null};_!==null?await Se(_,o):await Ce(o),D(null),d(te()),k(!1),T()}catch{b("Ocurrio un error inesperado. Intenta de nuevo.")}},O=async()=>{if(S)try{await _e(S),s(null),T()}catch{b("No se pudo eliminar.")}},P=o=>{d({titulo:o.titulo,contenido:o.contenido,prioridad:o.prioridad,fecha_expira:o.fecha_expira||""}),D(o.id),k(!0)},W=new Date().toISOString().split("T")[0],A=h.filter(o=>!o.fecha_expira||o.fecha_expira>=W),B=h.filter(o=>o.fecha_expira&&o.fecha_expira<W);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Anuncios"}),e.jsxs("p",{className:"page-subtitle",children:[A.length," anuncio",A.length!==1?"s":""," activo",A.length!==1?"s":""]})]}),c&&e.jsx("button",{className:"btn btn-gold",onClick:()=>{d(te()),D(null),k(!0)},children:"+ Nuevo anuncio"})]}),v&&e.jsx("div",{style:{textAlign:"center",padding:40},children:e.jsx("span",{className:"spinner"})}),!v&&A.length===0&&e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“¢"}),e.jsx("p",{children:"No hay anuncios activos. Crea uno nuevo."})]}),A.map(o=>{var R,L,r;return e.jsx("div",{className:"card",style:{marginBottom:14,borderLeft:`3px solid ${((R=ae[o.prioridad])==null?void 0:R.color)||"var(--gold)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[e.jsx("span",{style:{background:(L=ae[o.prioridad])==null?void 0:L.color,color:"#fff",fontSize:11,fontWeight:700,borderRadius:4,padding:"2px 8px"},children:(r=ae[o.prioridad])==null?void 0:r.label}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:new Date(o.fecha).toLocaleDateString("es-DO")}),o.fecha_expira&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Ã‚Â· Expira: ",new Date(o.fecha_expira).toLocaleDateString("es-DO")]})]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:16,fontWeight:700,marginBottom:6},children:o.titulo}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,lineHeight:1.6,whiteSpace:"pre-wrap"},children:o.contenido})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[c&&e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>P(o),children:"Editar"}),c&&e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>s(o.id),children:"âœ•"})]})]})},o.id)}),B.length>0&&e.jsxs("div",{style:{marginTop:24},children:[e.jsx("h3",{style:{color:"var(--text-muted)",fontSize:13,textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Anuncios expirados"}),B.map(o=>e.jsx("div",{className:"card",style:{marginBottom:10,opacity:.5},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:14},children:o.titulo}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12,marginLeft:10},children:["ExpirÃƒÂ³: ",new Date(o.fecha_expira).toLocaleDateString("es-DO")]})]}),c&&e.jsx("button",{className:"btn btn-danger",style:{padding:"4px 10px",fontSize:12},onClick:()=>s(o.id),children:"âœ•"})]})},o.id))]}),f&&e.jsx("div",{className:"modal-overlay",onClick:o=>o.target===o.currentTarget&&k(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:_!==null?"Editar anuncio":"Nuevo anuncio"}),e.jsx("button",{className:"modal-close",onClick:()=>k(!1),children:"Ãƒâ€”"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Titulo *"}),e.jsx("input",{name:"titulo",value:u.titulo,onChange:x,className:"form-input",placeholder:"Ej: Retiro congregacional este sabado",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contenido *"}),e.jsx("textarea",{name:"contenido",value:u.contenido,onChange:x,className:"form-input",rows:4,style:{resize:"vertical"},placeholder:"Escribe aquÃƒÂ­ el detalle del anuncio..."})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Prioridad"}),e.jsxs("select",{name:"prioridad",value:u.prioridad,onChange:x,className:"form-input",children:[e.jsx("option",{value:"alta",children:"Urgente"}),e.jsx("option",{value:"media",children:"Normal"}),e.jsx("option",{value:"baja",children:"Informativo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de expiraciÃƒÂ³n"}),e.jsx(Y,{name:"fecha_expira",value:u.fecha_expira,onChange:x})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:4},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>k(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:I,children:_!==null?"Actualizar":"Publicar anuncio"})]})]})]})}),g&&e.jsx(J,{mensaje:g.mensaje,tipo:g.tipo,onClose:()=>p(null)}),S&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar anuncio?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta accion no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>s(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:O,children:"Si, eliminar"})]})]})})]})}const pe="asistencia_iglesia",Ie=(g,p)=>{const S=new Date().toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=window.open("","_blank","width=900,height=700");s.document.write(`<!DOCTYPE html><html lang="es"><head>
    <meta charset="UTF-8"/>
    <title>${g}</title>
    <style>
      * { margin:0; padding:0; box-sizing:border-box; }
      body { font-family: Calibri, Arial, sans-serif; color: #1a1a2e; padding: 24px 32px; }
      .header { display:flex; align-items:center; gap:20px; border-bottom: 3px solid #1a2e4a; padding-bottom:14px; margin-bottom:18px; }
      .header img { width:72px; height:72px; object-fit:contain; border-radius:8px; }
      .header-info h1 { font-size:17px; font-weight:700; color:#1a2e4a; margin-bottom:3px; }
      .header-info p { font-size:13px; color:#4a6fa5; font-style:italic; margin-bottom:2px; }
      .header-info small { font-size:11px; color:#888; }
      h2 { font-size:15px; font-weight:700; color:#1a2e4a; margin:18px 0 10px; }
      table { width:100%; border-collapse:collapse; font-size:12px; margin-bottom:16px; }
      th { background:#1a2e4a; color:#fff; padding:7px 10px; text-align:left; font-weight:600; }
      td { padding:6px 10px; border-bottom:1px solid #e0e0e0; }
      tr:nth-child(even) td { background:#eef3fa; }
      .badge { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:600; }
      .badge-green { background:#d4edda; color:#155724; }
      .badge-amber { background:#fff3cd; color:#856404; }
      .badge-red   { background:#f8d7da; color:#721c24; }
      .section { margin-bottom:20px; }
      .stat-row { display:flex; gap:24px; margin-bottom:14px; flex-wrap:wrap; }
      .stat-box { background:#eef3fa; border-radius:8px; padding:12px 20px; text-align:center; }
      .stat-box .val { font-size:22px; font-weight:700; color:#1a2e4a; }
      .stat-box .lbl { font-size:11px; color:#666; }
      .bar-wrap { background:#e0e0e0; border-radius:4px; height:8px; margin-top:4px; }
      .bar { height:8px; border-radius:4px; }
      .footer { margin-top:24px; padding-top:10px; border-top:1px solid #ddd; font-size:11px; color:#aaa; text-align:right; }
      @media print { body { padding:12px 20px; } }
    </style>
  </head><body>
    <div class="header">
      <img src="/logo_iglesia.jpg" onerror="this.style.display='none'" />
      <div class="header-info">
        <h1>Iglesia Pentecostal Juan 7:38: El Semillero 1/10</h1>
        <p>Pastora: Dinorah Bautista</p>
        <small>${g} &nbsp;Â·&nbsp; ${S}</small>
      </div>
    </div>
    ${p}
    <div class="footer">Generado por el Sistema de GestiÃ³n â€” ${S}</div>
  </body></html>`),s.document.close(),s.focus(),setTimeout(()=>{s.print(),s.close()},400)},Oe=["Culto de avivamiento","Estudio bÃ­blico","Escuela de niÃ±os","Celula","Retiro congregacional","Culto unido","Otro"],We=()=>new Date().toISOString().split("T")[0];function Ve(){const[g,p]=i.useState(null),S=()=>{g&&(C(a=>a.filter(t=>t.id!==g)),p(null))},[s,b]=i.useState(null),[m,c]=i.useState([]),[h,C]=i.useState(()=>{try{return JSON.parse(localStorage.getItem(pe))||[]}catch{return[]}}),[u,d]=i.useState("registrar"),[_,D]=i.useState(We()),[f,k]=i.useState("Culto de avivamiento"),[v,z]=i.useState({}),[x,T]=i.useState(""),[I,O]=i.useState(!1),[P,W]=i.useState(!0),[A,B]=i.useState(null);i.useEffect(()=>{ge({limit:500}).then(a=>{const t=a.data.filter(j=>j.estado==="activo");c(t);const l={};t.forEach(j=>l[j.id]=!1),z(l)}).catch(()=>{}).finally(()=>W(!1))},[]);const o=a=>{const t={};m.forEach(l=>t[l.id]=a),z(t)},R=()=>{const a=m.filter(w=>v[w.id]).map(w=>({id:w.id,nombre:`${w.nombres} ${w.apellidos}`})),l=[{id:Date.now(),fecha:_,tipo:f,total_miembros:m.length,total_presentes:a.length,presentes:a},...h];C(l),localStorage.setItem(pe,JSON.stringify(l)),O(!0),setTimeout(()=>O(!1),3e3);const j={};m.forEach(w=>j[w.id]=!1),z(j)},L=a=>p(a),r=m.filter(a=>`${a.nombres} ${a.apellidos}`.toLowerCase().includes(x.toLowerCase())),E=m.filter(a=>v[a.id]).length,y=m.map(a=>{const t=h.length,l=h.filter(w=>w.presentes.some(N=>N.id===a.id)).length,j=t>0?Math.round(l/t*100):0;return{...a,asistio:l,total:t,porcentaje:j}}).sort((a,t)=>a.porcentaje-t.porcentaje),n=()=>{const a=y.map(l=>{const j=l.porcentaje>70?"badge-green":l.porcentaje>40?"badge-amber":"badge-red",w=l.porcentaje>70?"Regular":l.porcentaje>40?"Irregular":"Ausente frecuente";return`<tr>
        <td>${l.nombres} ${l.apellidos}</td>
        <td style="text-align:center">${l.asistio}</td>
        <td style="text-align:center">${l.total}</td>
        <td style="text-align:center"><strong>${l.porcentaje}%</strong></td>
        <td><span class="badge ${j}">${w}</span></td>
      </tr>`}).join(""),t=`
      <div class="stat-row">
        <div class="stat-box"><div class="val">${h.length}</div><div class="lbl">Cultos registrados</div></div>
        <div class="stat-box"><div class="val">${m.length}</div><div class="lbl">Miembros activos</div></div>
      </div>
      <h2>Resumen de Asistencia por Miembro</h2>
      <table>
        <thead><tr><th>Miembro</th><th>Asistencias</th><th>Total cultos</th><th>%</th><th>Estado</th></tr></thead>
        <tbody>${a}</tbody>
      </table>`;Ie("Resumen de Asistencia",t)};return e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Asistencia"}),e.jsxs("p",{className:"page-subtitle",children:[h.length," registros guardados"]})]})}),e.jsx("div",{style:{display:"flex",gap:4,marginBottom:20,borderBottom:"1px solid var(--border)"},children:[["registrar","Registrar asistencia"],["historial","Historial"],["resumen","Resumen por miembro"]].map(([a,t])=>e.jsx("button",{onClick:()=>d(a),style:{background:"none",border:"none",cursor:"pointer",padding:"8px 18px",color:u===a?"var(--gold)":"var(--text-muted)",borderBottom:u===a?"2px solid var(--gold)":"2px solid transparent",fontSize:14,fontWeight:500,fontFamily:"var(--font-body)"},children:t},a))}),u==="registrar"&&e.jsxs("div",{children:[I&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Asistencia guardada correctamente"}),e.jsx("div",{className:"card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha"}),e.jsx(Y,{name:"fecha",value:_,onChange:a=>D(a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de actividad"}),e.jsx("select",{value:f,onChange:a=>k(a.target.value),className:"form-input",children:Oe.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14,flexWrap:"wrap",gap:10},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600},children:"Presentes: "}),e.jsx("span",{style:{color:"var(--gold)",fontWeight:700,fontSize:18},children:E}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" / ",m.length]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>o(!0),children:"Marcar todos"}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:()=>o(!1),children:"Desmarcar todos"})]})]}),e.jsxs("div",{className:"search-bar",style:{marginBottom:14},children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar miembro...",value:x,onChange:a=>T(a.target.value)})]}),P?e.jsx("div",{style:{textAlign:"center",padding:30},children:e.jsx("span",{className:"spinner"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:400,overflowY:"auto"},children:r.map(a=>e.jsxs("div",{onClick:()=>z({...v,[a.id]:!v[a.id]}),style:{display:"flex",alignItems:"center",gap:12,padding:"10px 14px",borderRadius:8,cursor:"pointer",background:v[a.id]?"rgba(var(--gold-rgb),0.1)":"var(--bg-card)",border:v[a.id]?"1px solid var(--gold)":"1px solid var(--border)",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:22,height:22,borderRadius:4,border:`2px solid ${v[a.id]?"var(--gold)":"var(--border)"}`,background:v[a.id]?"var(--gold)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:v[a.id]&&e.jsx("span",{style:{color:"#000",fontSize:14,fontWeight:700},children:"âœ“"})}),e.jsxs("span",{style:{fontWeight:v[a.id]?600:400},children:[a.nombres," ",a.apellidos]}),e.jsx("span",{className:`badge ${v[a.id]?"badge-green":""}`,style:{marginLeft:"auto",fontSize:11},children:v[a.id]?"Presente":"Ausente"})]},a.id))}),e.jsx("button",{className:"btn btn-gold",onClick:R,style:{width:"100%",marginTop:16,justifyContent:"center"},children:"Guardar asistencia"})]})]}),u==="historial"&&e.jsx("div",{className:"card",children:h.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay registros de asistencia aun."}):h.map(a=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 0",borderBottom:"1px solid var(--border)",flexWrap:"wrap",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:a.tipo}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:13},children:new Date(a.fecha).toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:20,color:"var(--gold)"},children:a.total_presentes}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["de ",a.total_miembros]})]}),e.jsxs("div",{style:{width:50,height:50,borderRadius:"50%",background:"var(--bg-card)",border:`3px solid ${a.total_presentes/a.total_miembros>.7?"var(--green)":a.total_presentes/a.total_miembros>.4?"var(--gold)":"var(--red)"}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:13},children:[Math.round(a.total_presentes/a.total_miembros*100),"%"]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-ghost",style:{fontSize:12,padding:"4px 10px"},onClick:()=>B(a),children:"Ver"}),e.jsx("button",{className:"btn btn-danger",style:{fontSize:12,padding:"4px 10px"},onClick:()=>L(a.id),children:"âœ•"})]})]})]},a.id))}),u==="resumen"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13},children:["Basado en ",h.length," registros. Los miembros con menor asistencia aparecen primero."]}),e.jsx("button",{className:"btn btn-ghost",style:{fontSize:13},onClick:n,children:"ðŸ–¨ï¸ Imprimir"})]}),y.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:30},children:"No hay datos aun."}):e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Miembro"}),e.jsx("th",{children:"Asistencias"}),e.jsx("th",{children:"Total cultos"}),e.jsx("th",{children:"Porcentaje"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:y.map(a=>e.jsxs("tr",{children:[e.jsxs("td",{style:{fontWeight:500},children:[a.nombres," ",a.apellidos]}),e.jsx("td",{style:{color:"var(--gold)",fontWeight:600},children:a.asistio}),e.jsx("td",{style:{color:"var(--text-muted)"},children:a.total}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:6,background:"var(--border)",borderRadius:3},children:e.jsx("div",{style:{width:`${a.porcentaje}%`,height:"100%",borderRadius:3,background:a.porcentaje>70?"var(--green)":a.porcentaje>40?"var(--gold)":"var(--red)"}})}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,minWidth:35},children:[a.porcentaje,"%"]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.porcentaje>70?"badge-green":a.porcentaje>40?"badge-amber":"badge-red"}`,children:a.porcentaje>70?"Regular":a.porcentaje>40?"Irregular":"Ausente frecuente"})})]},a.id))})]})})]}),A&&e.jsx("div",{className:"modal-overlay",onClick:a=>a.target===a.currentTarget&&B(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:500},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[A.tipo," â€” ",new Date(A.fecha).toLocaleDateString("es-DO")]}),e.jsx("button",{className:"modal-close",onClick:()=>B(null),children:"Ã—"})]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:13,marginBottom:14},children:[A.total_presentes," de ",A.total_miembros," miembros presentes"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto"},children:A.presentes.map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",background:"var(--bg-card)",borderRadius:8},children:[e.jsx("span",{style:{color:"var(--green)",fontWeight:700},children:"âœ“"}),e.jsx("span",{children:a.nombre})]},a.id))})]})}),s&&e.jsx(J,{mensaje:s.mensaje,tipo:s.tipo,onClose:()=>b(null)}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar registro?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>p(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:S,children:"SÃ­, eliminar"})]})]})})]})}const he="documentos_iglesia",se=["Actas","Permisos y licencias","Estatutos","Contratos","Certificados","Financiero","Otro"],ne=()=>({nombre:"",categoria:"Actas",fecha:"",descripcion:"",url:"",archivo_nombre:""});function He(){const[g,p]=i.useState(null),S=async()=>{if(g)try{await deleteDocumento(g),p(null),load()}catch{m("No se pudo eliminar.")}},[s,b]=i.useState(null),m=r=>b({mensaje:r,tipo:"error"}),[c,h]=i.useState(()=>{try{return JSON.parse(localStorage.getItem(he))||[]}catch{return[]}}),[C,u]=i.useState(!1),[d,_]=i.useState(null),[D,f]=i.useState(ne()),[k,v]=i.useState(""),[z,x]=i.useState(""),[T,I]=i.useState(!1),O=r=>f({...D,[r.target.name]:r.target.value}),P=r=>{const E=r.target.files[0];if(!E)return;const y=new FileReader;y.onload=n=>{f(a=>({...a,archivo_nombre:E.name,url:n.target.result}))},y.readAsDataURL(E)},W=()=>{if(!D.nombre)return;let r;d!==null?(r=c.map((E,y)=>y===d?{...D,id:E.id}:E),_(null)):r=[{...D,id:Date.now(),fecha_subida:new Date().toISOString()},...c],h(r),localStorage.setItem(he,JSON.stringify(r)),f(ne()),u(!1),I(!0),setTimeout(()=>I(!1),3e3)},A=r=>{f(c[r]),_(r),u(!0)},B=r=>{if(!r.url)return;const E=document.createElement("a");E.href=r.url,E.download=r.archivo_nombre||r.nombre,E.click()},o={Actas:"ðŸ“‹","Permisos y licencias":"ðŸ“œ",Estatutos:"ðŸ“–",Contratos:"ðŸ¤",Certificados:"ðŸ†",Financiero:"ðŸ’°",Otro:"ðŸ“„"},R=c.filter(r=>{var n;const E=r.nombre.toLowerCase().includes(k.toLowerCase())||((n=r.descripcion)==null?void 0:n.toLowerCase().includes(k.toLowerCase())),y=!z||r.categoria===z;return E&&y}),L=se.map(r=>({cat:r,docs:R.filter(E=>E.categoria===r)})).filter(r=>r.docs.length>0);return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Documentos"}),e.jsxs("p",{className:"page-subtitle",children:[c.length," documento",c.length!==1?"s":""," guardado",c.length!==1?"s":""]})]}),e.jsx("button",{className:"btn btn-gold",onClick:()=>{f(ne()),_(null),u(!0)},children:"+ Subir documento"})]}),T&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Documento guardado correctamente"}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:20,flexWrap:"wrap"},children:[e.jsxs("div",{className:"search-bar",children:[e.jsx("span",{className:"search-icon",children:"âŒ•"}),e.jsx("input",{placeholder:"Buscar documento...",value:k,onChange:r=>v(r.target.value)})]}),e.jsxs("select",{value:z,onChange:r=>x(r.target.value),className:"form-input",style:{width:"auto"},children:[e.jsx("option",{value:"",children:"Todas las categorias"}),se.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),R.length===0?e.jsxs("div",{className:"card",style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:12},children:"ðŸ“‚"}),e.jsx("p",{children:"No hay documentos guardados. Sube el primero."})]}):L.map(({cat:r,docs:E})=>e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:20},children:o[r]}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:15,fontWeight:700,color:"var(--gold)"},children:r}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["(",E.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:E.map((y,n)=>e.jsxs("div",{className:"card",style:{display:"flex",alignItems:"center",gap:16,padding:"14px 18px"},children:[e.jsx("span",{style:{fontSize:32,flexShrink:0},children:o[y.categoria]||"ðŸ“„"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:15,marginBottom:4},children:y.nombre}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[y.fecha&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-DO")]}),y.archivo_nombre&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Archivo: ",y.archivo_nombre]}),y.fecha_subida&&e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:12},children:["Subido: ",new Date(y.fecha_subida).toLocaleDateString("es-DO")]})]}),y.descripcion&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13,marginTop:4},children:y.descripcion})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexShrink:0},children:[y.url&&e.jsx("button",{className:"btn btn-gold",style:{padding:"5px 12px",fontSize:12},onClick:()=>B(y),children:"Descargar"}),e.jsx("button",{className:"btn btn-ghost",style:{padding:"5px 10px",fontSize:12},onClick:()=>A(c.indexOf(y)),children:"Editar"}),e.jsx("button",{className:"btn btn-danger",style:{padding:"5px 10px",fontSize:12},onClick:()=>p(y.id),children:"âœ•"})]})]},y.id))})]},r)),C&&e.jsx("div",{className:"modal-overlay",onClick:r=>r.target===r.currentTarget&&u(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:d!==null?"Editar documento":"Subir documento"}),e.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del documento *"}),e.jsx("input",{name:"nombre",value:D.nombre,onChange:O,className:"form-input",placeholder:"Ej: Acta de fundacion",required:!0})]}),e.jsxs("div",{className:"grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Categoria"}),e.jsx("select",{name:"categoria",value:D.categoria,onChange:O,className:"form-input",children:se.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha del documento"}),e.jsx(Y,{name:"fecha",value:D.fecha,onChange:O})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Descripcion"}),e.jsx("textarea",{name:"descripcion",value:D.descripcion,onChange:O,className:"form-input",rows:3,style:{resize:"vertical"},placeholder:"Descripcion breve del documento..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Subir archivo (PDF, imagen, Word)"}),e.jsx("input",{type:"file",onChange:P,className:"form-input",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),D.archivo_nombre&&e.jsxs("div",{style:{color:"var(--green)",fontSize:12,marginTop:4},children:["Archivo: ",D.archivo_nombre]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>u(!1),children:"Cancelar"}),e.jsx("button",{className:"btn btn-gold",onClick:W,children:d!==null?"Actualizar":"Guardar documento"})]})]})]})}),s&&e.jsx(J,{mensaje:s.mensaje,tipo:s.tipo,onClose:()=>b(null)}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:380},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("div",{style:{fontSize:36,marginBottom:12},children:"âš ï¸"}),e.jsx("h3",{style:{fontFamily:"var(--font-heading)",fontSize:18,marginBottom:8},children:"Â¿Eliminar documento?"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:13},children:"Esta acciÃ³n no se puede deshacer."})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:16},children:[e.jsx("button",{className:"btn btn-ghost",style:{flex:1},onClick:()=>p(null),children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",style:{flex:1,justifyContent:"center"},onClick:S,children:"SÃ­, eliminar"})]})]})})]})}export{Me as A,He as D,Le as E,Fe as P,$e as a,Ve as b};
