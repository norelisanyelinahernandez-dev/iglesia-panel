import{o as S,u as k,j as e,e as _,A as B,P as C,q,M as W,T as O,I as T,R as J,t as $,F as V}from"./pages-admin-CTDivLdt.js";import{a as Y,u as F,r as c,N as H,B as K,b as M,d as n,e as f,R as U}from"./vendor-react-D_uAx6on.js";import{E as z,P as A,a as D,A as G,b as X,D as Q}from"./pages-content-BZ5Mj1Wd.js";import{M as I,D as Z}from"./pages-miembro-Drt3pDQ8.js";import"./vendor-charts-DdYviQ4Y.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();var w={},E=Y;w.createRoot=E.createRoot,w.hydrateRoot=E.hydrateRoot;const ee=[{to:"/miembro/",label:"Panel",icono:"ðŸ ",seccion:"panel"},{to:"/miembro/eventos",label:"Eventos",icono:"ðŸ“…",seccion:"eventos"},{to:"/miembro/programa",label:"Programa",icono:"ðŸ“–",seccion:"programa"},{to:"/miembro/perfil",label:"Mi Perfil",icono:"ðŸ‘¤",seccion:"panel"},{to:"/miembro/pastora",label:"Info Pastoral",icono:"âœï¸",seccion:"pastora"}],se=[{to:"/",label:"Panel",icono:"ðŸ ",seccion:"panel"},{to:"/miembros",label:"Miembros",icono:"ðŸ‘¥",seccion:"miembros"},{to:"/tesoreria",label:"TesorerÃ­a",icono:"ðŸ’°",seccion:"tesoreria"},{to:"/finanzas",label:"Finanzas",icono:"ðŸ“Š",seccion:"finanzas"},{to:"/reportes",label:"Reportes",icono:"ðŸ“‹",seccion:"reportes"},{to:"/inventario",label:"Inventario",icono:"ðŸ“¦",seccion:"inventario"},{to:"/eventos",label:"Eventos",icono:"ðŸ“…",seccion:"eventos"},{to:"/asistencia",label:"Asistencia",icono:"âœ…",seccion:"asistencia"},{to:"/pastora",label:"Pastora",icono:"âœï¸",seccion:"pastora"},{to:"/programa",label:"Programa",icono:"ðŸ“–",seccion:"programa"},{to:"/anuncios",label:"Anuncios",icono:"ðŸ“¢",seccion:"anuncios"},{to:"/documentos",label:"Documentos",icono:"ðŸ“„",seccion:"documentos"},{to:"/respaldo",label:"Respaldo",icono:"ðŸ’¾",seccion:"respaldo"}];function P({children:a}){var u,y,g;const{user:s,logout:r}=S(),{puede:i}=k(),t=["admin","pastor","pastora","secretaria","secretario","copastor","copastora","tesorero","tesorera","diacono","maestra"],o=((u=s==null?void 0:s.rol)==null?void 0:u.toLowerCase())||"",d=(s==null?void 0:s.tipo)==="miembro"&&!t.includes(o),m=d?ee:se.filter(({seccion:h})=>i(h)),b=F(),[p,x]=c.useState(!1),j=()=>{r(),b("/login")},v=()=>x(!1);return e.jsxs("div",{className:"layout",children:[e.jsx("div",{className:`sidebar-overlay ${p?"open":""}`,onClick:v}),e.jsxs("aside",{className:`sidebar ${p?"open":""}`,children:[e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:42,height:42,borderRadius:"50%",objectFit:"cover",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("div",{className:"logo-name",style:{fontSize:12,lineHeight:1.3},children:"Ministerio San Juan 7:38"}),e.jsx("div",{className:"logo-sub",style:{fontSize:10},children:"Del Semillero 1/11"}),e.jsx("div",{className:"logo-sub",children:d?"Portal del miembro":"Panel de gestiÃ³n"})]})]}),e.jsx("nav",{className:"sidebar-nav",children:m.map(({to:h,label:N,icono:R})=>e.jsxs(H,{to:h,end:h==="/",className:({isActive:L})=>`nav-item ${L?"active":""}`,onClick:v,children:[e.jsx("span",{className:"nav-icon",children:R}),e.jsx("span",{children:N})]},h))}),e.jsxs("div",{className:"sidebar-footer",children:[e.jsxs("div",{className:"user-card",children:[e.jsx("div",{className:"user-avatar",children:(g=(y=s==null?void 0:s.nombre)==null?void 0:y[0])==null?void 0:g.toUpperCase()}),e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-name",children:s==null?void 0:s.nombre}),e.jsx("div",{className:"user-role",children:s==null?void 0:s.rol})]})]}),e.jsx("button",{className:"logout-btn",onClick:j,title:"Cerrar sesiÃ³n",children:"â»"})]})]}),e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"mobile-topbar",children:[e.jsx("button",{className:"menu-toggle",onClick:()=>x(!p),children:"â˜°"}),e.jsxs("div",{className:"mobile-topbar-logo",children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:32,height:32,borderRadius:"50%",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsx("div",{className:"mobile-topbar-title",children:"Ministerio San Juan 7:38"}),e.jsx("div",{className:"mobile-topbar-sub",children:"Del Semillero 1/11"})]})]})]}),e.jsx("div",{className:"content-inner",children:a})]})]})}function oe({onDone:a}){const[s,r]=c.useState(!0);return c.useEffect(()=>{const i=setTimeout(()=>{r(!1)},1800),t=setTimeout(()=>{a()},2200);return()=>{clearTimeout(i),clearTimeout(t)}},[]),e.jsxs("div",{style:{position:"fixed",inset:0,background:"#0f1117",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,opacity:s?1:0,transition:"opacity 0.4s ease",pointerEvents:s?"all":"none"},children:[e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",marginBottom:20,boxShadow:"0 0 30px rgba(184,134,11,0.4)"}}),e.jsx("div",{style:{fontFamily:"Playfair Display, serif",fontSize:18,fontWeight:700,color:"#fff",marginBottom:6},children:"Ministerio San Juan 7:38"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginBottom:30},children:"Del Semillero 1/11"}),e.jsx("div",{style:{width:40,height:3,background:"#b8860b",borderRadius:2}})]})}function te(){const[a,s]=c.useState([]),[r,i]=c.useState(!1);return c.useEffect(()=>{(async()=>{try{const{data:o}=await _({limit:500}),d=new Date,m=d.getDate(),b=d.getMonth()+1,p=o.filter(x=>{if(!x.fecha_nacimiento)return!1;const j=new Date(x.fecha_nacimiento);return j.getDate()===m&&j.getMonth()+1===b});p.length>0&&(s(p),i(!0))}catch{}})()},[]),r?e.jsxs("div",{style:{position:"fixed",bottom:24,right:24,background:"var(--surface)",border:"1px solid var(--gold)",borderRadius:16,padding:"18px 20px",maxWidth:320,zIndex:999,boxShadow:"0 8px 32px rgba(0,0,0,0.4)",animation:"slideIn 0.4s ease"},children:[e.jsx("style",{children:"@keyframes slideIn { from { transform: translateY(20px); opacity:0 } to { transform: translateY(0); opacity:1 } }"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:24},children:"ðŸŽ‚"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:14,color:"var(--gold)"},children:"Cumpleanos hoy!"}),e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:a.length===1?"1 miembro cumple anos":`${a.length} miembros cumplen anos`})]})]}),e.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",fontSize:16,padding:4},children:"X"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:a.map(t=>{const o=new Date().getFullYear()-new Date(t.fecha_nacimiento).getFullYear();return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,background:"var(--bg-card)",borderRadius:10,padding:"8px 12px"},children:[t.foto?e.jsx("img",{src:t.foto,style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid var(--gold)"}}):e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"var(--gold-dim)",border:"2px solid var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:"ðŸŽ‰"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:13},children:[t.nombres," ",t.apellidos]}),e.jsxs("div",{style:{fontSize:11,color:"var(--text-muted)"},children:["Hoy cumple ",o," anos!"]})]})]},t.id)})})]}):null}function ae(){const{login:a,loginMiembro:s}=S(),r=F(),[i,t]=c.useState("admin"),[o,d]=c.useState({email:"",password:"",cedula:"",nombres:"",apellidos:"",fecha_nacimiento:""}),[m,b]=c.useState(!1),[p,x]=c.useState(""),[j,v]=c.useState(!1),u=g=>d({...o,[g.target.name]:g.target.value}),y=async g=>{var h,N;g.preventDefault(),x(""),v(!0);try{i==="admin"?(await a(o.email,o.password),r("/")):(await s(m?{nombres:o.nombres,apellidos:o.apellidos,fecha_nacimiento:o.fecha_nacimiento}:{cedula:o.cedula}),r("/mi-perfil"))}catch(R){x(((N=(h=R.response)==null?void 0:h.data)==null?void 0:N.detail)||"No se encontraron datos con esa informaciÃ³n")}finally{v(!1)}};return e.jsxs("div",{className:"login-bg",children:[e.jsx("div",{className:"deco-cross cross-1",children:"âœ›"}),e.jsx("div",{className:"deco-cross cross-2",children:"âœ›"}),e.jsx("div",{className:"deco-cross cross-3",children:"âœ›"}),e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:e.jsx("img",{src:"/logo.jpg",alt:"Logo",style:{width:90,height:90,borderRadius:"50%",objectFit:"cover"}})}),e.jsx("h1",{className:"login-title",children:"Ministerio San Juan 7:38"}),e.jsx("p",{className:"login-sub",children:"Del Semillero 1/11"})]}),e.jsxs("div",{style:{display:"flex",background:"var(--surface-2)",borderRadius:10,padding:4,marginBottom:20,gap:4},children:[e.jsx("button",{type:"button",onClick:()=>t("admin"),style:{flex:1,padding:"8px 0",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:13,background:i==="admin"?"var(--gold)":"transparent",color:i==="admin"?"#000":"var(--text-muted)",transition:"all .2s"},children:"ðŸ‘‘ AdministraciÃ³n"}),e.jsx("button",{type:"button",onClick:()=>t("miembro"),style:{flex:1,padding:"8px 0",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:13,background:i==="miembro"?"var(--gold)":"transparent",color:i==="miembro"?"#000":"var(--text-muted)",transition:"all .2s"},children:"ðŸ™ Soy miembro"})]}),p&&e.jsx("div",{className:"alert alert-error",children:p}),e.jsxs("form",{onSubmit:y,className:"login-form",children:[i==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo electrÃ³nico"}),e.jsx("input",{name:"email",type:"email",className:"form-input",placeholder:"admin@iglesia.com",value:o.email,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ContraseÃ±a"}),e.jsx("input",{name:"password",type:"password",className:"form-input",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:o.password,onChange:u,required:!0})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:16},children:[e.jsx("button",{type:"button",onClick:()=>b(!1),style:{padding:"6px 16px",borderRadius:20,border:"1px solid var(--border)",cursor:"pointer",fontWeight:600,fontSize:12,background:m?"transparent":"var(--surface-2)",color:m?"var(--text-muted)":"var(--gold)"},children:"Adulto"}),e.jsx("button",{type:"button",onClick:()=>b(!0),style:{padding:"6px 16px",borderRadius:20,border:"1px solid var(--border)",cursor:"pointer",fontWeight:600,fontSize:12,background:m?"var(--surface-2)":"transparent",color:m?"var(--gold)":"var(--text-muted)"},children:"Menor de edad"})]}),m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombres"}),e.jsx("input",{name:"nombres",type:"text",className:"form-input",placeholder:"Nombres completos",value:o.nombres,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Apellidos"}),e.jsx("input",{name:"apellidos",type:"text",className:"form-input",placeholder:"Apellidos completos",value:o.apellidos,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de nacimiento"}),e.jsx("input",{name:"fecha_nacimiento",type:"date",className:"form-input",value:o.fecha_nacimiento,onChange:u,required:!0})]})]}):e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"NÃºmero de cÃ©dula"}),e.jsx("input",{name:"cedula",type:"text",className:"form-input",placeholder:"000-0000000-0",value:o.cedula,onChange:u,required:!0})]})]}),e.jsx("button",{type:"submit",className:"btn btn-gold login-btn",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner",style:{width:16,height:16}})," Buscando..."]}):i==="admin"?"Iniciar sesiÃ³n":"Entrar"})]}),e.jsx("div",{className:"login-divider",children:e.jsx("span",{children:"Sistema de GestiÃ³n Integral"})}),e.jsxs("div",{style:{textAlign:"center",marginTop:16,padding:"0 8px"},children:[e.jsx("p",{style:{fontStyle:"italic",fontSize:13,color:"var(--text-muted)",lineHeight:1.7},children:'"El que cree en mÃ­, como dice la Escritura, de su interior correrÃ¡n rÃ­os de agua viva."'}),e.jsx("span",{style:{color:"var(--gold)",fontSize:12,fontWeight:600},children:"â€” Juan 7:38"})]})]})]})}function ne({children:a}){const{user:s}=S();return s?a:e.jsx(f,{to:"/login",replace:!0})}function l({seccion:a,children:s}){const{puede:r}=k();return r(a)?s:e.jsx(f,{to:"/",replace:!0})}function ie(){const{user:a}=S();return e.jsxs(M,{children:[e.jsx(n,{path:"/login",element:a?e.jsx(f,{to:a.tipo==="miembro"?"/miembro/":"/",replace:!0}):e.jsx(ae,{})}),e.jsx(n,{path:"/mi-perfil",element:(a==null?void 0:a.tipo)==="miembro"?e.jsx(C,{children:e.jsx(P,{children:e.jsx(I,{})})}):e.jsx(f,{to:"/login",replace:!0})}),e.jsx(n,{path:"/miembro/*",element:(a==null?void 0:a.tipo)==="miembro"?e.jsx(C,{children:e.jsx(P,{children:e.jsxs(M,{children:[e.jsx(n,{path:"/",element:e.jsx(Z,{})}),e.jsx(n,{path:"/eventos",element:e.jsx(z,{})}),e.jsx(n,{path:"/programa",element:e.jsx(A,{})}),e.jsx(n,{path:"/pastora",element:e.jsx(D,{})}),e.jsx(n,{path:"/perfil",element:e.jsx(I,{})}),e.jsx(n,{path:"*",element:e.jsx(f,{to:"/miembro/",replace:!0})})]})})}):e.jsx(f,{to:"/login",replace:!0})}),e.jsx(n,{path:"/*",element:e.jsx(ne,{children:e.jsx(C,{children:e.jsx(P,{children:e.jsxs(M,{children:[e.jsx(n,{path:"/",element:e.jsx(q,{})}),e.jsx(n,{path:"/miembros",element:e.jsx(l,{seccion:"miembros",children:e.jsx(W,{})})}),e.jsx(n,{path:"/tesoreria",element:e.jsx(l,{seccion:"tesoreria",children:e.jsx(O,{})})}),e.jsx(n,{path:"/inventario",element:e.jsx(l,{seccion:"inventario",children:e.jsx(T,{})})}),e.jsx(n,{path:"/eventos",element:e.jsx(l,{seccion:"eventos",children:e.jsx(z,{})})}),e.jsx(n,{path:"/pastora",element:e.jsx(l,{seccion:"pastora",children:e.jsx(D,{})})}),e.jsx(n,{path:"/programa",element:e.jsx(l,{seccion:"programa",children:e.jsx(A,{})})}),e.jsx(n,{path:"/anuncios",element:e.jsx(l,{seccion:"anuncios",children:e.jsx(G,{})})}),e.jsx(n,{path:"/asistencia",element:e.jsx(l,{seccion:"asistencia",children:e.jsx(X,{})})}),e.jsx(n,{path:"/reportes",element:e.jsx(l,{seccion:"reportes",children:e.jsx(J,{})})}),e.jsx(n,{path:"/respaldo",element:e.jsx(l,{seccion:"respaldo",children:e.jsx($,{})})}),e.jsx(n,{path:"/finanzas",element:e.jsx(l,{seccion:"finanzas",children:e.jsx(V,{})})}),e.jsx(n,{path:"/documentos",element:e.jsx(l,{seccion:"documentos",children:e.jsx(Q,{})})}),e.jsx(n,{path:"*",element:e.jsx(f,{to:"/",replace:!0})})]})})})})})]})}function re(){const[a,s]=c.useState(!0);return e.jsx(B,{children:e.jsxs(K,{children:[a&&e.jsx(oe,{onDone:()=>s(!1)}),e.jsx(ie,{}),e.jsx(te,{})]})})}const le="https://iglesia-api-g1ux.onrender.com",ce=()=>{const a=()=>{fetch(`${le}/health`).catch(()=>{})};a(),setInterval(a,10*60*1e3)};ce();w.createRoot(document.getElementById("root")).render(e.jsx(U.StrictMode,{children:e.jsx(re,{})}));
